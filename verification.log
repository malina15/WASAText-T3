================================================================================
VERIFICARE COMPLETĂ PROIECT NEW-WASA
Data: $(date)
================================================================================

================================================================================
1. VERIFICARE STRUCTURĂ FIȘIERE ȘI DIRECTOARE
================================================================================

Verificare existență fișiere cheie:
-rw-r--r--@ 1 marcodavid  staff  2261 Oct 15 01:11 README.md
-rw-r--r--@ 1 marcodavid  staff  145 Oct 15 01:11 go.mod
-rw-r--r--@ 1 marcodavid  staff  726 Oct 15 01:11 go.sum
-rw-r--r--@ 1 marcodavid  staff  783 Oct 15 01:40 Dockerfile.backend
-rw-r--r--@ 1 marcodavid  staff  316 Oct 15 01:11 Dockerfile.frontend
-rw-r--r--@ 1 marcodavid  staff  655 Oct 15 01:40 docker-compose.yml
-rw-r--r--@ 1 marcodavid  staff  32932 Oct 15 01:40 doc/api.yaml

Structură directoare:
drwxr-xr-x@  4 marcodavid  staff  128 Oct 15 01:11 .
drwxr-xr-x@ 22 marcodavid  staff  704 Oct 15 01:41 ..
drwxr-xr-x@  3 marcodavid  staff   96 Oct 15 01:11 healthcheck
drwxr-xr-x@  7 marcodavid  staff  224 Oct 15 01:39 webapi
drwxr-xr-x@  7 marcodavid  staff   224 Oct 15 01:11 .
drwxr-xr-x@ 22 marcodavid  staff   704 Oct 15 01:41 ..
drwxr-xr-x@  4 marcodavid  staff   128 Oct 15 01:11 api
drwxr-xr-x@  3 marcodavid  staff    96 Oct 15 01:11 globaltime
drwxr-xr-x@  3 marcodavid  staff    96 Oct 15 01:11 models
drwxr-xr-x@  3 marcodavid  staff    96 Oct 15 01:11 store
drwxr-xr-x@ 16 marcodavid  staff    512 Oct 15 01:39 .
drwxr-xr-x@ 22 marcodavid  staff    704 Oct 15 01:41 ..
drwxr-xr-x@  3 marcodavid  staff     96 Oct 15 01:11 .vscode
drwxr-xr-x@  5 marcodavid  staff    160 Oct 15 01:39 dist
drwxr-xr-x@ 61 marcodavid  staff   1952 Oct 15 01:39 node_modules
drwxr-xr-x@  3 marcodavid  staff     96 Oct 15 01:11 public
drwxr-xr-x@  7 marcodavid  staff    224 Oct 15 01:11 src

================================================================================
2. VERIFICARE SINTAXĂ GO
================================================================================

Verificare go mod tidy:
✅ go mod tidy: OK

Verificare compilare Go:
# new-wasa/cmd/webapi
ld: warning: -no_pie is deprecated when targeting new OS versions
ld: warning: -no_pie is deprecated when targeting new OS versions
ld: warning: non-standard -pagezero_size is deprecated when targeting macOS 13.0 or later
✅ Go build: OK

Verificare go vet:
✅ go vet: OK

Verificare go fmt:
⚠️  go fmt: Următoarele fișiere necesită formatare:
cmd/healthcheck/healthcheck.go
cmd/webapi/cors.go
cmd/webapi/main.go
cmd/webapi/register-webui.go
service/api/chat_handler.go
service/store/chat_store.go
vendor/github.com/mattn/go-sqlite3/callback.go
vendor/github.com/mattn/go-sqlite3/sqlite3_go18.go
vendor/github.com/mattn/go-sqlite3/sqlite3_libsqlite3.go
vendor/github.com/mattn/go-sqlite3/sqlite3_load_extension.go
vendor/github.com/mattn/go-sqlite3/sqlite3_load_extension_omit.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_allow_uri_authority.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_app_armor.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_column_metadata.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_foreign_keys.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_fts5.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_icu.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_introspect.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_math_functions.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_preupdate.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_preupdate_hook.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_preupdate_omit.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_secure_delete.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_secure_delete_fast.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_stat4.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_unlock_notify.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_userauth.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_userauth_omit.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_vacuum_full.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_vacuum_incr.go
vendor/github.com/mattn/go-sqlite3/sqlite3_opt_vtable.go
vendor/github.com/mattn/go-sqlite3/sqlite3_other.go
vendor/github.com/mattn/go-sqlite3/sqlite3_solaris.go
vendor/github.com/mattn/go-sqlite3/sqlite3_trace.go
vendor/github.com/mattn/go-sqlite3/sqlite3_usleep_windows.go
vendor/github.com/mattn/go-sqlite3/sqlite3_windows.go
vendor/github.com/mattn/go-sqlite3/static_mock.go
vendor/gopkg.in/yaml.v2/readerc.go
vendor/gopkg.in/yaml.v2/resolve.go
vendor/gopkg.in/yaml.v2/sorter.go

================================================================================
3. VERIFICARE FIȘIERE GO - ANALIZĂ DETALIATĂ
================================================================================

Verificare imports în fișierele Go:
Analizare: ./cmd/healthcheck/healthcheck.go
command-line-arguments: [fmt log net/http os time]
Analizare: ./cmd/webapi/cors.go
command-line-arguments: [github.com/julienschmidt/httprouter net/http strings]
Analizare: ./cmd/webapi/register-webui-stub.go
command-line-arguments: []
Analizare: ./cmd/webapi/load-configuration.go
command-line-arguments: [gopkg.in/yaml.v2 io/ioutil log os path/filepath]
Analizare: ./cmd/webapi/register-webui.go
cmd/webapi/register-webui.go:14:12: pattern ../../webui/dist: invalid pattern syntax
Analizare: ./cmd/webapi/main.go
command-line-arguments: [github.com/julienschmidt/httprouter log net/http new-wasa/service new-wasa/service/api new-wasa/service/store strings]
Analizare: ./service/chat_service.go
command-line-arguments: [fmt new-wasa/service/models]
Analizare: ./service/models/chat.go
command-line-arguments: [time]
Analizare: ./service/api/chat_handler.go
command-line-arguments: [encoding/json fmt io net/http new-wasa/service new-wasa/service/models strings]
Analizare: ./service/api/api.go
command-line-arguments: [new-wasa/service]
Analizare: ./service/globaltime/globaltime.go
command-line-arguments: [time]
Analizare: ./service/store/chat_store.go
command-line-arguments: [database/sql fmt github.com/mattn/go-sqlite3 new-wasa/service/models sync time]

Verificare funcții nefolosite (basic check):
go: downloading golang.org/x/tools v0.38.0
go run: golang.org/x/tools/cmd/deadcode@latest (in golang.org/x/tools@v0.38.0): go.mod:3: invalid go version '1.24.0': must match format 1.23
⚠️  deadcode tool nu e disponibil

================================================================================
4. VERIFICARE DOCKER FILES
================================================================================

Verificare sintaxă Dockerfile.backend:
❌ Dockerfile.backend: BUILD FAILED
ERROR: Cannot connect to the Docker daemon at unix:///Users/marcodavid/.docker/run/docker.sock. Is the docker daemon running?

Verificare sintaxă Dockerfile.frontend:
❌ Dockerfile.frontend: BUILD FAILED
ERROR: Cannot connect to the Docker daemon at unix:///Users/marcodavid/.docker/run/docker.sock. Is the docker daemon running?

Verificare docker-compose.yml sintaxă:
✅ docker-compose.yml: SINTAXĂ OK

================================================================================
5. VERIFICARE FRONTEND (VUE.JS)
================================================================================

Verificare package.json:
✅ package.json există
Dependencies:
  "dependencies": {
    "axios": "^1.10.0",
    "element-plus": "^2.10.2",
    "vue": "^3.5.17"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.0.0",
    "vite": "^5.0.0"
  }
}

Verificare node_modules:
✅ node_modules există

Verificare build frontend:
✅ Frontend build: OK

vite v5.4.20 building for production...
transforming...
✓ 1469 modules transformed.
rendering chunks...
computing gzip size...
dist/index.html                     0.46 kB │ gzip:   0.30 kB
dist/assets/index-CUHcOF4Y.css    346.94 kB │ gzip:  47.72 kB
dist/assets/index-B2eS-QKB.js   1,006.57 kB │ gzip: 331.02 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 2.46s

Verificare fișiere build generate:
total 16
drwxr-xr-x@ 4 marcodavid  staff   128B Oct 15 01:42 assets
-rw-r--r--@ 1 marcodavid  staff   455B Oct 15 01:42 index.html
-rw-r--r--@ 1 marcodavid  staff   1.5K Oct 15 01:42 vite.svg

================================================================================
6. VERIFICARE API OPENAPI (doc/api.yaml)
================================================================================

Instalare și rulare spectral pentru validare OpenAPI...
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-cli@6.15.0',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-core@1.20.0',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-formatters@1.5.0',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-parsers@1.0.5',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-ref-resolver@1.0.5',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-ruleset-bundler@1.6.3',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-ruleset-migrator@1.11.2',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-rulesets@1.22.0',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-runtime@1.1.4',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-formats@1.8.2',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@stoplight/spectral-functions@1.10.1',
npm WARN EBADENGINE   required: { node: '^16.20 || ^18.18 || >= 20.17' },
npm WARN EBADENGINE   current: { node: 'v20.11.1', npm: '10.2.4' }
npm WARN EBADENGINE }
npm WARN deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm WARN deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead
No ruleset has been found. Please provide a ruleset using the --ruleset CLI argument, or make sure your ruleset file matches .?spectral.(js|ya?ml|json)Verificare completă

================================================================================
7. VERIFICARE FIȘIERE CONFIGURARE
================================================================================

Verificare demo/config.yaml:
✅ demo/config.yaml există
# Demo configuration for WASAText messaging application
# This is a simplified version for the WASA course

server:
  port: 8080
  host: "0.0.0.0"

database:
  path: "/app/data/chat.db"
  driver: "sqlite3"

logging:
  level: "info"
  format: "text"

# Demo users for testing
demo_users:
  - name: "Alice"
    username: "alice"
  - name: "Bob"
    username: "bob"
  - name: "Charlie"
    username: "charlie"

# Demo conversations
demo_conversations:
  - name: "General Chat"
    type: "group"
    description: "Main discussion channel"
  - name: "Project Discussion"
    type: "group"
    description: "Project-related discussions"
  - name: "Direct Messages"
    type: "direct"
    description: "Private conversations"

Verificare webui/nginx.conf:
✅ webui/nginx.conf există
server {
    listen 80;
    server_name _;

    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # Optional: if serving API through same host (adjust if needed)
    location /session { proxy_pass http://host.docker.internal:8080; }
    location /user { proxy_pass http://host.docker.internal:8080; }
    location /conversations { proxy_pass http://host.docker.internal:8080; }
    location /messages { proxy_pass http://host.docker.internal:8080; }
    location /groups { proxy_pass http://host.docker.internal:8080; }
}

Verificare webui/nginx.compose.conf:
✅ webui/nginx.compose.conf există
server {
    listen 80;
    server_name _;

    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # Use backend service name for Docker Compose networking
    location /session { proxy_pass http://backend:8080; }
    location /user { proxy_pass http://backend:8080; }
    location /conversations { proxy_pass http://backend:8080; }
    location /messages { proxy_pass http://backend:8080; }
    location /groups { proxy_pass http://backend:8080; }
}

================================================================================
8. VERIFICARE ENDPOINT-URI API vs IMPLEMENTARE
================================================================================

Extragere endpoint-uri din api.yaml:
  /session:
      operationId: doLogin
  /user/username:
      operationId: setMyUserName
  /user/photo:
      operationId: setMyPhoto
  /conversations:
      operationId: getMyConversations
      operationId: createConversation
  /conversations/{id}:
      operationId: getConversation
  /messages:
      operationId: sendMessage
  /messages/{id}/forward:
      operationId: forwardMessage
  /messages/{id}/comment:
      operationId: commentMessage
  /messages/{id}/uncomment:
      operationId: uncommentMessage
  /messages/{id}:
      operationId: deleteMessage
  /groups/{id}/add:
      operationId: addToGroup
  /groups/{id}/leave:
      operationId: leaveGroup
  /groups/{id}/name:
      operationId: setGroupName
  /groups/{id}/photo:
      operationId: setGroupPhoto

Verificare implementare în main.go:
	router.POST("/session", corsWrapper(h.DoLogin))
	router.PUT("/user/username", protectedWrapper(h.SetMyUserName))
	router.POST("/conversations", protectedWrapper(h.CreateConversation))
	router.GET("/conversations", protectedWrapper(h.GetMyConversations))
	router.GET("/conversations/:id", protectedWrapper(h.GetConversation))
	router.POST("/messages", protectedWrapper(h.SendMessage))
	router.POST("/messages/:id/forward", protectedWrapper(h.ForwardMessage))
	router.POST("/messages/:id/comment", protectedWrapper(h.CommentMessage))
	router.POST("/messages/:id/uncomment", protectedWrapper(h.UncommentMessage))
	router.DELETE("/messages/:id", protectedWrapper(h.DeleteMessage))
	router.POST("/groups/:id/add", protectedWrapper(h.AddToGroup))
	router.POST("/groups/:id/leave", protectedWrapper(h.LeaveGroup))
	router.PUT("/groups/:id/name", protectedWrapper(h.SetGroupName))
	router.PUT("/user/photo", protectedWrapper(h.SetMyPhoto))
	router.PUT("/groups/:id/photo", protectedWrapper(h.SetGroupPhoto))

================================================================================
9. VERIFICARE HANDLER-E API - ANALIZĂ FUNCȚII
================================================================================

Handler-e definite în chat_handler.go:
  - DoLogin(w http.ResponseWriter, r *http.Request) {
  - SetMyUserName(w http.ResponseWriter, r *http.Request) {
  - GetMyConversations(w http.ResponseWriter, r *http.Request) {
  - GetConversation(w http.ResponseWriter, r *http.Request) {
  - CreateConversation(w http.ResponseWriter, r *http.Request) {
  - SendMessage(w http.ResponseWriter, r *http.Request) {
  - ForwardMessage(w http.ResponseWriter, r *http.Request) {
  - CommentMessage(w http.ResponseWriter, r *http.Request) {
  - UncommentMessage(w http.ResponseWriter, r *http.Request) {
  - DeleteMessage(w http.ResponseWriter, r *http.Request) {
  - AddToGroup(w http.ResponseWriter, r *http.Request) {
  - LeaveGroup(w http.ResponseWriter, r *http.Request) {
  - SetGroupName(w http.ResponseWriter, r *http.Request) {
  - SetMyPhoto(w http.ResponseWriter, r *http.Request) {
  - SetGroupPhoto(w http.ResponseWriter, r *http.Request) {

Handler-e folosite în main.go:
  - h.DoLogin))
  - h.SetMyUserName))
  - h.CreateConversation))
  - h.GetMyConversations))
  - h.GetConversation))
  - h.SendMessage))
  - h.ForwardMessage))
  - h.CommentMessage))
  - h.UncommentMessage))
  - h.DeleteMessage))
  - h.AddToGroup))
  - h.LeaveGroup))
  - h.SetGroupName))
  - h.SetMyPhoto))
  - h.SetGroupPhoto))

================================================================================
10. VERIFICARE DEPENDENȚE GO
================================================================================

Module Go folosite (go.mod):
module new-wasa

go 1.17

require (
	github.com/julienschmidt/httprouter v1.3.0
	github.com/mattn/go-sqlite3 v1.14.16
	gopkg.in/yaml.v2 v2.4.0
)

Verificare dependențe vulnerabile:
================================================================================
11. VERIFICARE CORS ȘI SECURITY
================================================================================

Configurare CORS în cors.go:
	AllowedOrigins []string
	AllowedMethods []string
	AllowedHeaders []string
	MaxAge         string
}

// DefaultCORSConfig returns a default CORS configuration
func DefaultCORSConfig() *CORSConfig {
--
		AllowedOrigins: []string{"*"},
		AllowedMethods: []string{"GET", "POST", "PUT", "DELETE", "OPTIONS"},
		AllowedHeaders: []string{"Content-Type", "Authorization", "X-Requested-With"},
		MaxAge:         "1",
	}
}

// CORSHandler creates a CORS middleware handler
--
			if origin == "" || isOriginAllowed(origin, config.AllowedOrigins) {
				w.Header().Set("Access-Control-Allow-Origin", origin)
			} else if len(config.AllowedOrigins) > 0 && config.AllowedOrigins[0] == "*" {
				w.Header().Set("Access-Control-Allow-Origin", "*")
			}

			w.Header().Set("Access-Control-Allow-Methods", strings.Join(config.AllowedMethods, ", "))
			w.Header().Set("Access-Control-Allow-Headers", strings.Join(config.AllowedHeaders, ", "))
			w.Header().Set("Access-Control-Max-Age", config.MaxAge)
			w.Header().Set("Access-Control-Allow-Credentials", "true")

			// Handle preflight requests
			if r.Method == "OPTIONS" {

Verificare autentificare în main.go:
	protectedWrapper := func(handler http.HandlerFunc) httprouter.Handle {
		return corsWrapper(func(w http.ResponseWriter, r *http.Request) {
			authHeader := r.Header.Get("Authorization")
			if authHeader == "" {
				http.Error(w, "Unauthorized", http.StatusUnauthorized)
				return
			}

			if !strings.HasPrefix(authHeader, "Bearer ") {
				http.Error(w, "Unauthorized", http.StatusUnauthorized)
				return

================================================================================
12. VERIFICARE BAZĂ DE DATE (SQLite)
================================================================================

Schema bază de date din chat_store.go:
		`CREATE TABLE IF NOT EXISTS users (
			id TEXT PRIMARY KEY,
		`CREATE TABLE IF NOT EXISTS tokens (
			token TEXT PRIMARY KEY,
			FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
		`CREATE TABLE IF NOT EXISTS conversations (
			id TEXT PRIMARY KEY,
		`CREATE TABLE IF NOT EXISTS messages (
			id TEXT PRIMARY KEY,
			FOREIGN KEY (conversation_id) REFERENCES conversations(id) ON DELETE CASCADE,
			FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE
		`CREATE TABLE IF NOT EXISTS comments (
			id TEXT PRIMARY KEY,
			FOREIGN KEY (message_id) REFERENCES messages(id) ON DELETE CASCADE,
			FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE
		`CREATE TABLE IF NOT EXISTS groups (
			id TEXT PRIMARY KEY,
		`CREATE TABLE IF NOT EXISTS group_members (
			PRIMARY KEY (group_id, user_id),
			FOREIGN KEY (group_id) REFERENCES conversations(id) ON DELETE CASCADE,
			FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE

Verificare path DB în config:
database:
  path: "/app/data/chat.db"
  driver: "sqlite3"

================================================================================
13. VERIFICARE FIȘIERE POTENȚIAL PROBLEMATICE
================================================================================

Verificare fișiere temporare sau backup:

Verificare fișiere mari (>10MB):

Verificare permisiuni fișiere executabile:
-rwxr-xr-x@ 1 marcodavid  staff   752B Oct 15 01:11 ./open-node.sh
-rwxr-xr-x@ 1 marcodavid  staff   5.9M Oct 15 01:11 ./healthcheck
-rwxr-xr-x@ 1 marcodavid  staff   1.1K Oct 15 01:39 ./webui/node_modules/@types/web-bluetooth/LICENSE
-rwxr-xr-x@ 1 marcodavid  staff   657B Oct 15 01:39 ./webui/node_modules/@types/web-bluetooth/README.md
-rwxr-xr-x@ 1 marcodavid  staff   1.2K Oct 15 01:39 ./webui/node_modules/@types/web-bluetooth/package.json
-rwxr-xr-x@ 1 marcodavid  staff   7.7K Oct 15 01:39 ./webui/node_modules/@types/web-bluetooth/index.d.ts
-rwxr-xr-x@ 1 marcodavid  staff   1.1K Oct 15 01:39 ./webui/node_modules/nanoid/bin/nanoid.cjs
-rwxr-xr-x@ 1 marcodavid  staff    16K Oct 15 01:39 ./webui/node_modules/element-plus/theme-chalk/el-table.css
-rwxr-xr-x@ 1 marcodavid  staff    14K Oct 15 01:39 ./webui/node_modules/element-plus/theme-chalk/src/table.scss
-rwxr-xr-x@ 1 marcodavid  staff   1.6K Oct 15 01:39 ./webui/node_modules/vite/bin/vite.js

================================================================================
14. VERIFICARE GIT REPOSITORY
================================================================================

Status Git:
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   Dockerfile.backend
	modified:   cmd/webapi/cors.go
	modified:   demo/config.yaml
	modified:   doc/api.yaml
	modified:   docker-compose.yml
	deleted:    webapi
	modified:   webui/nginx.compose.conf

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	verification.log

no changes added to commit (use "git add" and/or "git commit -a")

Verificare .gitignore:
✅ .gitignore există
# Go
/bin/
/build/
*.exe
*.exe~
*.dll
*.so
*.dylib
*.test
*.out

# Node
node_modules/
webui/node_modules/
webui/.vite/
webui/dist/
webui/.DS_Store

# OS
.DS_Store
Thumbs.db

# Editor/IDE
.vscode/
.idea/

# Vendoring caches (keep vendor/ tracked)
!.gitkeep

Fișiere care ar trebui ignorate dar sunt tracked:
chat.db
vendor/github.com/julienschmidt/httprouter/.travis.yml
vendor/github.com/julienschmidt/httprouter/LICENSE
vendor/github.com/julienschmidt/httprouter/README.md
vendor/github.com/julienschmidt/httprouter/path.go
vendor/github.com/julienschmidt/httprouter/router.go
vendor/github.com/julienschmidt/httprouter/tree.go
vendor/github.com/mattn/go-sqlite3/.codecov.yml
vendor/github.com/mattn/go-sqlite3/.gitignore
vendor/github.com/mattn/go-sqlite3/LICENSE

================================================================================
15. VERIFICARE README ȘI DOCUMENTAȚIE
================================================================================

✅ README.md există

Conținut README.md:
# WASAText

This repository follows the Fantastic Coffee (Decaffeinated) template structure while preserving this project's UI and functionality.

## Project structure

* `cmd/` contains all executables (e.g., `cmd/webapi`, `cmd/healthcheck`)
* `demo/` contains a demo config file
* `doc/` contains the OpenAPI file (`doc/api.yaml`)
* `service/` contains project-specific packages (`service/api`, `service/globaltime`, `service/models`, `service/store`)
* `vendor/` contains vendored dependencies
* `webui/` contains the Vue.js frontend built with Vite; includes code for release embedding
* Top-level: `.editorconfig`, `.gitignore`, `go.mod`, `go.sum`, `LICENSE`, `README.md`, `open-node.sh`

Template reference: https://github.com/sapienzaapps/fantastic-coffee-decaffeinated

## How to build

Backend only:
```bash
go build ./cmd/webapi/
```

With embedded WebUI:
```bash
./open-node.sh
# inside the container
yarn run build-embed
exit
# outside the container
go build -tags webui ./cmd/webapi/
```

## How to run (development)

Backend only:
```bash
go run ./cmd/webapi/
```

WebUI (dev server with proxy):
```bash
./open-node.sh
# inside the container
yarn run dev
```

Equivalent npm commands (if you prefer outside the container):
```bash
(cd webui && npm ci && npm run dev)

Verificare instrucțiuni de instalare în README:
## How to build
go build ./cmd/webapi/
yarn run build-embed
go build -tags webui ./cmd/webapi/
## How to run (development)
go run ./cmd/webapi/
yarn run dev
(cd webui && npm ci && npm run dev)
## How to build for production / delivery
yarn run build-prod

================================================================================
16. VERIFICARE CARACTERE SPECIALE ȘI ENCODING
================================================================================

Verificare fișiere cu BOM sau encoding problematic:
./webui/node_modules/lodash/_baseClone.js: CSV text
./webui/node_modules/lodash/_baseMergeDeep.js: CSV text
./webui/node_modules/lodash/template.js: CSV text

Verificare line endings (CRLF vs LF):
✅ Toate fișierele folosesc LF (Unix)

================================================================================
17. VERIFICARE TESTE
================================================================================

Căutare fișiere de test:

Rulare teste Go (dacă există):
?   	new-wasa/cmd/healthcheck	[no test files]
?   	new-wasa/cmd/webapi	[no test files]
?   	new-wasa/service	[no test files]
?   	new-wasa/service/api	[no test files]
?   	new-wasa/service/globaltime	[no test files]
?   	new-wasa/service/models	[no test files]
?   	new-wasa/service/store	[no test files]

================================================================================
18. ANALIZĂ FINALĂ - POTENȚIALE PROBLEME
================================================================================

Verificare TODO/FIXME/BUG în cod:
./webui/dist/assets/index-B2eS-QKB.js:*/const SU=function(e,t){if(e&&e.addEventListener){const n=function(o){const l=CU(o);t&&Reflect.apply(t,this,[o,l])};e.addEventListener("wheel",n,{passive:!0})}},kU={beforeMount(e,t){SU(e,t.value)}};let EU=1;const _U=Y({name:"ElTable",directives:{Mousewheel:kU},components:{TableHeader:Q7,TableBody:sU,TableFooter:cU,ElScrollbar:qo,hColgroup:w2},props:vU,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(e){const{t}=wt(),n=ge("table"),o=it();ht(nl,o);const l=K7(o,e);o.store=l;const a=new j7({store:o.store,table:o,fit:e.fit,showHeader:e.showHeader});o.layout=a;const r=S(()=>(l.states.data.value||[]).length===0),{setCurrentRow:i,getSelectionRows:u,toggleRowSelection:c,clearSelection:d,clearFilter:f,toggleAllSelection:h,toggleRowExpansion:p,clearSort:m,sort:v,updateKeyChildren:g}=dU(l),{isHidden:b,renderExpanded:C,setDragVisible:y,isGroup:w,handleMouseLeave:E,handleHeaderFooterMousewheel:k,tableSize:T,emptyBlockStyle:R,resizeProxyVisible:I,bodyWidth:O,resizeState:M,doLayout:P,tableBodyStyles:W,tableLayout:V,scrollbarViewStyle:q,scrollbarStyle:x}=fU(e,a,l,o),{scrollBarRef:L,scrollTo:N,setScrollLeft:D,setScrollTop:z}=hU(),H=io(P,50),K=`${n.namespace.value}-table_${EU++}`;o.tableId=K,o.state={isGroup:w,resizeState:M,doLayout:P,debouncedUpdateLayout:H};const G=S(()=>{var ue;return(ue=e.sumText)!=null?ue:t("el.table.sumText")}),Q=S(()=>{var ue;return(ue=e.emptyText)!=null?ue:t("el.table.emptyText")}),re=S(()=>y2(l.states.originColumns.value)[0]);return pU(o),Nt(()=>{H.cancel()}),{ns:n,layout:a,store:l,columns:re,handleHeaderFooterMousewheel:k,handleMouseLeave:E,tableId:K,tableSize:T,isHidden:b,isEmpty:r,renderExpanded:C,resizeProxyVisible:I,resizeState:M,isGroup:w,bodyWidth:O,tableBodyStyles:W,emptyBlockStyle:R,debouncedUpdateLayout:H,setCurrentRow:i,getSelectionRows:u,toggleRowSelection:c,clearSelection:d,clearFilter:f,toggleAllSelection:h,toggleRowExpansion:p,clearSort:m,doLayout:P,sort:v,updateKeyChildren:g,t,setDragVisible:y,context:o,computedSumText:G,computedEmptyText:Q,tableLayout:V,scrollbarViewStyle:q,scrollbarStyle:x,scrollBarRef:L,scrollTo:N,setScrollLeft:D,setScrollTop:z,allowDragLastColumn:e.allowDragLastColumn}}});function TU(e,t,n,o,l,a){const r=St("hColgroup"),i=St("table-header"),u=St("table-body"),c=St("table-footer"),d=St("el-scrollbar"),f=sd("mousewheel");return _(),F("div",{ref:"tableWrapper",class:$([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:We(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:e.handleMouseLeave},[B("div",{class:$(e.ns.e("inner-wrapper"))},[B("div",{ref:"hiddenColumns",class:"hidden-columns"},[oe(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?Xe((_(),F("div",{key:0,ref:"headerWrapper",class:$(e.ns.e("header-wrapper"))},[B("table",{ref:"tableHeader",class:$(e.ns.e("header")),style:We(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[J(r,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),J(i,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,"allow-drag-last-column":e.allowDragLastColumn,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","allow-drag-last-column","onSetDragVisible"])],6)],2)),[[f,e.handleHeaderFooterMousewheel]]):ae("v-if",!0),B("div",{ref:"bodyWrapper",class:$(e.ns.e("body-wrapper"))},[J(d,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn,tabindex:e.scrollbarTabindex,native:e.nativeScrollbar,onScroll:h=>e.$emit("scroll",h)},{default:ee(()=>[B("table",{ref:"tableBody",class:$(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:We({width:e.bodyWidth,tableLayout:e.tableLayout})},[J(r,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(_(),ie(i,{key:0,ref:"tableHeaderRef",class:$(e.ns.e("body-header")),border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,onSetDragVisible:e.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):ae("v-if",!0),J(u,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),e.showSummary&&e.tableLayout==="auto"?(_(),ie(c,{key:1,class:$(e.ns.e("body-footer")),border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):ae("v-if",!0)],6),e.isEmpty?(_(),F("div",{key:0,ref:"emptyBlock",style:We(e.emptyBlockStyle),class:$(e.ns.e("empty-block"))},[B("span",{class:$(e.ns.e("empty-text"))},[oe(e.$slots,"empty",{},()=>[gt(we(e.computedEmptyText),1)])],2)],6)):ae("v-if",!0),e.$slots.append?(_(),F("div",{key:1,ref:"appendWrapper",class:$(e.ns.e("append-wrapper"))},[oe(e.$slots,"append")],2)):ae("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","native","onScroll"])],2),e.showSummary&&e.tableLayout==="fixed"?Xe((_(),F("div",{key:1,ref:"footerWrapper",class:$(e.ns.e("footer-wrapper"))},[B("table",{class:$(e.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:We(e.tableBodyStyles)},[J(r,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),J(c,{border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Et,!e.isEmpty],[f,e.handleHeaderFooterMousewheel]]):ae("v-if",!0),e.border||e.isGroup?(_(),F("div",{key:2,class:$(e.ns.e("border-left-patch"))},null,2)):ae("v-if",!0)],2),Xe(B("div",{ref:"resizeProxy",class:$(e.ns.e("column-resize-proxy"))},null,2),[[Et,e.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var $U=Ee(_U,[["render",TU],["__file","table.vue"]]);const OU={selection:"table-column--selection",expand:"table__expand-column"},NU={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},IU=e=>OU[e]||"",MU={selection:{renderHeader({store:e,column:t}){var n;function o(){return e.states.data.value&&e.states.data.value.length===0}return qe(xo,{disabled:o(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":(n=e.toggleAllSelection)!=null?n:void 0,modelValue:e.states.isAllSelected.value,ariaLabel:t.label})},renderCell({row:e,column:t,store:n,$index:o}){return qe(xo,{disabled:t.selectable?!t.selectable.call(null,e,o):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",e)},onClick:l=>l.stopPropagation(),modelValue:n.isSelected(e),ariaLabel:t.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let n=t+1;const o=e.index;return je(o)?n=t+o:Ke(o)&&(n=o(t)),qe("div",{},[n])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({column:e,row:t,store:n,expanded:o}){const{ns:l}=n,a=[l.e("expand-icon")];return!e.renderExpand&&o&&a.push(l.em("expand-icon","expanded")),qe("div",{class:a,onClick:function(i){i.stopPropagation(),n.toggleRowExpansion(t)}},{default:()=>e.renderExpand?[e.renderExpand({expanded:o})]:[qe(Be,null,{default:()=>[qe(Hn)]})]})},sortable:!1,resizable:!1}};function PU({row:e,column:t,$index:n}){var o;const l=t.property,a=l&&ni(e,l).value;return t&&t.formatter?t.formatter(e,t,a,n):((o=a==null?void 0:a.toString)==null?void 0:o.call(a))||""}function RU({row:e,treeNode:t,store:n},o=!1){const{ns:l}=n;if(!t)return o?[qe("span",{class:l.e("placeholder")})]:null;const a=[],r=function(i){i.stopPropagation(),!t.loading&&n.loadOrToggle(e)};if(t.indent&&a.push(qe("span",{class:l.e("indent"),style:{"padding-left":`${t.indent}px`}})),xt(t.expanded)&&!t.noLazyChildren){const i=[l.e("expand-icon"),t.expanded?l.em("expand-icon","expanded"):""];let u=Hn;t.loading&&(u=hl),a.push(qe("div",{class:i,onClick:r},{default:()=>[qe(Be,{class:{[l.is("loading")]:t.loading}},{default:()=>[qe(u)]})]}))}else a.push(qe("span",{class:l.e("placeholder")}));return a}function Ky(e,t){return e.reduce((n,o)=>(n[o]=o,n),t)}function xU(e,t){const n=it();return{registerComplexWatchers:()=>{const a=["fixed"],r={realWidth:"width",realMinWidth:"minWidth"},i=Ky(a,r);Object.keys(i).forEach(u=>{const c=r[u];$t(t,c)&&pe(()=>t[c],d=>{let f=d;c==="width"&&u==="realWidth"&&(f=Gh(d)),c==="minWidth"&&u==="realMinWidth"&&(f=p2(d)),n.columnConfig.value[c]=f,n.columnConfig.value[u]=f;const h=c==="fixed";e.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const a=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip","tooltipFormatter"],r=["showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},u=Ky(a,i);Object.keys(u).forEach(c=>{const d=i[c];$t(t,d)&&pe(()=>t[d],f=>{n.columnConfig.value[c]=f})}),r.forEach(c=>{$t(e.value.props,c)&&pe(()=>e.value.props[c],d=>{n.columnConfig.value[c]=d})})}}}function AU(e,t,n){const o=it(),l=A(""),a=A(!1),r=A(),i=A(),u=ge("table");Vn(()=>{r.value=e.align?`is-${e.align}`:null,r.value}),Vn(()=>{i.value=e.headerAlign?`is-${e.headerAlign}`:r.value,i.value});const c=S(()=>{let w=o.vnode.vParent||o.parent;for(;w&&!w.tableId&&!w.columnId;)w=w.vnode.vParent||w.parent;return w}),d=S(()=>{const{store:w}=o.parent;if(!w)return!1;const{treeData:E}=w.states,k=E.value;return k&&Object.keys(k).length>0}),f=A(Gh(e.width)),h=A(p2(e.minWidth)),p=w=>(f.value&&(w.width=f.value),h.value&&(w.minWidth=h.value),!f.value&&h.value&&(w.width=void 0),w.minWidth||(w.minWidth=80),w.realWidth=Number(bt(w.width)?w.minWidth:w.width),w),m=w=>{const E=w.type,k=MU[E]||{};Object.keys(k).forEach(R=>{const I=k[R];R!=="className"&&!bt(I)&&(w[R]=I)});const T=IU(E);if(T){const R=`${s(u.namespace)}-${T}`;w.className=w.className?`${w.className} ${R}`:R}return w},v=w=>{be(w)?w.forEach(k=>E(k)):E(w);function E(k){var T;((T=k==null?void 0:k.type)==null?void 0:T.name)==="ElTableColumn"&&(k.vParent=o)}};return{columnId:l,realAlign:r,isSubColumn:a,realHeaderAlign:i,columnOrTableParent:c,setColumnWidth:p,setColumnForcedProps:m,setColumnRenders:w=>{e.renderHeader||w.type!=="selection"&&(w.renderHeader=k=>(o.columnConfig.value.label,oe(t,"header",k,()=>[w.label]))),t["filter-icon"]&&(w.renderFilterIcon=k=>oe(t,"filter-icon",k)),t.expand&&(w.renderExpand=k=>oe(t,"expand",k));let E=w.renderCell;return w.type==="expand"?(w.renderCell=k=>qe("div",{class:"cell"},[E(k)]),n.value.renderExpanded=k=>t.default?t.default(k):t.default):(E=E||PU,w.renderCell=k=>{let T=null;if(t.default){const W=t.default(k);T=W.some(V=>V.type!==ln)?W:E(k)}else T=E(k);const{columns:R}=n.value.store.states,I=R.value.findIndex(W=>W.type==="default"),O=d.value&&k.cellIndex===I,M=RU(k,O),P={class:"cell",style:{}};return w.showOverflowTooltip&&(P.class=`${P.class} ${s(u.namespace)}-tooltip`,P.style={width:`${(k.column.realWidth||Number(k.column.width))-1}px`}),v(T),qe("div",P,[M,T])}),w},getPropsData:(...w)=>w.reduce((E,k)=>(be(k)&&k.forEach(T=>{E[T]=e[T]}),E),{}),getColumnElIndex:(w,E)=>Array.prototype.indexOf.call(w,E),updateColumnOrder:()=>{n.value.store.commit("updateColumnOrder",o.columnConfig.value)}}}var LU={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},tooltipFormatter:Function,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].includes(t))}};let DU=1;var O2=Y({name:"ElTableColumn",components:{ElCheckbox:xo},props:LU,setup(e,{slots:t}){const n=it(),o=A({}),l=S(()=>{let y=n.parent;for(;y&&!y.tableId;)y=y.parent;return y}),{registerNormalWatchers:a,registerComplexWatchers:r}=xU(l,e),{columnId:i,isSubColumn:u,realHeaderAlign:c,columnOrTableParent:d,setColumnWidth:f,setColumnForcedProps:h,setColumnRenders:p,getPropsData:m,getColumnElIndex:v,realAlign:g,updateColumnOrder:b}=AU(e,t,l),C=d.value;i.value=`${"tableId"in C&&C.tableId||"columnId"in C&&C.columnId}_column_${DU++}`,rd(()=>{u.value=l.value!==C;const y=e.type||"default",w=e.sortable===""?!0:e.sortable,E=y==="selection"?!1:bt(e.showOverflowTooltip)?C.props.showOverflowTooltip:e.showOverflowTooltip,k=bt(e.tooltipFormatter)?C.props.tooltipFormatter:e.tooltipFormatter,T={...NU[y],id:i.value,type:y,property:e.prop||e.property,align:g,headerAlign:c,showOverflowTooltip:E,tooltipFormatter:k,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:w,index:e.index,rawColumnKey:n.vnode.key};let P=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);P=M7(T,P),P=R7(p,f,h)(P),o.value=P,a(),r()}),at(()=>{var y,w;const E=d.value,k=u.value?(y=E.vnode.el)==null?void 0:y.children:(w=E.refs.hiddenColumns)==null?void 0:w.children,T=()=>v(k||[],n.vnode.el);o.value.getColumnIndex=T,T()>-1&&l.value.store.commit("insertColumn",o.value,u.value?"columnConfig"in E&&E.columnConfig.value:null,b)}),Nt(()=>{const y=o.value.getColumnIndex;(y?y():-1)>-1&&l.value.store.commit("removeColumn",o.value,u.value?"columnConfig"in C&&C.columnConfig.value:null,b)}),n.columnId=i.value,n.columnConfig=o},render(){var e,t,n;try{const o=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1}),l=[];if(be(o))for(const r of o)((n=r.type)==null?void 0:n.name)==="ElTableColumn"||r.shapeFlag&2?l.push(r):r.type===ze&&be(r.children)&&r.children.forEach(i=>{(i==null?void 0:i.patchFlag)!==1024&&!Fe(i==null?void 0:i.children)&&l.push(i)});return qe("div",l)}catch{return qe("div",[])}}});const BU=Qe($U,{TableColumn:O2}),FU=Xt(O2);var Ri=(e=>(e.ASC="asc",e.DESC="desc",e))(Ri||{}),xi=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))(xi||{}),N2=(e=>(e.LEFT="left",e.RIGHT="right",e))(N2||{});const Kp={asc:"desc",desc:"asc"},Ai=Symbol("placeholder"),VU=(e,t,n)=>{var o;const l={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};n||(l.flexShrink=1);const a={...(o=e.style)!=null?o:{},...l,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(a.maxWidth=e.maxWidth),e.minWidth&&(a.minWidth=e.minWidth)),a};function zU(e,t,n){const o=S(()=>s(t).map((g,b)=>{var C,y;return{...g,key:(y=(C=g.key)!=null?C:g.dataKey)!=null?y:b}})),l=S(()=>s(o).filter(g=>!g.hidden)),a=S(()=>s(l).filter(g=>g.fixed==="left"||g.fixed===!0)),r=S(()=>s(l).filter(g=>g.fixed==="right")),i=S(()=>s(l).filter(g=>!g.fixed)),u=S(()=>{const g=[];return s(a).forEach(b=>{g.push({...b,placeholderSign:Ai})}),s(i).forEach(b=>{g.push(b)}),s(r).forEach(b=>{g.push({...b,placeholderSign:Ai})}),g}),c=S(()=>s(a).length||s(r).length),d=S(()=>s(o).reduce((g,b)=>(g[b.key]=VU(b,s(n),e.fixed),g),{})),f=S(()=>s(l).reduce((g,b)=>g+b.width,0)),h=g=>s(o).find(b=>b.key===g),p=g=>s(d)[g],m=(g,b)=>{g.width=b};function v(g){var b;const{key:C}=g.currentTarget.dataset;if(!C)return;const{sortState:y,sortBy:w}=e;let E=Ri.ASC;nt(y)?E=Kp[y[C]]:E=Kp[w.order],(b=e.onColumnSort)==null||b.call(e,{column:h(C),key:C,order:E})}return{columns:o,columnsStyles:d,columnsTotalWidth:f,fixedColumnsOnLeft:a,fixedColumnsOnRight:r,hasFixedColumns:c,mainColumns:u,normalColumns:i,visibleColumns:l,getColumn:h,getColumnStyle:p,updateColumnWidth:m,onColumnSorted:v}}const HU=(e,{mainTableRef:t,leftTableRef:n,rightTableRef:o,onMaybeEndReached:l})=>{const a=A({scrollLeft:0,scrollTop:0});function r(p){var m,v,g;const{scrollTop:b}=p;(m=t.value)==null||m.scrollTo(p),(v=n.value)==null||v.scrollToTop(b),(g=o.value)==null||g.scrollToTop(b)}function i(p){a.value=p,r(p)}function u(p){a.value.scrollTop=p,r(s(a))}function c(p){var m,v;a.value.scrollLeft=p,(v=(m=t.value)==null?void 0:m.scrollTo)==null||v.call(m,s(a))}function d(p){var m;i(p),(m=e.onScroll)==null||m.call(e,p)}function f({scrollTop:p}){const{scrollTop:m}=s(a);p!==m&&u(p)}function h(p,m="auto"){var v;(v=t.value)==null||v.scrollToRow(p,m)}return pe(()=>s(a).scrollTop,(p,m)=>{p>m&&l()}),{scrollPos:a,scrollTo:i,scrollToLeft:c,scrollToTop:u,scrollToRow:h,onScroll:d,onVerticalScroll:f}},KU=(e,{mainTableRef:t,leftTableRef:n,rightTableRef:o,tableInstance:l,ns:a,isScrolling:r})=>{const i=it(),{emit:u}=i,c=jt(!1),d=A(e.defaultExpandedRowKeys||[]),f=A(-1),h=jt(null),p=A({}),m=A({}),v=jt({}),g=jt({}),b=jt({}),C=S(()=>je(e.estimatedRowHeight));function y(O){var M;(M=e.onRowsRendered)==null||M.call(e,O),O.rowCacheEnd>s(f)&&(f.value=O.rowCacheEnd)}function w({hovered:O,rowKey:M}){if(r.value)return;l.vnode.el.querySelectorAll(`[rowkey="${String(M)}"]`).forEach(V=>{O?V.classList.add(a.is("hovered")):V.classList.remove(a.is("hovered"))})}function E({expanded:O,rowData:M,rowIndex:P,rowKey:W}){var V,q;const x=[...s(d)],L=x.indexOf(W);O?L===-1&&x.push(W):L>-1&&x.splice(L,1),d.value=x,u("update:expandedRowKeys",x),(V=e.onRowExpand)==null||V.call(e,{expanded:O,rowData:M,rowIndex:P,rowKey:W}),(q=e.onExpandedRowsChange)==null||q.call(e,x),l.vnode.el.querySelector(`.${a.is("hovered")}[rowkey="${String(W)}"]`)&&Ae(()=>w({hovered:!0,rowKey:W}))}const k=io(()=>{var O,M,P,W;c.value=!0,p.value={...s(p),...s(m)},T(s(h),!1),m.value={},h.value=null,(O=t.value)==null||O.forceUpdate(),(M=n.value)==null||M.forceUpdate(),(P=o.value)==null||P.forceUpdate(),(W=i.proxy)==null||W.$forceUpdate(),c.value=!1},0);function T(O,M=!1){s(C)&&[t,n,o].forEach(P=>{const W=s(P);W&&W.resetAfterRowIndex(O,M)})}function R(O,M,P){const W=s(h);(W===null||W>P)&&(h.value=P),m.value[O]=M}function I({rowKey:O,height:M,rowIndex:P},W){W?W===N2.RIGHT?b.value[O]=M:v.value[O]=M:g.value[O]=M;const V=Math.max(...[v,b,g].map(q=>q.value[O]||0));s(p)[O]!==V&&(R(O,V,P),k())}return{expandedRowKeys:d,lastRenderedRowIndex:f,isDynamic:C,isResetting:c,rowHeights:p,resetAfterIndex:T,onRowExpanded:E,onRowHovered:w,onRowsRendered:y,onRowHeightChange:I}},WU=(e,{expandedRowKeys:t,lastRenderedRowIndex:n,resetAfterIndex:o})=>{const l=A({}),a=S(()=>{const i={},{data:u,rowKey:c}=e,d=s(t);if(!d||!d.length)return u;const f=[],h=new Set;d.forEach(m=>h.add(m));let p=u.slice();for(p.forEach(m=>i[m[c]]=0);p.length>0;){const m=p.shift();f.push(m),h.has(m[c])&&be(m.children)&&m.children.length>0&&(p=[...m.children,...p],m.children.forEach(v=>i[v[c]]=i[m[c]]+1))}return l.value=i,f}),r=S(()=>{const{data:i,expandColumnKey:u}=e;return u?s(a):i});return pe(r,(i,u)=>{i!==u&&(n.value=-1,o(0,!0))}),{data:r,depthMap:l}},jU=(e,t)=>e+t,rc=e=>be(e)?e.reduce(jU,0):e,ar=(e,t,n={})=>Ke(e)?e(t):e??n,da=e=>(["width","maxWidth","minWidth","height"].forEach(t=>{e[t]=Qt(e[t])}),e),I2=e=>Ht(e)?t=>qe(e,t):e,UU=(e,{columnsTotalWidth:t,rowsHeight:n,fixedColumnsOnLeft:o,fixedColumnsOnRight:l})=>{const a=S(()=>{const{fixed:b,width:C,vScrollbarSize:y}=e,w=C-y;return b?Math.max(Math.round(s(t)),w):w}),r=S(()=>{const{height:b=0,maxHeight:C=0,footerHeight:y,hScrollbarSize:w}=e;if(C>0){const E=s(h),k=s(n),R=s(f)+E+k+w;return Math.min(R,C-y)}return b-y}),i=S(()=>{const{maxHeight:b}=e,C=s(r);if(je(b)&&b>0)return C;const y=s(n)+s(f)+s(h);return Math.min(C,y)}),u=b=>b.width,c=S(()=>rc(s(o).map(u))),d=S(()=>rc(s(l).map(u))),f=S(()=>rc(e.headerHeight)),h=S(()=>{var b;return(((b=e.fixedData)==null?void 0:b.length)||0)*e.rowHeight}),p=S(()=>s(r)-s(f)-s(h)),m=S(()=>{const{style:b={},height:C,width:y}=e;return da({...b,height:C,width:y})}),v=S(()=>da({height:e.footerHeight})),g=S(()=>({top:Qt(s(f)),bottom:Qt(e.footerHeight),width:Qt(e.width)}));return{bodyWidth:a,fixedTableHeight:i,mainTableHeight:r,leftTableWidth:c,rightTableWidth:d,windowHeight:p,footerHeight:v,emptyStyle:g,rootStyle:m,headerHeight:f}};function qU(e){const t=A(),n=A(),o=A(),{columns:l,columnsStyles:a,columnsTotalWidth:r,fixedColumnsOnLeft:i,fixedColumnsOnRight:u,hasFixedColumns:c,mainColumns:d,onColumnSorted:f}=zU(e,Ot(e,"columns"),Ot(e,"fixed")),{scrollTo:h,scrollToLeft:p,scrollToTop:m,scrollToRow:v,onScroll:g,onVerticalScroll:b,scrollPos:C}=HU(e,{mainTableRef:t,leftTableRef:n,rightTableRef:o,onMaybeEndReached:le}),y=ge("table-v2"),w=it(),E=jt(!1),{expandedRowKeys:k,lastRenderedRowIndex:T,isDynamic:R,isResetting:I,rowHeights:O,resetAfterIndex:M,onRowExpanded:P,onRowHeightChange:W,onRowHovered:V,onRowsRendered:q}=KU(e,{mainTableRef:t,leftTableRef:n,rightTableRef:o,tableInstance:w,ns:y,isScrolling:E}),{data:x,depthMap:L}=WU(e,{expandedRowKeys:k,lastRenderedRowIndex:T,resetAfterIndex:M}),N=S(()=>{const{estimatedRowHeight:de,rowHeight:ce}=e,Se=s(x);return je(de)?Object.values(s(O)).reduce((fe,ve)=>fe+ve,0):Se.length*ce}),{bodyWidth:D,fixedTableHeight:z,mainTableHeight:H,leftTableWidth:K,rightTableWidth:G,windowHeight:Q,footerHeight:re,emptyStyle:ue,rootStyle:se,headerHeight:U}=UU(e,{columnsTotalWidth:r,fixedColumnsOnLeft:i,fixedColumnsOnRight:u,rowsHeight:N}),ne=A(),Te=S(()=>{const de=s(x).length===0;return be(e.fixedData)?e.fixedData.length===0&&de:de});function te(de){const{estimatedRowHeight:ce,rowHeight:Se,rowKey:fe}=e;return ce?s(O)[s(x)[de][fe]]||ce:Se}const j=A(!1);function le(){const{onEndReached:de}=e;if(!de)return;const{scrollTop:ce}=s(C),Se=s(N),fe=s(Q),ve=Se-(ce+fe)+e.hScrollbarSize;!j.value&&s(T)>=0&&Se<=ce+s(H)-s(U)?(j.value=!0,de(ve)):j.value=!1}return pe(()=>s(N),()=>j.value=!1),pe(()=>e.expandedRowKeys,de=>k.value=de,{deep:!0}),{columns:l,containerRef:ne,mainTableRef:t,leftTableRef:n,rightTableRef:o,isDynamic:R,isResetting:I,isScrolling:E,hasFixedColumns:c,columnsStyles:a,columnsTotalWidth:r,data:x,expandedRowKeys:k,depthMap:L,fixedColumnsOnLeft:i,fixedColumnsOnRight:u,mainColumns:d,bodyWidth:D,emptyStyle:ue,rootStyle:se,footerHeight:re,mainTableHeight:H,fixedTableHeight:z,leftTableWidth:K,rightTableWidth:G,showEmpty:Te,getRowHeight:te,onColumnSorted:f,onRowHovered:V,onRowExpanded:P,onRowsRendered:q,onRowHeightChange:W,scrollTo:h,scrollToLeft:p,scrollToTop:m,scrollToRow:v,onScroll:g,onVerticalScroll:b}}const em=Symbol("tableV2"),M2="tableV2GridScrollLeft",P2=String,uu={type:Z(Array),required:!0},tm={type:Z(Array)},R2={...tm,required:!0},YU=String,Wy={type:Z(Array),default:()=>Gt([])},Ba={type:Number,required:!0},x2={type:Z([String,Number,Symbol]),default:"id"},jy={type:Z(Object)},Ka=Ce({class:String,columns:uu,columnsStyles:{type:Z(Object),required:!0},depth:Number,expandColumnKey:YU,estimatedRowHeight:{...Ga.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Z(Function)},onRowHover:{type:Z(Function)},onRowHeightChange:{type:Z(Function)},rowData:{type:Z(Object),required:!0},rowEventHandlers:{type:Z(Object)},rowIndex:{type:Number,required:!0},rowKey:x2,style:{type:Z(Object)}}),Nf={type:Number,required:!0},nm=Ce({class:String,columns:uu,fixedHeaderData:{type:Z(Array)},headerData:{type:Z(Array),required:!0},headerHeight:{type:Z([Number,Array]),default:50},rowWidth:Nf,rowHeight:{type:Number,default:50},height:Nf,width:Nf}),sc=Ce({columns:uu,data:R2,fixedData:tm,estimatedRowHeight:Ka.estimatedRowHeight,width:Ba,height:Ba,headerWidth:Ba,headerHeight:nm.headerHeight,bodyWidth:Ba,rowHeight:Ba,cache:Qk.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Ga.scrollbarAlwaysOn,scrollbarStartGap:Ga.scrollbarStartGap,scrollbarEndGap:Ga.scrollbarEndGap,class:P2,style:jy,containerStyle:jy,getRowHeight:{type:Z(Function),required:!0},rowKey:Ka.rowKey,onRowsRendered:{type:Z(Function)},onScroll:{type:Z(Function)}}),GU=Ce({cache:sc.cache,estimatedRowHeight:Ka.estimatedRowHeight,rowKey:x2,headerClass:{type:Z([String,Function])},headerProps:{type:Z([Object,Function])},headerCellProps:{type:Z([Object,Function])},headerHeight:nm.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Z([String,Function])},rowProps:{type:Z([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Z([Object,Function])},columns:uu,data:R2,dataGetter:{type:Z(Function)},fixedData:tm,expandColumnKey:Ka.expandColumnKey,expandedRowKeys:Wy,defaultExpandedRowKeys:Wy,class:P2,fixed:Boolean,style:{type:Z(Object)},width:Ba,height:Ba,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Ga.hScrollbarSize,vScrollbarSize:Ga.vScrollbarSize,scrollbarAlwaysOn:n2.alwaysOn,sortBy:{type:Z(Object),default:()=>({})},sortState:{type:Z(Object),default:void 0},onColumnSort:{type:Z(Function)},onExpandedRowsChange:{type:Z(Function)},onEndReached:{type:Z(Function)},onRowExpand:Ka.onRowExpand,onScroll:sc.onScroll,onRowsRendered:sc.onRowsRendered,rowEventHandlers:Ka.rowEventHandlers}),XU="ElTableV2Header",JU=Y({name:XU,props:nm,setup(e,{slots:t,expose:n}){const o=ge("table-v2"),l=Re(M2),a=A(),r=S(()=>da({width:e.width,height:e.height})),i=S(()=>da({width:e.rowWidth,height:e.height})),u=S(()=>bn(s(e.headerHeight))),c=h=>{const p=s(a);Ae(()=>{p!=null&&p.scroll&&p.scroll({left:h})})},d=()=>{const h=o.e("fixed-header-row"),{columns:p,fixedHeaderData:m,rowHeight:v}=e;return m==null?void 0:m.map((g,b)=>{var C;const y=da({height:v,width:"100%"});return(C=t.fixed)==null?void 0:C.call(t,{class:h,columns:p,rowData:g,rowIndex:-(b+1),style:y})})},f=()=>{const h=o.e("dynamic-header-row"),{columns:p}=e;return s(u).map((m,v)=>{var g;const b=da({width:"100%",height:m});return(g=t.dynamic)==null?void 0:g.call(t,{class:h,columns:p,headerIndex:v,style:b})})};return Jo(()=>{l!=null&&l.value&&c(l.value)}),n({scrollToLeft:c}),()=>{if(!(e.height<=0))return J("div",{ref:a,class:e.class,style:s(r),role:"rowgroup"},[J("div",{style:s(i),class:o.e("header")},[f(),d()])])}}});var ZU=JU;const QU=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:n,atYStartEdge:o},l)=>{let a=null,r=0,i=0;const u=(d,f)=>{const h=d<=0&&t.value||d>=0&&e.value,p=f<=0&&o.value||f>=0&&n.value;return h&&p};return{hasReachedEdge:u,onWheel:d=>{or(a);let f=d.deltaX,h=d.deltaY;Math.abs(f)>Math.abs(h)?h=0:f=0,d.shiftKey&&h!==0&&(f=h,h=0),!(u(r,i)&&u(r+f,i+h))&&(r+=f,i+=h,d.preventDefault(),a=Sa(()=>{l(r,i),r=0,i=0}))}}},A2=({name:e,clearCache:t,getColumnPosition:n,getColumnStartIndexForOffset:o,getColumnStopIndexForStartIndex:l,getEstimatedTotalHeight:a,getEstimatedTotalWidth:r,getColumnOffset:i,getRowOffset:u,getRowPosition:c,getRowStartIndexForOffset:d,getRowStopIndexForStartIndex:f,initCache:h,injectToInstance:p,validateProps:m})=>Y({name:e??"ElVirtualList",props:Ga,emits:[Bc,Fc],setup(v,{emit:g,expose:b,slots:C}){const y=ge("vl");m(v);const w=it(),E=A(h(v,w));p==null||p(w,E);const k=A(),T=A(),R=A(),I=A(null),O=A({isScrolling:!1,scrollLeft:je(v.initScrollLeft)?v.initScrollLeft:0,scrollTop:je(v.initScrollTop)?v.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Pr,yAxisScrollDir:Pr}),M=Gk(),P=S(()=>Number.parseInt(`${v.height}`,10)),W=S(()=>Number.parseInt(`${v.width}`,10)),V=S(()=>{const{totalColumn:fe,totalRow:ve,columnCache:ke}=v,{isScrolling:$e,xAxisScrollDir:_e,scrollLeft:Ve}=s(O);if(fe===0||ve===0)return[0,0,0,0];const xe=o(v,Ve,s(E)),he=l(v,xe,Ve,s(E)),Le=!$e||_e===Vc?Math.max(1,ke):1,tt=!$e||_e===Pr?Math.max(1,ke):1;return[Math.max(0,xe-Le),Math.max(0,Math.min(fe-1,he+tt)),xe,he]}),q=S(()=>{const{totalColumn:fe,totalRow:ve,rowCache:ke}=v,{isScrolling:$e,yAxisScrollDir:_e,scrollTop:Ve}=s(O);if(fe===0||ve===0)return[0,0,0,0];const xe=d(v,Ve,s(E)),he=f(v,xe,Ve,s(E)),Le=!$e||_e===Vc?Math.max(1,ke):1,tt=!$e||_e===Pr?Math.max(1,ke):1;return[Math.max(0,xe-Le),Math.max(0,Math.min(ve-1,he+tt)),xe,he]}),x=S(()=>a(v,s(E))),L=S(()=>r(v,s(E))),N=S(()=>{var fe;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:v.direction,height:je(v.height)?`${v.height}px`:v.height,width:je(v.width)?`${v.width}px`:v.width},(fe=v.style)!=null?fe:{}]}),D=S(()=>{const fe=`${s(L)}px`;return{height:`${s(x)}px`,pointerEvents:s(O).isScrolling?"none":void 0,width:fe}}),z=()=>{const{totalColumn:fe,totalRow:ve}=v;if(fe>0&&ve>0){const[he,Le,tt,ct]=s(V),[ut,_t,Lt,Ye]=s(q);g(Bc,{columnCacheStart:he,columnCacheEnd:Le,rowCacheStart:ut,rowCacheEnd:_t,columnVisibleStart:tt,columnVisibleEnd:ct,rowVisibleStart:Lt,rowVisibleEnd:Ye})}const{scrollLeft:ke,scrollTop:$e,updateRequested:_e,xAxisScrollDir:Ve,yAxisScrollDir:xe}=s(O);g(Fc,{xAxisScrollDir:Ve,scrollLeft:ke,yAxisScrollDir:xe,scrollTop:$e,updateRequested:_e})},H=fe=>{const{clientHeight:ve,clientWidth:ke,scrollHeight:$e,scrollLeft:_e,scrollTop:Ve,scrollWidth:xe}=fe.currentTarget,he=s(O);if(he.scrollTop===Ve&&he.scrollLeft===_e)return;let Le=_e;if(Ny(v.direction))switch(Hc()){case Mi:Le=-_e;break;case Yh:Le=xe-ke-_e;break}O.value={...he,isScrolling:!0,scrollLeft:Le,scrollTop:Math.max(0,Math.min(Ve,$e-ve)),updateRequested:!0,xAxisScrollDir:Ha(he.scrollLeft,Le),yAxisScrollDir:Ha(he.scrollTop,Ve)},Ae(()=>U()),ne(),z()},K=(fe,ve)=>{const ke=s(P),$e=(x.value-ke)/ve*fe;re({scrollTop:Math.min(x.value-ke,$e)})},G=(fe,ve)=>{const ke=s(W),$e=(L.value-ke)/ve*fe;re({scrollLeft:Math.min(L.value-ke,$e)})},{onWheel:Q}=QU({atXStartEdge:S(()=>O.value.scrollLeft<=0),atXEndEdge:S(()=>O.value.scrollLeft>=L.value-s(W)),atYStartEdge:S(()=>O.value.scrollTop<=0),atYEndEdge:S(()=>O.value.scrollTop>=x.value-s(P))},(fe,ve)=>{var ke,$e,_e,Ve;($e=(ke=T.value)==null?void 0:ke.onMouseUp)==null||$e.call(ke),(Ve=(_e=R.value)==null?void 0:_e.onMouseUp)==null||Ve.call(_e);const xe=s(W),he=s(P);re({scrollLeft:Math.min(O.value.scrollLeft+fe,L.value-xe),scrollTop:Math.min(O.value.scrollTop+ve,x.value-he)})});At(k,"wheel",Q,{passive:!1});const re=({scrollLeft:fe=O.value.scrollLeft,scrollTop:ve=O.value.scrollTop})=>{fe=Math.max(fe,0),ve=Math.max(ve,0);const ke=s(O);ve===ke.scrollTop&&fe===ke.scrollLeft||(O.value={...ke,xAxisScrollDir:Ha(ke.scrollLeft,fe),yAxisScrollDir:Ha(ke.scrollTop,ve),scrollLeft:fe,scrollTop:ve,updateRequested:!0},Ae(()=>U()),ne(),z())},ue=(fe=0,ve=0,ke=To)=>{const $e=s(O);ve=Math.max(0,Math.min(ve,v.totalColumn-1)),fe=Math.max(0,Math.min(fe,v.totalRow-1));const _e=CC(y.namespace.value),Ve=s(E),xe=a(v,Ve),he=r(v,Ve);re({scrollLeft:i(v,ve,ke,$e.scrollLeft,Ve,he>v.width?_e:0),scrollTop:u(v,fe,ke,$e.scrollTop,Ve,xe>v.height?_e:0)})},se=(fe,ve)=>{const{columnWidth:ke,direction:$e,rowHeight:_e}=v,Ve=M.value(t&&ke,t&&_e,t&&$e),xe=`${fe},${ve}`;if($t(Ve,xe))return Ve[xe];{const[,he]=n(v,ve,s(E)),Le=s(E),tt=Ny($e),[ct,ut]=c(v,fe,Le),[_t]=n(v,ve,Le);return Ve[xe]={position:"absolute",left:tt?void 0:`${he}px`,right:tt?`${he}px`:void 0,top:`${ut}px`,height:`${ct}px`,width:`${_t}px`},Ve[xe]}},U=()=>{O.value.isScrolling=!1,Ae(()=>{M.value(-1,null,null)})};at(()=>{if(!kt)return;const{initScrollLeft:fe,initScrollTop:ve}=v,ke=s(k);ke&&(je(fe)&&(ke.scrollLeft=fe),je(ve)&&(ke.scrollTop=ve)),z()});const ne=()=>{const{direction:fe}=v,{scrollLeft:ve,scrollTop:ke,updateRequested:$e}=s(O),_e=s(k);if($e&&_e){if(fe===Hr)switch(Hc()){case Mi:{_e.scrollLeft=-ve;break}case qh:{_e.scrollLeft=ve;break}default:{const{clientWidth:Ve,scrollWidth:xe}=_e;_e.scrollLeft=xe-Ve-ve;break}}else _e.scrollLeft=Math.max(0,ve);_e.scrollTop=Math.max(0,ke)}},{resetAfterColumnIndex:Te,resetAfterRowIndex:te,resetAfter:j}=w.proxy;b({windowRef:k,innerRef:I,getItemStyleCache:M,scrollTo:re,scrollToItem:ue,states:O,resetAfterColumnIndex:Te,resetAfterRowIndex:te,resetAfter:j});const le=()=>{const{scrollbarAlwaysOn:fe,scrollbarStartGap:ve,scrollbarEndGap:ke,totalColumn:$e,totalRow:_e}=v,Ve=s(W),xe=s(P),he=s(L),Le=s(x),{scrollLeft:tt,scrollTop:ct}=s(O),ut=qe(Pp,{ref:T,alwaysOn:fe,startGap:ve,endGap:ke,class:y.e("horizontal"),clientSize:Ve,layout:"horizontal",onScroll:G,ratio:Ve*100/he,scrollFrom:tt/(he-Ve),total:_e,visible:!0}),_t=qe(Pp,{ref:R,alwaysOn:fe,startGap:ve,endGap:ke,class:y.e("vertical"),clientSize:xe,layout:"vertical",onScroll:K,ratio:xe*100/Le,scrollFrom:ct/(Le-xe),total:$e,visible:!0});return{horizontalScrollbar:ut,verticalScrollbar:_t}},de=()=>{var fe;const[ve,ke]=s(V),[$e,_e]=s(q),{data:Ve,totalColumn:xe,totalRow:he,useIsScrolling:Le,itemKey:tt}=v,ct=[];if(he>0&&xe>0)for(let ut=$e;ut<=_e;ut++)for(let _t=ve;_t<=ke;_t++){const Lt=tt({columnIndex:_t,data:Ve,rowIndex:ut});ct.push(qe(ze,{key:Lt},(fe=C.default)==null?void 0:fe.call(C,{columnIndex:_t,data:Ve,isScrolling:Le?s(O).isScrolling:void 0,style:se(ut,_t),rowIndex:ut})))}return ct},ce=()=>{const fe=st(v.innerElement),ve=de();return[qe(fe,{style:s(D),ref:I},Fe(fe)?ve:{default:()=>ve})]};return()=>{const fe=st(v.containerElement),{horizontalScrollbar:ve,verticalScrollbar:ke}=le(),$e=ce();return qe("div",{key:0,class:y.e("wrapper"),role:v.role},[qe(fe,{class:v.className,style:s(N),onScroll:H,ref:k},Fe(fe)?$e:{default:()=>$e}),ve,ke])}}}),{max:jc,min:L2,floor:D2}=Math,eq={column:"columnWidth",row:"rowHeight"},Wp={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Ol=(e,t,n,o)=>{const[l,a,r]=[n[o],e[eq[o]],n[Wp[o]]];if(t>r){let i=0;if(r>=0){const u=l[r];i=u.offset+u.size}for(let u=r+1;u<=t;u++){const c=a(u);l[u]={offset:i,size:c},i+=c}n[Wp[o]]=t}return l[t]},B2=(e,t,n,o,l,a)=>{for(;n<=o;){const r=n+D2((o-n)/2),i=Ol(e,r,t,a).offset;if(i===l)return r;i<l?n=r+1:o=r-1}return jc(0,n-1)},tq=(e,t,n,o,l)=>{const a=l==="column"?e.totalColumn:e.totalRow;let r=1;for(;n<a&&Ol(e,n,t,l).offset<o;)n+=r,r*=2;return B2(e,t,D2(n/2),L2(n,a-1),o,l)},Uy=(e,t,n,o)=>{const[l,a]=[t[o],t[Wp[o]]];return(a>0?l[a].offset:0)>=n?B2(e,t,0,a,n,o):tq(e,t,jc(0,a),n,o)},F2=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:n,row:o})=>{let l=0;if(n>=e&&(n=e-1),n>=0){const i=o[n];l=i.offset+i.size}const r=(e-n-1)*t;return l+r},V2=({totalColumn:e},{column:t,estimatedColumnWidth:n,lastVisitedColumnIndex:o})=>{let l=0;if(o>e&&(o=e-1),o>=0){const i=t[o];l=i.offset+i.size}const r=(e-o-1)*n;return l+r},nq={column:V2,row:F2},qy=(e,t,n,o,l,a,r)=>{const[i,u]=[a==="row"?e.height:e.width,nq[a]],c=Ol(e,t,l,a),d=u(e,l),f=jc(0,L2(d-i,c.offset)),h=jc(0,c.offset-i+r+c.size);switch(n===Ld&&(o>=h-i&&o<=f+i?n=To:n=dl),n){case Ni:return f;case Ii:return h;case dl:return Math.round(h+(f-h)/2);case To:default:return o>=h&&o<=f?o:h>f||o<h?h:f}},oq=A2({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,n)=>{const o=Ol(e,t,n,"column");return[o.size,o.offset]},getRowPosition:(e,t,n)=>{const o=Ol(e,t,n,"row");return[o.size,o.offset]},getColumnOffset:(e,t,n,o,l,a)=>qy(e,t,n,o,l,"column",a),getRowOffset:(e,t,n,o,l,a)=>qy(e,t,n,o,l,"row",a),getColumnStartIndexForOffset:(e,t,n)=>Uy(e,n,t,"column"),getColumnStopIndexForStartIndex:(e,t,n,o)=>{const l=Ol(e,t,o,"column"),a=n+e.width;let r=l.offset+l.size,i=t;for(;i<e.totalColumn-1&&r<a;)i++,r+=Ol(e,t,o,"column").size;return i},getEstimatedTotalHeight:F2,getEstimatedTotalWidth:V2,getRowStartIndexForOffset:(e,t,n)=>Uy(e,n,t,"row"),getRowStopIndexForStartIndex:(e,t,n,o)=>{const{totalRow:l,height:a}=e,r=Ol(e,t,o,"row"),i=n+a;let u=r.size+r.offset,c=t;for(;c<l-1&&u<i;)c++,u+=Ol(e,c,o,"row").size;return c},injectToInstance:(e,t)=>{const n=({columnIndex:a,rowIndex:r},i)=>{var u,c;i=bt(i)?!0:i,je(a)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,a-1)),je(r)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,r-1)),(u=e.exposed)==null||u.getItemStyleCache.value(-1,null,null),i&&((c=e.proxy)==null||c.$forceUpdate())},o=(a,r)=>{n({columnIndex:a},r)},l=(a,r)=>{n({rowIndex:a},r)};Object.assign(e.proxy,{resetAfterColumnIndex:o,resetAfterRowIndex:l,resetAfter:n})},initCache:({estimatedColumnWidth:e=Tp,estimatedRowHeight:t=Tp})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}}),lq=A2({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:n},o,l,a,r,i)=>{n=Number(n);const u=Math.max(0,e*t-n),c=Math.min(u,o*t),d=Math.max(0,o*t-n+i+t);switch(l==="smart"&&(a>=d-n&&a<=c+n?l=To:l=dl),l){case Ni:return c;case Ii:return d;case dl:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(n/2)?0:f>u+Math.floor(n/2)?u:f}case To:default:return a>=d&&a<=c?a:d>c||a<d?d:c}},getRowOffset:({rowHeight:e,height:t,totalRow:n},o,l,a,r,i)=>{t=Number(t);const u=Math.max(0,n*e-t),c=Math.min(u,o*e),d=Math.max(0,o*e-t+i+e);switch(l===Ld&&(a>=d-t&&a<=c+t?l=To:l=dl),l){case Ni:return c;case Ii:return d;case dl:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(t/2)?0:f>u+Math.floor(t/2)?u:f}case To:default:return a>=d&&a<=c?a:d>c||a<d?d:c}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:n},o,l)=>{const a=o*e,r=Math.ceil((n+l-a)/e);return Math.max(0,Math.min(t-1,o+r-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:n},o,l)=>{const a=o*e,r=Math.ceil((n+l-a)/e);return Math.max(0,Math.min(t-1,o+r-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}}),aq="ElTableV2Grid",rq=e=>{const t=A(),n=A(),o=A(0),l=S(()=>{const{data:g,rowHeight:b,estimatedRowHeight:C}=e;if(!C)return g.length*b}),a=S(()=>{const{fixedData:g,rowHeight:b}=e;return((g==null?void 0:g.length)||0)*b}),r=S(()=>rc(e.headerHeight)),i=S(()=>{const{height:g}=e;return Math.max(0,g-s(r)-s(a))}),u=S(()=>s(r)+s(a)>0),c=({data:g,rowIndex:b})=>g[b][e.rowKey];function d({rowCacheStart:g,rowCacheEnd:b,rowVisibleStart:C,rowVisibleEnd:y}){var w;(w=e.onRowsRendered)==null||w.call(e,{rowCacheStart:g,rowCacheEnd:b,rowVisibleStart:C,rowVisibleEnd:y})}function f(g,b){var C;(C=n.value)==null||C.resetAfterRowIndex(g,b)}function h(g,b){const C=s(t),y=s(n);nt(g)?(C==null||C.scrollToLeft(g.scrollLeft),o.value=g.scrollLeft,y==null||y.scrollTo(g)):(C==null||C.scrollToLeft(g),o.value=g,y==null||y.scrollTo({scrollLeft:g,scrollTop:b}))}function p(g){var b;(b=s(n))==null||b.scrollTo({scrollTop:g})}function m(g,b){var C;(C=s(n))==null||C.scrollToItem(g,1,b)}function v(){var g,b;(g=s(n))==null||g.$forceUpdate(),(b=s(t))==null||b.$forceUpdate()}return pe(()=>e.bodyWidth,()=>{var g;je(e.estimatedRowHeight)&&((g=n.value)==null||g.resetAfter({columnIndex:0},!1))}),{bodyRef:n,forceUpdate:v,fixedRowHeight:a,gridHeight:i,hasHeader:u,headerHeight:r,headerRef:t,totalHeight:l,itemKey:c,onItemRendered:d,resetAfterRowIndex:f,scrollTo:h,scrollToTop:p,scrollToRow:m,scrollLeft:o}},sq=Y({name:aq,props:sc,setup(e,{slots:t,expose:n}){const{ns:o}=Re(em),{bodyRef:l,fixedRowHeight:a,gridHeight:r,hasHeader:i,headerRef:u,headerHeight:c,totalHeight:d,forceUpdate:f,itemKey:h,onItemRendered:p,resetAfterRowIndex:m,scrollTo:v,scrollToTop:g,scrollToRow:b,scrollLeft:C}=rq(e);ht(M2,C),ld(async()=>{var w;await Ae();const E=(w=l.value)==null?void 0:w.states.scrollTop;E&&g(Math.round(E)+1)}),n({forceUpdate:f,totalHeight:d,scrollTo:v,scrollToTop:g,scrollToRow:b,resetAfterRowIndex:m});const y=()=>e.bodyWidth;return()=>{const{cache:w,columns:E,data:k,fixedData:T,useIsScrolling:R,scrollbarAlwaysOn:I,scrollbarEndGap:O,scrollbarStartGap:M,style:P,rowHeight:W,bodyWidth:V,estimatedRowHeight:q,headerWidth:x,height:L,width:N,getRowHeight:D,onScroll:z}=e,H=je(q),K=H?oq:lq,G=s(c);return J("div",{role:"table",class:[o.e("table"),e.class],style:P},[J(K,{ref:l,data:k,useIsScrolling:R,itemKey:h,columnCache:0,columnWidth:H?y:V,totalColumn:1,totalRow:k.length,rowCache:w,rowHeight:H?D:W,width:N,height:s(r),class:o.e("body"),role:"rowgroup",scrollbarStartGap:M,scrollbarEndGap:O,scrollbarAlwaysOn:I,onScroll:z,onItemRendered:p,perfMode:!1},{default:Q=>{var re;const ue=k[Q.rowIndex];return(re=t.row)==null?void 0:re.call(t,{...Q,columns:E,rowData:ue})}}),s(i)&&J(ZU,{ref:u,class:o.e("header-wrapper"),columns:E,headerData:k,headerHeight:e.headerHeight,fixedHeaderData:T,rowWidth:x,rowHeight:W,width:N,height:Math.min(G+s(a),L)},{dynamic:t.header,fixed:t.row})])}}});var om=sq;function iq(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ht(e)}const uq=(e,{slots:t})=>{const{mainTableRef:n,...o}=e;return J(om,ot({ref:n},o),iq(t)?t:{default:()=>[t]})};var cq=uq;function dq(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ht(e)}const fq=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:n,...o}=e;return J(om,ot({ref:n},o),dq(t)?t:{default:()=>[t]})};var pq=fq;function vq(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ht(e)}const hq=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:n,...o}=e;return J(om,ot({ref:n},o),vq(t)?t:{default:()=>[t]})};var mq=hq;const gq=e=>{const{isScrolling:t}=Re(em),n=A(!1),o=A(),l=S(()=>je(e.estimatedRowHeight)&&e.rowIndex>=0),a=(u=!1)=>{const c=s(o);if(!c)return;const{columns:d,onRowHeightChange:f,rowKey:h,rowIndex:p,style:m}=e,{height:v}=c.getBoundingClientRect();n.value=!0,Ae(()=>{if(u||v!==Number.parseInt(m.height)){const g=d[0],b=(g==null?void 0:g.placeholderSign)===Ai;f==null||f({rowKey:h,height:v,rowIndex:p},g&&!b&&g.fixed)}})},r=S(()=>{const{rowData:u,rowIndex:c,rowKey:d,onRowHover:f}=e,h=e.rowEventHandlers||{},p={};return Object.entries(h).forEach(([m,v])=>{Ke(v)&&(p[m]=g=>{v({event:g,rowData:u,rowIndex:c,rowKey:d})})}),f&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:m,hovered:v})=>{const g=p[m];p[m]=b=>{f({event:b,hovered:v,rowData:u,rowIndex:c,rowKey:d}),g==null||g(b)}}),p}),i=u=>{const{onRowExpand:c,rowData:d,rowIndex:f,rowKey:h}=e;c==null||c({expanded:u,rowData:d,rowIndex:f,rowKey:h})};return at(()=>{s(l)&&a(!0)}),{isScrolling:t,measurable:l,measured:n,rowRef:o,eventHandlers:r,onExpand:i}},bq="ElTableV2TableRow",yq=Y({name:bq,props:Ka,setup(e,{expose:t,slots:n,attrs:o}){const{eventHandlers:l,isScrolling:a,measurable:r,measured:i,rowRef:u,onExpand:c}=gq(e);return t({onExpand:c}),()=>{const{columns:d,columnsStyles:f,expandColumnKey:h,depth:p,rowData:m,rowIndex:v,style:g}=e;let b=d.map((C,y)=>{const w=be(m.children)&&m.children.length>0&&C.key===h;return n.cell({column:C,columns:d,columnIndex:y,depth:p,style:f[C.key],rowData:m,rowIndex:v,isScrolling:s(a),expandIconProps:w?{rowData:m,rowIndex:v,onExpand:c}:void 0})});if(n.row&&(b=n.row({cells:b.map(C=>be(C)&&C.length===1?C[0]:C),style:g,columns:d,depth:p,rowData:m,rowIndex:v,isScrolling:s(a)})),s(r)){const{height:C,...y}=g||{},w=s(i);return J("div",ot({ref:u,class:e.class,style:w?g:y,role:"row"},o,s(l)),[b])}return J("div",ot(o,{ref:u,class:e.class,style:g,role:"row"},s(l)),[b])}}});var wq=yq;function Cq(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ht(e)}const Sq=(e,{slots:t})=>{const{columns:n,columnsStyles:o,depthMap:l,expandColumnKey:a,expandedRowKeys:r,estimatedRowHeight:i,hasFixedColumns:u,rowData:c,rowIndex:d,style:f,isScrolling:h,rowProps:p,rowClass:m,rowKey:v,rowEventHandlers:g,ns:b,onRowHovered:C,onRowExpanded:y}=e,w=ar(m,{columns:n,rowData:c,rowIndex:d},""),E=ar(p,{columns:n,rowData:c,rowIndex:d}),k=c[v],T=l[k]||0,R=!!a,I=d<0,O=[b.e("row"),w,{[b.e(`row-depth-${T}`)]:R&&d>=0,[b.is("expanded")]:R&&r.includes(k),[b.is("fixed")]:!T&&I,[b.is("customized")]:!!t.row}],M=u?C:void 0,P={...E,columns:n,columnsStyles:o,class:O,depth:T,expandColumnKey:a,estimatedRowHeight:I?void 0:i,isScrolling:h,rowIndex:d,rowData:c,rowKey:k,rowEventHandlers:g,style:f};return J(wq,ot(P,{onRowExpand:y,onMouseenter:q=>{M==null||M({hovered:!0,rowKey:k,event:q,rowData:c,rowIndex:d})},onMouseleave:q=>{M==null||M({hovered:!1,rowKey:k,event:q,rowData:c,rowIndex:d})},rowkey:k}),Cq(t)?t:{default:()=>[t]})};var kq=Sq;const lm=(e,{slots:t})=>{var n;const{cellData:o,style:l}=e,a=((n=o==null?void 0:o.toString)==null?void 0:n.call(o))||"",r=oe(t,"default",e,()=>[a]);return J("div",{class:e.class,title:a,style:l},[r])};lm.displayName="ElTableV2Cell";lm.inheritAttrs=!1;var Eq=lm;const _q=e=>{const{expanded:t,expandable:n,onExpand:o,style:l,size:a}=e,r={onClick:n?()=>o(!t):void 0,class:e.class};return J(Be,ot(r,{size:a,style:l}),{default:()=>[J(Hn,null,null)]})};var Tq=_q;const z2=({columns:e,column:t,columnIndex:n,depth:o,expandIconProps:l,isScrolling:a,rowData:r,rowIndex:i,style:u,expandedRowKeys:c,ns:d,cellProps:f,expandColumnKey:h,indentSize:p,iconSize:m,rowKey:v},{slots:g})=>{const b=da(u);if(t.placeholderSign===Ai)return J("div",{class:d.em("row-cell","placeholder"),style:b},null);const{cellRenderer:C,dataKey:y,dataGetter:w}=t,E=Ke(w)?w({columns:e,column:t,columnIndex:n,rowData:r,rowIndex:i}):an(r,y??""),k=ar(f,{cellData:E,columns:e,column:t,columnIndex:n,rowIndex:i,rowData:r}),T={class:d.e("cell-text"),columns:e,column:t,columnIndex:n,cellData:E,isScrolling:a,rowData:r,rowIndex:i},R=I2(C),I=R?R(T):oe(g,"default",T,()=>[J(Eq,T,null)]),O=[d.e("row-cell"),t.class,t.align===xi.CENTER&&d.is("align-center"),t.align===xi.RIGHT&&d.is("align-right")],M=i>=0&&h&&t.key===h,P=i>=0&&c.includes(r[v]);let W;const V=`margin-inline-start: ${o*p}px;`;return M&&(nt(l)?W=J(Tq,ot(l,{class:[d.e("expand-icon"),d.is("expanded",P)],size:m,expanded:P,style:V,expandable:!0}),null):W=J("div",{style:[V,`width: ${m}px; height: ${m}px;`].join(" ")},null)),J("div",ot({class:O,style:b},k,{role:"cell"}),[W,I])};z2.inheritAttrs=!1;var Yy=z2;const $q=Ce({class:String,columns:uu,columnsStyles:{type:Z(Object),required:!0},headerIndex:Number,style:{type:Z(Object)}}),Oq=Y({name:"ElTableV2HeaderRow",props:$q,setup(e,{slots:t}){return()=>{const{columns:n,columnsStyles:o,headerIndex:l,style:a}=e;let r=n.map((i,u)=>t.cell({columns:n,column:i,columnIndex:u,headerIndex:l,style:o[i.key]}));return t.header&&(r=t.header({cells:r.map(i=>be(i)&&i.length===1?i[0]:i),columns:n,headerIndex:l})),J("div",{class:e.class,style:a,role:"row"},[r])}}});var Nq=Oq;function Iq(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ht(e)}const Mq=({columns:e,columnsStyles:t,headerIndex:n,style:o,headerClass:l,headerProps:a,ns:r},{slots:i})=>{const u={columns:e,headerIndex:n},c=[r.e("header-row"),ar(l,u,""),{[r.is("customized")]:!!i.header}],d={...ar(a,u),columnsStyles:t,class:c,columns:e,headerIndex:n,style:o};return J(Nq,d,Iq(i)?i:{default:()=>[i]})};var Pq=Mq;const am=(e,{slots:t})=>oe(t,"default",e,()=>{var n,o;return[J("div",{class:e.class,title:(n=e.column)==null?void 0:n.title},[(o=e.column)==null?void 0:o.title])]});am.displayName="ElTableV2HeaderCell";am.inheritAttrs=!1;var Rq=am;const xq=e=>{const{sortOrder:t}=e;return J(Be,{size:14,class:e.class},{default:()=>[t===Ri.ASC?J(u3,null,null):J(s3,null,null)]})};var Aq=xq;const Lq=(e,{slots:t})=>{const{column:n,ns:o,style:l,onColumnSorted:a}=e,r=da(l);if(n.placeholderSign===Ai)return J("div",{class:o.em("header-row-cell","placeholder"),style:r},null);const{headerCellRenderer:i,headerClass:u,sortable:c}=n,d={...e,class:o.e("header-cell-text")},f=I2(i),h=f?f(d):oe(t,"default",d,()=>[J(Rq,d,null)]),{sortBy:p,sortState:m,headerCellProps:v}=e;let g,b;if(m){const w=m[n.key];g=!!Kp[w],b=g?w:Ri.ASC}else g=n.key===p.key,b=g?p.order:Ri.ASC;const C=[o.e("header-cell"),ar(u,e,""),n.align===xi.CENTER&&o.is("align-center"),n.align===xi.RIGHT&&o.is("align-right"),c&&o.is("sortable")],y={...ar(v,e),onClick:n.sortable?a:void 0,class:C,style:r,"data-key":n.key};return J("div",ot(y,{role:"columnheader"}),[h,c&&J(Aq,{class:[o.e("sort-icon"),g&&o.is("sorting")],sortOrder:b},null)])};var Gy=Lq;const H2=(e,{slots:t})=>{var n;return J("div",{class:e.class,style:e.style},[(n=t.default)==null?void 0:n.call(t)])};H2.displayName="ElTableV2Footer";var Dq=H2;const K2=(e,{slots:t})=>{const n=oe(t,"default",{},()=>[J(Ak,null,null)]);return J("div",{class:e.class,style:e.style},[n])};K2.displayName="ElTableV2Empty";var Bq=K2;const W2=(e,{slots:t})=>{var n;return J("div",{class:e.class,style:e.style},[(n=t.default)==null?void 0:n.call(t)])};W2.displayName="ElTableV2Overlay";var Fq=W2;function Fs(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ht(e)}const Vq="ElTableV2",zq=Y({name:Vq,props:GU,setup(e,{slots:t,expose:n}){const o=ge("table-v2"),{columnsStyles:l,fixedColumnsOnLeft:a,fixedColumnsOnRight:r,mainColumns:i,mainTableHeight:u,fixedTableHeight:c,leftTableWidth:d,rightTableWidth:f,data:h,depthMap:p,expandedRowKeys:m,hasFixedColumns:v,mainTableRef:g,leftTableRef:b,rightTableRef:C,isDynamic:y,isResetting:w,isScrolling:E,bodyWidth:k,emptyStyle:T,rootStyle:R,footerHeight:I,showEmpty:O,scrollTo:M,scrollToLeft:P,scrollToTop:W,scrollToRow:V,getRowHeight:q,onColumnSorted:x,onRowHeightChange:L,onRowHovered:N,onRowExpanded:D,onRowsRendered:z,onScroll:H,onVerticalScroll:K}=qU(e);return n({scrollTo:M,scrollToLeft:P,scrollToTop:W,scrollToRow:V}),ht(em,{ns:o,isResetting:w,isScrolling:E}),()=>{const{cache:G,cellProps:Q,estimatedRowHeight:re,expandColumnKey:ue,fixedData:se,headerHeight:U,headerClass:ne,headerProps:Te,headerCellProps:te,sortBy:j,sortState:le,rowHeight:de,rowClass:ce,rowEventHandlers:Se,rowKey:fe,rowProps:ve,scrollbarAlwaysOn:ke,indentSize:$e,iconSize:_e,useIsScrolling:Ve,vScrollbarSize:xe,width:he}=e,Le=s(h),tt={cache:G,class:o.e("main"),columns:s(i),data:Le,fixedData:se,estimatedRowHeight:re,bodyWidth:s(k),headerHeight:U,headerWidth:s(k),height:s(u),mainTableRef:g,rowKey:fe,rowHeight:de,scrollbarAlwaysOn:ke,scrollbarStartGap:2,scrollbarEndGap:xe,useIsScrolling:Ve,width:he,getRowHeight:q,onRowsRendered:z,onScroll:H},ct=s(d),ut=s(c),_t={cache:G,class:o.e("left"),columns:s(a),data:Le,fixedData:se,estimatedRowHeight:re,leftTableRef:b,rowHeight:de,bodyWidth:ct,headerWidth:ct,headerHeight:U,height:ut,rowKey:fe,scrollbarAlwaysOn:ke,scrollbarStartGap:2,scrollbarEndGap:xe,useIsScrolling:Ve,width:ct,getRowHeight:q,onScroll:K},Lt=s(f),Ye={cache:G,class:o.e("right"),columns:s(r),data:Le,fixedData:se,estimatedRowHeight:re,rightTableRef:C,rowHeight:de,bodyWidth:Lt,headerWidth:Lt,headerHeight:U,height:ut,rowKey:fe,scrollbarAlwaysOn:ke,scrollbarStartGap:2,scrollbarEndGap:xe,width:Lt,style:`--${s(o.namespace)}-table-scrollbar-size: ${xe}px`,useIsScrolling:Ve,getRowHeight:q,onScroll:K},rt=s(l),mt={ns:o,depthMap:s(p),columnsStyles:rt,expandColumnKey:ue,expandedRowKeys:s(m),estimatedRowHeight:re,hasFixedColumns:s(v),rowProps:ve,rowClass:ce,rowKey:fe,rowEventHandlers:Se,onRowHovered:N,onRowExpanded:D,onRowHeightChange:L},me={cellProps:Q,expandColumnKey:ue,indentSize:$e,iconSize:_e,rowKey:fe,expandedRowKeys:s(m),ns:o},He={ns:o,headerClass:ne,headerProps:Te,columnsStyles:rt},X={ns:o,sortBy:j,sortState:le,headerCellProps:te,onColumnSorted:x},ye={row:Vt=>J(kq,ot(Vt,mt),{row:t.row,cell:Bt=>{let Yt;return t.cell?J(Yy,ot(Bt,me,{style:rt[Bt.column.key]}),Fs(Yt=t.cell(Bt))?Yt:{default:()=>[Yt]}):J(Yy,ot(Bt,me,{style:rt[Bt.column.key]}),null)}}),header:Vt=>J(Pq,ot(Vt,He),{header:t.header,cell:Bt=>{let Yt;return t["header-cell"]?J(Gy,ot(Bt,X,{style:rt[Bt.column.key]}),Fs(Yt=t["header-cell"](Bt))?Yt:{default:()=>[Yt]}):J(Gy,ot(Bt,X,{style:rt[Bt.column.key]}),null)}})},De=[e.class,o.b(),o.e("root"),{[o.is("dynamic")]:s(y)}],lt={class:o.e("footer"),style:s(I)};return J("div",{class:De,style:s(R)},[J(cq,tt,Fs(ye)?ye:{default:()=>[ye]}),J(pq,_t,Fs(ye)?ye:{default:()=>[ye]}),J(mq,Ye,Fs(ye)?ye:{default:()=>[ye]}),t.footer&&J(Dq,lt,{default:t.footer}),s(O)&&J(Bq,{class:o.e("empty"),style:s(T)},{default:t.empty}),t.overlay&&J(Fq,{class:o.e("overlay")},{default:t.overlay})])}}});var Hq=zq;const Kq=Ce({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Z(Function)}}),Wq=e=>{const t=A(),n=A(0),o=A(0);let l;return at(()=>{l=qt(t,([a])=>{const{width:r,height:i}=a.contentRect,{paddingLeft:u,paddingRight:c,paddingTop:d,paddingBottom:f}=getComputedStyle(a.target),h=Number.parseInt(u)||0,p=Number.parseInt(c)||0,m=Number.parseInt(d)||0,v=Number.parseInt(f)||0;n.value=r-h-p,o.value=i-m-v}).stop}),Nt(()=>{l==null||l()}),pe([n,o],([a,r])=>{var i;(i=e.onResize)==null||i.call(e,{width:a,height:r})}),{sizer:t,width:n,height:o}},jq=Y({name:"ElAutoResizer",props:Kq,setup(e,{slots:t}){const n=ge("auto-resizer"),{height:o,width:l,sizer:a}=Wq(e),r={width:"100%",height:"100%"};return()=>{var i;return J("div",{ref:a,class:n.b(),style:r},[(i=t.default)==null?void 0:i.call(t,{height:o.value,width:l.value})])}}});var Uq=jq;const qq=Qe(Hq),Yq=Qe(Uq),Dd=Symbol("tabsRootContextKey"),Gq=Ce({tabs:{type:Z(Array),default:()=>Gt([])},tabRefs:{type:Z(Object),default:()=>Gt({})}}),j2="ElTabBar",Xq=Y({name:j2}),Jq=Y({...Xq,props:Gq,setup(e,{expose:t}){const n=e,o=Re(Dd);o||sn(j2,"<el-tabs><el-tab-bar /></el-tabs>");const l=ge("tabs"),a=A(),r=A(),i=()=>{let h=0,p=0;const m=["top","bottom"].includes(o.props.tabPosition)?"width":"height",v=m==="width"?"x":"y",g=v==="x"?"left":"top";return n.tabs.every(b=>{if(bt(b.paneName))return!1;const C=n.tabRefs[b.paneName];if(!C)return!1;if(!b.active)return!0;h=C[`offset${ua(g)}`],p=C[`client${ua(m)}`];const y=window.getComputedStyle(C);return m==="width"&&(p-=Number.parseFloat(y.paddingLeft)+Number.parseFloat(y.paddingRight),h+=Number.parseFloat(y.paddingLeft)),!1}),{[m]:`${p}px`,transform:`translate${ua(v)}(${h}px)`}},u=()=>r.value=i(),c=[],d=()=>{c.forEach(h=>h.stop()),c.length=0,Object.values(n.tabRefs).forEach(h=>{c.push(qt(h,u))})};pe(()=>n.tabs,async()=>{await Ae(),u(),d()},{immediate:!0});const f=qt(a,()=>u());return Nt(()=>{c.forEach(h=>h.stop()),c.length=0,f.stop()}),t({ref:a,update:u}),(h,p)=>(_(),F("div",{ref_key:"barRef",ref:a,class:$([s(l).e("active-bar"),s(l).is(s(o).props.tabPosition)]),style:We(r.value)},null,6))}});var Zq=Ee(Jq,[["__file","tab-bar.vue"]]);const Qq=Ce({panes:{type:Z(Array),default:()=>Gt([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),eY={tabClick:(e,t,n)=>n instanceof Event,tabRemove:(e,t)=>t instanceof Event},Xy="ElTabNav",tY=Y({name:Xy,props:Qq,emits:eY,setup(e,{expose:t,emit:n}){const o=Re(Dd);o||sn(Xy,"<el-tabs><tab-nav /></el-tabs>");const l=ge("tabs"),a=$A(),r=VA(),i=A(),u=A(),c=A(),d=A({}),f=A(),h=A(!1),p=A(0),m=A(!1),v=A(!0),g=jt(),b=S(()=>["top","bottom"].includes(o.props.tabPosition)),C=S(()=>b.value?"width":"height"),y=S(()=>({transform:`translate${C.value==="width"?"X":"Y"}(-${p.value}px)`})),{width:w,height:E}=ap(i),{width:k,height:T}=ap(u,{width:0,height:0},{box:"border-box"}),R=S(()=>b.value?w.value:E.value),I=S(()=>b.value?k.value:T.value),{onWheel:O}=Xk({atStartEdge:S(()=>p.value<=0),atEndEdge:S(()=>I.value-p.value<=R.value),layout:S(()=>b.value?"horizontal":"vertical")},z=>{p.value=x1(p.value+z,0,I.value-R.value)}),M=()=>{if(!i.value)return;const z=i.value[`offset${ua(C.value)}`],H=p.value;if(!H)return;const K=H>z?H-z:0;p.value=K},P=()=>{if(!i.value||!u.value)return;const z=u.value[`offset${ua(C.value)}`],H=i.value[`offset${ua(C.value)}`],K=p.value;if(z-K<=H)return;const G=z-K>H*2?K+H:z-H;p.value=G},W=async()=>{const z=u.value;if(!h.value||!c.value||!i.value||!z)return;await Ae();const H=d.value[e.currentName];if(!H)return;const K=i.value,G=H.getBoundingClientRect(),Q=K.getBoundingClientRect(),re=b.value?z.offsetWidth-Q.width:z.offsetHeight-Q.height,ue=p.value;let se=ue;b.value?(G.left<Q.left&&(se=ue-(Q.left-G.left)),G.right>Q.right&&(se=ue+G.right-Q.right)):(G.top<Q.top&&(se=ue-(Q.top-G.top)),G.bottom>Q.bottom&&(se=ue+(G.bottom-Q.bottom))),se=Math.max(se,0),p.value=Math.min(se,re)},V=()=>{var z;if(!u.value||!i.value)return;e.stretch&&((z=f.value)==null||z.update());const H=u.value[`offset${ua(C.value)}`],K=i.value[`offset${ua(C.value)}`],G=p.value;K<H?(h.value=h.value||{},h.value.prev=G,h.value.next=G+K<H,H-G<K&&(p.value=H-K)):(h.value=!1,G>0&&(p.value=0))},q=z=>{let H=0;switch(z.code){case Pe.left:case Pe.up:H=-1;break;case Pe.right:case Pe.down:H=1;break;default:return}const K=Array.from(z.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let Q=K.indexOf(z.target)+H;Q<0?Q=K.length-1:Q>=K.length&&(Q=0),K[Q].focus({preventScroll:!0}),K[Q].click(),x()},x=()=>{v.value&&(m.value=!0)},L=()=>m.value=!1,N=(z,H)=>{d.value[H]=z},D=async()=>{await Ae();const z=d.value[e.currentName];z==null||z.focus({preventScroll:!0})};return pe(a,z=>{z==="hidden"?v.value=!1:z==="visible"&&setTimeout(()=>v.value=!0,50)}),pe(r,z=>{z?setTimeout(()=>v.value=!0,50):v.value=!1}),qt(c,V),at(()=>setTimeout(()=>W(),0)),Jo(()=>V()),t({scrollToActiveTab:W,removeFocus:L,focusActiveTab:D,tabListRef:u,tabBarRef:f,scheduleRender:()=>Ku(g)}),()=>{const z=h.value?[J("span",{class:[l.e("nav-prev"),l.is("disabled",!h.value.prev)],onClick:M},[J(Be,null,{default:()=>[J(Vl,null,null)]})]),J("span",{class:[l.e("nav-next"),l.is("disabled",!h.value.next)],onClick:P},[J(Be,null,{default:()=>[J(Hn,null,null)]})])]:null,H=e.panes.map((K,G)=>{var Q,re,ue,se;const U=K.uid,ne=K.props.disabled,Te=(re=(Q=K.props.name)!=null?Q:K.index)!=null?re:`${G}`,te=!ne&&(K.isClosable||K.props.closable!==!1&&e.editable);K.index=`${G}`;const j=te?J(Be,{class:"is-icon-close",onClick:ce=>n("tabRemove",K,ce)},{default:()=>[J(Mo,null,null)]}):null,le=((se=(ue=K.slots).label)==null?void 0:se.call(ue))||K.props.label,de=!ne&&K.active?0:-1;return J("div",{ref:ce=>N(ce,Te),class:[l.e("item"),l.is(o.props.tabPosition),l.is("active",K.active),l.is("disabled",ne),l.is("closable",te),l.is("focus",m.value)],id:`tab-${Te}`,key:`tab-${U}`,"aria-controls":`pane-${Te}`,role:"tab","aria-selected":K.active,tabindex:de,onFocus:()=>x(),onBlur:()=>L(),onClick:ce=>{L(),n("tabClick",K,Te,ce)},onKeydown:ce=>{te&&(ce.code===Pe.delete||ce.code===Pe.backspace)&&n("tabRemove",K,ce)}},[le,j])});return g.value,J("div",{ref:c,class:[l.e("nav-wrap"),l.is("scrollable",!!h.value),l.is(o.props.tabPosition)]},[z,J("div",{class:l.e("nav-scroll"),ref:i},[e.panes.length>0?J("div",{class:[l.e("nav"),l.is(o.props.tabPosition),l.is("stretch",e.stretch&&["top","bottom"].includes(o.props.tabPosition))],ref:u,style:y.value,role:"tablist",onKeydown:q,onWheel:O},[e.type?null:J(Zq,{ref:f,tabs:[...e.panes],tabRefs:d.value},null),H]):null])])}}}),nY=Ce({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Z(Function),default:()=>!0},stretch:Boolean}),If=e=>Fe(e)||je(e),oY={[Ge]:e=>If(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>If(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>If(e),tabAdd:()=>!0},lY=Y({name:"ElTabs",props:nY,emits:oY,setup(e,{emit:t,slots:n,expose:o}){var l;const a=ge("tabs"),r=S(()=>["left","right"].includes(e.tabPosition)),{children:i,addChild:u,removeChild:c,ChildrenSorter:d}=Id(it(),"ElTabPane"),f=A(),h=A((l=e.modelValue)!=null?l:"0"),p=async(C,y=!1)=>{var w,E,k,T;if(!(h.value===C||bt(C)))try{let R;if(e.beforeLeave){const I=e.beforeLeave(C,h.value);R=I instanceof Promise?await I:I}else R=!0;if(R!==!1){const I=(w=i.value.find(O=>O.paneName===h.value))==null?void 0:w.isFocusInsidePane();h.value=C,y&&(t(Ge,C),t("tabChange",C)),(k=(E=f.value)==null?void 0:E.removeFocus)==null||k.call(E),I&&((T=f.value)==null||T.focusActiveTab())}}catch{}},m=(C,y,w)=>{C.props.disabled||(t("tabClick",C,w),p(y,!0))},v=(C,y)=>{C.props.disabled||bt(C.props.name)||(y.stopPropagation(),t("edit",C.props.name,"remove"),t("tabRemove",C.props.name))},g=()=>{t("edit",void 0,"add"),t("tabAdd")},b=C=>{const y=C.el.firstChild,w=["bottom","right"].includes(e.tabPosition)?C.children[0].el:C.children[1].el;y!==w&&y.before(w)};return pe(()=>e.modelValue,C=>p(C)),pe(h,async()=>{var C;await Ae(),(C=f.value)==null||C.scrollToActiveTab()}),ht(Dd,{props:e,currentName:h,registerPane:u,unregisterPane:c,nav$:f}),o({currentName:h,get tabNavRef(){return lC(f.value,["scheduleRender"])}}),()=>{const C=n["add-icon"],y=e.editable||e.addable?J("div",{class:[a.e("new-tab"),r.value&&a.e("new-tab-vertical")],tabindex:"0",onClick:g,onKeydown:T=>{[Pe.enter,Pe.numpadEnter].includes(T.code)&&g()}},[C?oe(n,"add-icon"):J(Be,{class:a.is("icon-plus")},{default:()=>[J(OC,null,null)]})]):null,w=()=>J(tY,{ref:f,currentName:h.value,editable:e.editable,type:e.type,panes:i.value,stretch:e.stretch,onTabClick:m,onTabRemove:v},null),E=J("div",{class:[a.e("header"),r.value&&a.e("header-vertical"),a.is(e.tabPosition)]},[J(d,null,{default:w,$stable:!0}),y]),k=J("div",{class:a.e("content")},[oe(n,"default")]);return J("div",{class:[a.b(),a.m(e.tabPosition),{[a.m("card")]:e.type==="card",[a.m("border-card")]:e.type==="border-card"}],onVnodeMounted:b,onVnodeUpdated:b},[k,E])}}});var aY=lY;const rY=Ce({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),U2="ElTabPane",sY=Y({name:U2}),iY=Y({...sY,props:rY,setup(e){const t=e,n=it(),o=cn(),l=Re(Dd);l||sn(U2,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const a=ge("tab-pane"),r=A(),i=A(),u=S(()=>{var v;return(v=t.closable)!=null?v:l.props.closable}),c=$c(()=>{var v;return l.currentName.value===((v=t.name)!=null?v:i.value)}),d=A(c.value),f=S(()=>{var v;return(v=t.name)!=null?v:i.value}),h=$c(()=>!t.lazy||d.value||c.value),p=()=>{var v;return(v=r.value)==null?void 0:v.contains(document.activeElement)};pe(c,v=>{v&&(d.value=!0)});const m=Tt({uid:n.uid,getVnode:()=>n.vnode,slots:o,props:t,paneName:f,active:c,index:i,isClosable:u,isFocusInsidePane:p});return l.registerPane(m),Nt(()=>{l.unregisterPane(m)}),yv(()=>{var v;o.label&&((v=l.nav$.value)==null||v.scheduleRender())}),(v,g)=>s(h)?Xe((_(),F("div",{key:0,id:`pane-${s(f)}`,ref_key:"paneRef",ref:r,class:$(s(a).b()),role:"tabpanel","aria-hidden":!s(c),"aria-labelledby":`tab-${s(f)}`},[oe(v.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Et,s(c)]]):ae("v-if",!0)}});var q2=Ee(iY,[["__file","tab-pane.vue"]]);const uY=Qe(aY,{TabPane:q2}),cY=Xt(q2),dY=Ce({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:wl,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),fY=Y({name:"ElText"}),pY=Y({...fY,props:dY,setup(e){const t=e,n=A(),o=un(),l=ge("text"),a=S(()=>[l.b(),l.m(t.type),l.m(o.value),l.is("truncated",t.truncated),l.is("line-clamp",!bt(t.lineClamp))]),r=()=>{var i,u,c,d,f,h,p;if(Ul().title)return;let v=!1;const g=((i=n.value)==null?void 0:i.textContent)||"";if(t.truncated){const b=(u=n.value)==null?void 0:u.offsetWidth,C=(c=n.value)==null?void 0:c.scrollWidth;b&&C&&C>b&&(v=!0)}else if(!bt(t.lineClamp)){const b=(d=n.value)==null?void 0:d.offsetHeight,C=(f=n.value)==null?void 0:f.scrollHeight;b&&C&&C>b&&(v=!0)}v?(h=n.value)==null||h.setAttribute("title",g):(p=n.value)==null||p.removeAttribute("title")};return at(r),Jo(r),(i,u)=>(_(),ie(st(i.tag),{ref_key:"textRef",ref:n,class:$(s(a)),style:We({"-webkit-line-clamp":i.lineClamp})},{default:ee(()=>[oe(i.$slots,"default")]),_:3},8,["class","style"]))}});var vY=Ee(pY,[["__file","text.vue"]]);const rm=Qe(vY),hY=Ce({format:{type:String,default:"HH:mm"},modelValue:{type:Z(String)},disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:Z(String),default:"light"},clearable:{type:Boolean,default:!0},size:fn,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:{type:Z(String)},maxTime:{type:Z(String)},includeEndTime:Boolean,name:String,prefixIcon:{type:Z([String,Object]),default:()=>$C},clearIcon:{type:Z([String,Object]),default:()=>Gl},...pr}),Rl=e=>{const t=(e||"").split(":");if(t.length>=2){let n=Number.parseInt(t[0],10);const o=Number.parseInt(t[1],10),l=e.toUpperCase();return l.includes("AM")&&n===12?n=0:l.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:o}}return null},Mf=(e,t)=>{const n=Rl(e);if(!n)return-1;const o=Rl(t);if(!o)return-1;const l=n.minutes+n.hours*60,a=o.minutes+o.hours*60;return l===a?0:l>a?1:-1},Jy=e=>`${e}`.padStart(2,"0"),Nr=e=>`${Jy(e.hours)}:${Jy(e.minutes)}`,mY=(e,t)=>{const n=Rl(e);if(!n)return"";const o=Rl(t);if(!o)return"";const l={hours:n.hours,minutes:n.minutes};return l.minutes+=o.minutes,l.hours+=o.hours,l.hours+=Math.floor(l.minutes/60),l.minutes=l.minutes%60,Nr(l)},gY=Y({name:"ElTimeSelect"}),bY=Y({...gY,props:hY,emits:[vt,"blur","focus","clear",Ge],setup(e,{expose:t}){const n=e;et.extend(yh);const{Option:o}=lr,l=ge("input"),a=A(),r=mn(),{lang:i}=wt(),u=S(()=>n.modelValue),c=S(()=>{const b=Rl(n.start);return b?Nr(b):null}),d=S(()=>{const b=Rl(n.end);return b?Nr(b):null}),f=S(()=>{const b=Rl(n.step);return b?Nr(b):null}),h=S(()=>{const b=Rl(n.minTime||"");return b?Nr(b):null}),p=S(()=>{const b=Rl(n.maxTime||"");return b?Nr(b):null}),m=S(()=>{var b;const C=[],y=(w,E)=>{C.push({value:w,disabled:Mf(E,h.value||"-1:-1")<=0||Mf(E,p.value||"100:100")>=0})};if(n.start&&n.end&&n.step){let w=c.value,E;for(;w&&d.value&&Mf(w,d.value)<=0;)E=et(w,"HH:mm").locale(i.value).format(n.format),y(E,w),w=mY(w,f.value);if(n.includeEndTime&&d.value&&((b=C[C.length-1])==null?void 0:b.value)!==d.value){const k=et(d.value,"HH:mm").locale(i.value).format(n.format);y(k,d.value)}}return C});return t({blur:()=>{var b,C;(C=(b=a.value)==null?void 0:b.blur)==null||C.call(b)},focus:()=>{var b,C;(C=(b=a.value)==null?void 0:b.focus)==null||C.call(b)}}),(b,C)=>(_(),ie(s(lr),{ref_key:"select",ref:a,"model-value":s(u),disabled:s(r),clearable:b.clearable,"clear-icon":b.clearIcon,size:b.size,effect:b.effect,placeholder:b.placeholder,"default-first-option":"",filterable:b.editable,"empty-values":b.emptyValues,"value-on-clear":b.valueOnClear,"onUpdate:modelValue":y=>b.$emit(s(Ge),y),onChange:y=>b.$emit(s(vt),y),onBlur:y=>b.$emit("blur",y),onFocus:y=>b.$emit("focus",y),onClear:()=>b.$emit("clear")},{prefix:ee(()=>[b.prefixIcon?(_(),ie(s(Be),{key:0,class:$(s(l).e("prefix-icon"))},{default:ee(()=>[(_(),ie(st(b.prefixIcon)))]),_:1},8,["class"])):ae("v-if",!0)]),default:ee(()=>[(_(!0),F(ze,null,dt(s(m),y=>(_(),ie(s(o),{key:y.value,label:y.value,value:y.value,disabled:y.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var yY=Ee(bY,[["__file","time-select.vue"]]);const wY=Qe(yY),CY="timeline",SY=Y({name:"ElTimeline",setup(e,{slots:t}){const n=ge("timeline");return ht(CY,t),()=>qe("ul",{class:[n.b()]},[oe(t,"default")])}}),kY=Ce({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Mt},hollow:Boolean}),EY=Y({name:"ElTimelineItem"}),_Y=Y({...EY,props:kY,setup(e){const t=e,n=ge("timeline-item"),o=S(()=>[n.e("node"),n.em("node",t.size||""),n.em("node",t.type||""),n.is("hollow",t.hollow)]);return(l,a)=>(_(),F("li",{class:$([s(n).b(),{[s(n).e("center")]:l.center}])},[B("div",{class:$(s(n).e("tail"))},null,2),l.$slots.dot?ae("v-if",!0):(_(),F("div",{key:0,class:$(s(o)),style:We({backgroundColor:l.color})},[l.icon?(_(),ie(s(Be),{key:0,class:$(s(n).e("icon"))},{default:ee(()=>[(_(),ie(st(l.icon)))]),_:1},8,["class"])):ae("v-if",!0)],6)),l.$slots.dot?(_(),F("div",{key:1,class:$(s(n).e("dot"))},[oe(l.$slots,"dot")],2)):ae("v-if",!0),B("div",{class:$(s(n).e("wrapper"))},[!l.hideTimestamp&&l.placement==="top"?(_(),F("div",{key:0,class:$([s(n).e("timestamp"),s(n).is("top")])},we(l.timestamp),3)):ae("v-if",!0),B("div",{class:$(s(n).e("content"))},[oe(l.$slots,"default")],2),!l.hideTimestamp&&l.placement==="bottom"?(_(),F("div",{key:1,class:$([s(n).e("timestamp"),s(n).is("bottom")])},we(l.timestamp),3)):ae("v-if",!0)],2)],2))}});var Y2=Ee(_Y,[["__file","timeline-item.vue"]]);const TY=Qe(SY,{TimelineItem:Y2}),$Y=Xt(Y2),G2=Ce({nowrap:Boolean});var X2=(e=>(e.top="top",e.bottom="bottom",e.left="left",e.right="right",e))(X2||{});const OY=Object.values(X2),sm=Ce({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Z(Object),default:null}}),NY=Ce({side:{type:Z(String),values:OY,required:!0}}),IY=["absolute","fixed"],MY=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],im=Ce({arrowPadding:{type:Z(Number),default:5},effect:{type:Z(String),default:"light"},contentClass:String,placement:{type:Z(String),values:MY,default:"bottom"},reference:{type:Z(Object),default:null},offset:{type:Number,default:8},strategy:{type:Z(String),values:IY,default:"absolute"},showArrow:Boolean,...In(["ariaLabel"])}),um=Ce({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Z(Function)},"onUpdate:open":{type:Z(Function)}}),_r={type:Z(Function)},cm=Ce({onBlur:_r,onClick:_r,onFocus:_r,onMouseDown:_r,onMouseEnter:_r,onMouseLeave:_r}),PY=Ce({...um,...sm,...cm,...im,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Z(Object),default:null},teleported:Boolean,to:{type:Z([String,Object]),default:"body"}}),Bd=Symbol("tooltipV2"),J2=Symbol("tooltipV2Content"),Pf="tooltip_v2.open",RY=Y({name:"ElTooltipV2Root"}),xY=Y({...RY,props:um,setup(e,{expose:t}){const n=e,o=A(n.defaultOpen),l=A(null),a=S({get:()=>lo(n.open)?o.value:n.open,set:g=>{var b;o.value=g,(b=n["onUpdate:open"])==null||b.call(n,g)}}),r=S(()=>je(n.delayDuration)&&n.delayDuration>0),{start:i,stop:u}=nr(()=>{a.value=!0},S(()=>n.delayDuration),{immediate:!1}),c=ge("tooltip-v2"),d=kn(),f=()=>{u(),a.value=!0},h=()=>{s(r)?i():f()},p=f,m=()=>{u(),a.value=!1};return pe(a,g=>{var b;g&&(document.dispatchEvent(new CustomEvent(Pf)),p()),(b=n.onOpenChange)==null||b.call(n,g)}),at(()=>{document.addEventListener(Pf,m)}),Nt(()=>{u(),document.removeEventListener(Pf,m)}),ht(Bd,{contentId:d,triggerRef:l,ns:c,onClose:m,onDelayOpen:h,onOpen:p}),t({onOpen:p,onClose:m}),(g,b)=>oe(g.$slots,"default",{open:s(a)})}});var AY=Ee(xY,[["__file","root.vue"]]);const LY=Y({name:"ElTooltipV2Arrow"}),DY=Y({...LY,props:{...sm,...NY},setup(e){const t=e,{ns:n}=Re(Bd),{arrowRef:o}=Re(J2),l=S(()=>{const{style:a,width:r,height:i}=t,u=n.namespace.value;return{[`--${u}-tooltip-v2-arrow-width`]:`${r}px`,[`--${u}-tooltip-v2-arrow-height`]:`${i}px`,[`--${u}-tooltip-v2-arrow-border-width`]:`${r/2}px`,[`--${u}-tooltip-v2-arrow-cover-width`]:r/2-1,...a||{}}});return(a,r)=>(_(),F("span",{ref_key:"arrowRef",ref:o,style:We(s(l)),class:$(s(n).e("arrow"))},null,6))}});var Zy=Ee(DY,[["__file","arrow.vue"]]);const is=Math.min,Xa=Math.max,Uc=Math.round,Bu=Math.floor,pl=e=>({x:e,y:e}),BY={left:"right",right:"left",bottom:"top",top:"bottom"},FY={start:"end",end:"start"};function jp(e,t,n){return Xa(e,is(t,n))}function cu(e,t){return typeof e=="function"?e(t):e}function rr(e){return e.split("-")[0]}function du(e){return e.split("-")[1]}function Z2(e){return e==="x"?"y":"x"}function dm(e){return e==="y"?"height":"width"}const VY=new Set(["top","bottom"]);function fa(e){return VY.has(rr(e))?"y":"x"}function fm(e){return Z2(fa(e))}function zY(e,t,n){n===void 0&&(n=!1);const o=du(e),l=fm(e),a=dm(l);let r=l==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(r=qc(r)),[r,qc(r)]}function HY(e){const t=qc(e);return[Up(e),t,Up(t)]}function Up(e){return e.replace(/start|end/g,t=>FY[t])}const Qy=["left","right"],e0=["right","left"],KY=["top","bottom"],WY=["bottom","top"];function jY(e,t,n){switch(e){case"top":case"bottom":return n?t?e0:Qy:t?Qy:e0;case"left":case"right":return t?KY:WY;default:return[]}}function UY(e,t,n,o){const l=du(e);let a=jY(rr(e),n==="start",o);return l&&(a=a.map(r=>r+"-"+l),t&&(a=a.concat(a.map(Up)))),a}function qc(e){return e.replace(/left|right|bottom|top/g,t=>BY[t])}function qY(e){return{top:0,right:0,bottom:0,left:0,...e}}function Q2(e){return typeof e!="number"?qY(e):{top:e,right:e,bottom:e,left:e}}function Yc(e){const{x:t,y:n,width:o,height:l}=e;return{width:o,height:l,top:n,left:t,right:t+o,bottom:n+l,x:t,y:n}}function t0(e,t,n){let{reference:o,floating:l}=e;const a=fa(t),r=fm(t),i=dm(r),u=rr(t),c=a==="y",d=o.x+o.width/2-l.width/2,f=o.y+o.height/2-l.height/2,h=o[i]/2-l[i]/2;let p;switch(u){case"top":p={x:d,y:o.y-l.height};break;case"bottom":p={x:d,y:o.y+o.height};break;case"right":p={x:o.x+o.width,y:f};break;case"left":p={x:o.x-l.width,y:f};break;default:p={x:o.x,y:o.y}}switch(du(t)){case"start":p[r]-=h*(n&&c?-1:1);break;case"end":p[r]+=h*(n&&c?-1:1);break}return p}const YY=async(e,t,n)=>{const{placement:o="bottom",strategy:l="absolute",middleware:a=[],platform:r}=n,i=a.filter(Boolean),u=await(r.isRTL==null?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:l}),{x:d,y:f}=t0(c,o,u),h=o,p={},m=0;for(let v=0;v<i.length;v++){const{name:g,fn:b}=i[v],{x:C,y,data:w,reset:E}=await b({x:d,y:f,initialPlacement:o,placement:h,strategy:l,middlewareData:p,rects:c,platform:r,elements:{reference:e,floating:t}});d=C??d,f=y??f,p={...p,[g]:{...p[g],...w}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(c=E.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:l}):E.rects),{x:d,y:f}=t0(c,h,u)),v=-1)}return{x:d,y:f,placement:h,strategy:l,middlewareData:p}};async function pm(e,t){var n;t===void 0&&(t={});const{x:o,y:l,platform:a,rects:r,elements:i,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=cu(t,e),m=Q2(p),g=i[h?f==="floating"?"reference":"floating":f],b=Yc(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(g)))==null||n?g:g.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(i.floating)),boundary:c,rootBoundary:d,strategy:u})),C=f==="floating"?{x:o,y:l,width:r.floating.width,height:r.floating.height}:r.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(i.floating)),w=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},E=Yc(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:C,offsetParent:y,strategy:u}):C);return{top:(b.top-E.top+m.top)/w.y,bottom:(E.bottom-b.bottom+m.bottom)/w.y,left:(b.left-E.left+m.left)/w.x,right:(E.right-b.right+m.right)/w.x}}const GY=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:l,rects:a,platform:r,elements:i,middlewareData:u}=t,{element:c,padding:d=0}=cu(e,t)||{};if(c==null)return{};const f=Q2(d),h={x:n,y:o},p=fm(l),m=dm(p),v=await r.getDimensions(c),g=p==="y",b=g?"top":"left",C=g?"bottom":"right",y=g?"clientHeight":"clientWidth",w=a.reference[m]+a.reference[p]-h[p]-a.floating[m],E=h[p]-a.reference[p],k=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c));let T=k?k[y]:0;(!T||!await(r.isElement==null?void 0:r.isElement(k)))&&(T=i.floating[y]||a.floating[m]);const R=w/2-E/2,I=T/2-v[m]/2-1,O=is(f[b],I),M=is(f[C],I),P=O,W=T-v[m]-M,V=T/2-v[m]/2+R,q=jp(P,V,W),x=!u.arrow&&du(l)!=null&&V!==q&&a.reference[m]/2-(V<P?O:M)-v[m]/2<0,L=x?V<P?V-P:V-W:0;return{[p]:h[p]+L,data:{[p]:q,centerOffset:V-q-L,...x&&{alignmentOffset:L}},reset:x}}}),XY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:l,middlewareData:a,rects:r,initialPlacement:i,platform:u,elements:c}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...g}=cu(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=rr(l),C=fa(i),y=rr(i)===i,w=await(u.isRTL==null?void 0:u.isRTL(c.floating)),E=h||(y||!v?[qc(i)]:HY(i)),k=m!=="none";!h&&k&&E.push(...UY(i,v,m,w));const T=[i,...E],R=await pm(t,g),I=[];let O=((o=a.flip)==null?void 0:o.overflows)||[];if(d&&I.push(R[b]),f){const V=zY(l,r,w);I.push(R[V[0]],R[V[1]])}if(O=[...O,{placement:l,overflows:I}],!I.every(V=>V<=0)){var M,P;const V=(((M=a.flip)==null?void 0:M.index)||0)+1,q=T[V];if(q&&(!(f==="alignment"?C!==fa(q):!1)||O.every(N=>fa(N.placement)===C?N.overflows[0]>0:!0)))return{data:{index:V,overflows:O},reset:{placement:q}};let x=(P=O.filter(L=>L.overflows[0]<=0).sort((L,N)=>L.overflows[1]-N.overflows[1])[0])==null?void 0:P.placement;if(!x)switch(p){case"bestFit":{var W;const L=(W=O.filter(N=>{if(k){const D=fa(N.placement);return D===C||D==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(D=>D>0).reduce((D,z)=>D+z,0)]).sort((N,D)=>N[1]-D[1])[0])==null?void 0:W[0];L&&(x=L);break}case"initialPlacement":x=i;break}if(l!==x)return{reset:{placement:x}}}return{}}}},JY=new Set(["left","top"]);async function ZY(e,t){const{placement:n,platform:o,elements:l}=e,a=await(o.isRTL==null?void 0:o.isRTL(l.floating)),r=rr(n),i=du(n),u=fa(n)==="y",c=JY.has(r)?-1:1,d=a&&u?-1:1,f=cu(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return i&&typeof m=="number"&&(p=i==="end"?m*-1:m),u?{x:p*d,y:h*c}:{x:h*c,y:p*d}}const QY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:l,y:a,placement:r,middlewareData:i}=t,u=await ZY(t,e);return r===((n=i.offset)==null?void 0:n.placement)&&(o=i.arrow)!=null&&o.alignmentOffset?{}:{x:l+u.x,y:a+u.y,data:{...u,placement:r}}}}},eG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:l}=t,{mainAxis:a=!0,crossAxis:r=!1,limiter:i={fn:g=>{let{x:b,y:C}=g;return{x:b,y:C}}},...u}=cu(e,t),c={x:n,y:o},d=await pm(t,u),f=fa(rr(l)),h=Z2(f);let p=c[h],m=c[f];if(a){const g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",C=p+d[g],y=p-d[b];p=jp(C,p,y)}if(r){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",C=m+d[g],y=m-d[b];m=jp(C,m,y)}const v=i.fn({...t,[h]:p,[f]:m});return{...v,data:{x:v.x-n,y:v.y-o,enabled:{[h]:a,[f]:r}}}}}};function Fd(){return typeof window<"u"}function $s(e){return eE(e)?(e.nodeName||"").toLowerCase():"#document"}function bo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Sl(e){var t;return(t=(eE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function eE(e){return Fd()?e instanceof Node||e instanceof bo(e).Node:!1}function Go(e){return Fd()?e instanceof Element||e instanceof bo(e).Element:!1}function bl(e){return Fd()?e instanceof HTMLElement||e instanceof bo(e).HTMLElement:!1}function n0(e){return!Fd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof bo(e).ShadowRoot}const tG=new Set(["inline","contents"]);function fu(e){const{overflow:t,overflowX:n,overflowY:o,display:l}=Xo(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!tG.has(l)}const nG=new Set(["table","td","th"]);function oG(e){return nG.has($s(e))}const lG=[":popover-open",":modal"];function Vd(e){return lG.some(t=>{try{return e.matches(t)}catch{return!1}})}const aG=["transform","translate","scale","rotate","perspective"],rG=["transform","translate","scale","rotate","perspective","filter"],sG=["paint","layout","strict","content"];function vm(e){const t=hm(),n=Go(e)?Xo(e):e;return aG.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||rG.some(o=>(n.willChange||"").includes(o))||sG.some(o=>(n.contain||"").includes(o))}function iG(e){let t=Ta(e);for(;bl(t)&&!us(t);){if(vm(t))return t;if(Vd(t))return null;t=Ta(t)}return null}function hm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uG=new Set(["html","body","#document"]);function us(e){return uG.has($s(e))}function Xo(e){return bo(e).getComputedStyle(e)}function zd(e){return Go(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ta(e){if($s(e)==="html")return e;const t=e.assignedSlot||e.parentNode||n0(e)&&e.host||Sl(e);return n0(t)?t.host:t}function tE(e){const t=Ta(e);return us(t)?e.ownerDocument?e.ownerDocument.body:e.body:bl(t)&&fu(t)?t:tE(t)}function Li(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const l=tE(e),a=l===((o=e.ownerDocument)==null?void 0:o.body),r=bo(l);if(a){const i=qp(r);return t.concat(r,r.visualViewport||[],fu(l)?l:[],i&&n?Li(i):[])}return t.concat(l,Li(l,[],n))}function qp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function nE(e){const t=Xo(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const l=bl(e),a=l?e.offsetWidth:n,r=l?e.offsetHeight:o,i=Uc(n)!==a||Uc(o)!==r;return i&&(n=a,o=r),{width:n,height:o,$:i}}function mm(e){return Go(e)?e:e.contextElement}function Wr(e){const t=mm(e);if(!bl(t))return pl(1);const n=t.getBoundingClientRect(),{width:o,height:l,$:a}=nE(t);let r=(a?Uc(n.width):n.width)/o,i=(a?Uc(n.height):n.height)/l;return(!r||!Number.isFinite(r))&&(r=1),(!i||!Number.isFinite(i))&&(i=1),{x:r,y:i}}const cG=pl(0);function oE(e){const t=bo(e);return!hm()||!t.visualViewport?cG:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dG(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==bo(e)?!1:t}function sr(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const l=e.getBoundingClientRect(),a=mm(e);let r=pl(1);t&&(o?Go(o)&&(r=Wr(o)):r=Wr(e));const i=dG(a,n,o)?oE(a):pl(0);let u=(l.left+i.x)/r.x,c=(l.top+i.y)/r.y,d=l.width/r.x,f=l.height/r.y;if(a){const h=bo(a),p=o&&Go(o)?bo(o):o;let m=h,v=qp(m);for(;v&&o&&p!==m;){const g=Wr(v),b=v.getBoundingClientRect(),C=Xo(v),y=b.left+(v.clientLeft+parseFloat(C.paddingLeft))*g.x,w=b.top+(v.clientTop+parseFloat(C.paddingTop))*g.y;u*=g.x,c*=g.y,d*=g.x,f*=g.y,u+=y,c+=w,m=bo(v),v=qp(m)}}return Yc({width:d,height:f,x:u,y:c})}function Hd(e,t){const n=zd(e).scrollLeft;return t?t.left+n:sr(Sl(e)).left+n}function lE(e,t){const n=e.getBoundingClientRect(),o=n.left+t.scrollLeft-Hd(e,n),l=n.top+t.scrollTop;return{x:o,y:l}}function fG(e){let{elements:t,rect:n,offsetParent:o,strategy:l}=e;const a=l==="fixed",r=Sl(o),i=t?Vd(t.floating):!1;if(o===r||i&&a)return n;let u={scrollLeft:0,scrollTop:0},c=pl(1);const d=pl(0),f=bl(o);if((f||!f&&!a)&&(($s(o)!=="body"||fu(r))&&(u=zd(o)),bl(o))){const p=sr(o);c=Wr(o),d.x=p.x+o.clientLeft,d.y=p.y+o.clientTop}const h=r&&!f&&!a?lE(r,u):pl(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-u.scrollTop*c.y+d.y+h.y}}function pG(e){return Array.from(e.getClientRects())}function vG(e){const t=Sl(e),n=zd(e),o=e.ownerDocument.body,l=Xa(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),a=Xa(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let r=-n.scrollLeft+Hd(e);const i=-n.scrollTop;return Xo(o).direction==="rtl"&&(r+=Xa(t.clientWidth,o.clientWidth)-l),{width:l,height:a,x:r,y:i}}const o0=25;function hG(e,t){const n=bo(e),o=Sl(e),l=n.visualViewport;let a=o.clientWidth,r=o.clientHeight,i=0,u=0;if(l){a=l.width,r=l.height;const d=hm();(!d||d&&t==="fixed")&&(i=l.offsetLeft,u=l.offsetTop)}const c=Hd(o);if(c<=0){const d=o.ownerDocument,f=d.body,h=getComputedStyle(f),p=d.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,m=Math.abs(o.clientWidth-f.clientWidth-p);m<=o0&&(a-=m)}else c<=o0&&(a+=c);return{width:a,height:r,x:i,y:u}}const mG=new Set(["absolute","fixed"]);function gG(e,t){const n=sr(e,!0,t==="fixed"),o=n.top+e.clientTop,l=n.left+e.clientLeft,a=bl(e)?Wr(e):pl(1),r=e.clientWidth*a.x,i=e.clientHeight*a.y,u=l*a.x,c=o*a.y;return{width:r,height:i,x:u,y:c}}function l0(e,t,n){let o;if(t==="viewport")o=hG(e,n);else if(t==="document")o=vG(Sl(e));else if(Go(t))o=gG(t,n);else{const l=oE(e);o={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return Yc(o)}function aE(e,t){const n=Ta(e);return n===t||!Go(n)||us(n)?!1:Xo(n).position==="fixed"||aE(n,t)}function bG(e,t){const n=t.get(e);if(n)return n;let o=Li(e,[],!1).filter(i=>Go(i)&&$s(i)!=="body"),l=null;const a=Xo(e).position==="fixed";let r=a?Ta(e):e;for(;Go(r)&&!us(r);){const i=Xo(r),u=vm(r);!u&&i.position==="fixed"&&(l=null),(a?!u&&!l:!u&&i.position==="static"&&!!l&&mG.has(l.position)||fu(r)&&!u&&aE(e,r))?o=o.filter(d=>d!==r):l=i,r=Ta(r)}return t.set(e,o),o}function yG(e){let{element:t,boundary:n,rootBoundary:o,strategy:l}=e;const r=[...n==="clippingAncestors"?Vd(t)?[]:bG(t,this._c):[].concat(n),o],i=r[0],u=r.reduce((c,d)=>{const f=l0(t,d,l);return c.top=Xa(f.top,c.top),c.right=is(f.right,c.right),c.bottom=is(f.bottom,c.bottom),c.left=Xa(f.left,c.left),c},l0(t,i,l));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function wG(e){const{width:t,height:n}=nE(e);return{width:t,height:n}}function CG(e,t,n){const o=bl(t),l=Sl(t),a=n==="fixed",r=sr(e,!0,a,t);let i={scrollLeft:0,scrollTop:0};const u=pl(0);function c(){u.x=Hd(l)}if(o||!o&&!a)if(($s(t)!=="body"||fu(l))&&(i=zd(t)),o){const p=sr(t,!0,a,t);u.x=p.x+t.clientLeft,u.y=p.y+t.clientTop}else l&&c();a&&!o&&l&&c();const d=l&&!o&&!a?lE(l,i):pl(0),f=r.left+i.scrollLeft-u.x-d.x,h=r.top+i.scrollTop-u.y-d.y;return{x:f,y:h,width:r.width,height:r.height}}function Rf(e){return Xo(e).position==="static"}function a0(e,t){if(!bl(e)||Xo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Sl(e)===n&&(n=n.ownerDocument.body),n}function rE(e,t){const n=bo(e);if(Vd(e))return n;if(!bl(e)){let l=Ta(e);for(;l&&!us(l);){if(Go(l)&&!Rf(l))return l;l=Ta(l)}return n}let o=a0(e,t);for(;o&&oG(o)&&Rf(o);)o=a0(o,t);return o&&us(o)&&Rf(o)&&!vm(o)?n:o||iG(e)||n}const SG=async function(e){const t=this.getOffsetParent||rE,n=this.getDimensions,o=await n(e.floating);return{reference:CG(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function kG(e){return Xo(e).direction==="rtl"}const EG={convertOffsetParentRelativeRectToViewportRelativeRect:fG,getDocumentElement:Sl,getClippingRect:yG,getOffsetParent:rE,getElementRects:SG,getClientRects:pG,getDimensions:wG,getScale:Wr,isElement:Go,isRTL:kG};function sE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function _G(e,t){let n=null,o;const l=Sl(e);function a(){var i;clearTimeout(o),(i=n)==null||i.disconnect(),n=null}function r(i,u){i===void 0&&(i=!1),u===void 0&&(u=1),a();const c=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=c;if(i||t(),!h||!p)return;const m=Bu(f),v=Bu(l.clientWidth-(d+h)),g=Bu(l.clientHeight-(f+p)),b=Bu(d),y={rootMargin:-m+"px "+-v+"px "+-g+"px "+-b+"px",threshold:Xa(0,is(1,u))||1};let w=!0;function E(k){const T=k[0].intersectionRatio;if(T!==u){if(!w)return r();T?r(!1,T):o=setTimeout(()=>{r(!1,1e-7)},1e3)}T===1&&!sE(c,e.getBoundingClientRect())&&r(),w=!1}try{n=new IntersectionObserver(E,{...y,root:l.ownerDocument})}catch{n=new IntersectionObserver(E,y)}n.observe(e)}return r(!0),a}function TG(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:l=!0,ancestorResize:a=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:u=!1}=o,c=mm(e),d=l||a?[...c?Li(c):[],...Li(t)]:[];d.forEach(b=>{l&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const f=c&&i?_G(c,n):null;let h=-1,p=null;r&&(p=new ResizeObserver(b=>{let[C]=b;C&&C.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=p)==null||y.observe(t)})),n()}),c&&!u&&p.observe(c),p.observe(t));let m,v=u?sr(e):null;u&&g();function g(){const b=sr(e);v&&!sE(v,b)&&n(),v=b,m=requestAnimationFrame(g)}return n(),()=>{var b;d.forEach(C=>{l&&C.removeEventListener("scroll",n),a&&C.removeEventListener("resize",n)}),f==null||f(),(b=p)==null||b.disconnect(),p=null,u&&cancelAnimationFrame(m)}}const $G=pm,iE=QY,OG=eG,NG=XY,uE=GY,cE=(e,t,n)=>{const o=new Map,l={platform:EG,...n},a={...l.platform,_c:o};return YY(e,t,{...l,platform:a})},IG=Ce({style:{type:Z([String,Object,Array]),default:()=>({})}}),MG=Y({name:"ElVisuallyHidden"}),PG=Y({...MG,props:IG,setup(e){const t=e,n=S(()=>[t.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(o,l)=>(_(),F("span",ot(o.$attrs,{style:s(n)}),[oe(o.$slots,"default")],16))}});var RG=Ee(PG,[["__file","visual-hidden.vue"]]);Ce({});const xG=e=>{if(!kt)return;if(!e)return e;const t=vn(e);return t||(Kt(e)?t:e)},AG=({middleware:e,placement:t,strategy:n})=>{const o=A(),l=A(),a=A(),r=A(),i=A({}),u={x:a,y:r,placement:t,strategy:n,middlewareData:i},c=async()=>{if(!kt)return;const d=xG(o),f=vn(l);if(!d||!f)return;const h=await cE(d,f,{placement:s(t),strategy:s(n),middleware:s(e)});Jr(u).forEach(p=>{u[p].value=h[p]})};return at(()=>{Vn(()=>{c()})}),{...u,update:c,referenceRef:o,contentRef:l}},LG=({arrowRef:e,padding:t})=>({name:"arrow",options:{element:e,padding:t},fn(n){const o=s(e);return o?uE({element:o,padding:t}).fn(n):{}}}),DG=Y({name:"ElTooltipV2Content"}),BG=Y({...DG,props:{...im,...G2},setup(e){const t=e,{triggerRef:n,contentId:o}=Re(Bd),l=A(t.placement),a=A(t.strategy),r=A(null),{referenceRef:i,contentRef:u,middlewareData:c,x:d,y:f,update:h}=AG({placement:l,strategy:a,middleware:S(()=>{const y=[iE(t.offset)];return t.showArrow&&y.push(LG({arrowRef:r})),y})}),p=Ss().nextZIndex(),m=ge("tooltip-v2"),v=S(()=>l.value.split("-")[0]),g=S(()=>({position:s(a),top:`${s(f)||0}px`,left:`${s(d)||0}px`,zIndex:p})),b=S(()=>{if(!t.showArrow)return{};const{arrow:y}=s(c);return{[`--${m.namespace.value}-tooltip-v2-arrow-x`]:`${y==null?void 0:y.x}px`||"",[`--${m.namespace.value}-tooltip-v2-arrow-y`]:`${y==null?void 0:y.y}px`||""}}),C=S(()=>[m.e("content"),m.is("dark",t.effect==="dark"),m.is(s(a)),t.contentClass]);return pe(r,()=>h()),pe(()=>t.placement,y=>l.value=y),at(()=>{pe(()=>t.reference||n.value,y=>{i.value=y||void 0},{immediate:!0})}),ht(J2,{arrowRef:r}),(y,w)=>(_(),F("div",{ref_key:"contentRef",ref:u,style:We(s(g)),"data-tooltip-v2-root":""},[y.nowrap?ae("v-if",!0):(_(),F("div",{key:0,"data-side":s(v),class:$(s(C))},[oe(y.$slots,"default",{contentStyle:s(g),contentClass:s(C)}),J(s(RG),{id:s(o),role:"tooltip"},{default:ee(()=>[y.ariaLabel?(_(),F(ze,{key:0},[gt(we(y.ariaLabel),1)],64)):oe(y.$slots,"default",{key:1})]),_:3},8,["id"]),oe(y.$slots,"arrow",{style:We(s(b)),side:s(v)})],10,["data-side"]))],4))}});var r0=Ee(BG,[["__file","content.vue"]]);const FG=Ce({setRef:{type:Z(Function),required:!0},onlyChild:Boolean});var VG=Y({props:FG,setup(e,{slots:t}){const n=A(),o=xd(n,l=>{l?e.setRef(l.nextElementSibling):e.setRef(null)});return()=>{var l;const[a]=((l=t.default)==null?void 0:l.call(t))||[],r=e.onlyChild?K8(a.children):a.children;return J(ze,{ref:o},[r])}}});const zG=Y({name:"ElTooltipV2Trigger"}),HG=Y({...zG,props:{...G2,...cm},setup(e){const t=e,{onClose:n,onOpen:o,onDelayOpen:l,triggerRef:a,contentId:r}=Re(Bd);let i=!1;const u=C=>{a.value=C},c=()=>{i=!1},d=nn(t.onMouseEnter,l),f=nn(t.onMouseLeave,n),h=nn(t.onMouseDown,()=>{n(),i=!0,document.addEventListener("mouseup",c,{once:!0})}),p=nn(t.onFocus,()=>{i||o()}),m=nn(t.onBlur,n),v=nn(t.onClick,C=>{C.detail===0&&n()}),g={blur:m,click:v,focus:p,mousedown:h,mouseenter:d,mouseleave:f},b=(C,y,w)=>{C&&Object.entries(y).forEach(([E,k])=>{C[w](E,k)})};return pe(a,(C,y)=>{b(C,g,"addEventListener"),b(y,g,"removeEventListener"),C&&C.setAttribute("aria-describedby",r.value)}),Nt(()=>{b(a.value,g,"removeEventListener"),document.removeEventListener("mouseup",c)}),(C,y)=>C.nowrap?(_(),ie(s(VG),{key:0,"set-ref":u,"only-child":""},{default:ee(()=>[oe(C.$slots,"default")]),_:3})):(_(),F("button",ot({key:1,ref_key:"triggerRef",ref:a},C.$attrs),[oe(C.$slots,"default")],16))}});var KG=Ee(HG,[["__file","trigger.vue"]]);const WG=Y({name:"ElTooltipV2"}),jG=Y({...WG,props:PY,setup(e){const n=hn(e),o=Tt(po(n,Object.keys(sm))),l=Tt(po(n,Object.keys(im))),a=Tt(po(n,Object.keys(um))),r=Tt(po(n,Object.keys(cm)));return(i,u)=>(_(),ie(AY,Yn(Ho(a)),{default:ee(({open:c})=>[J(KG,ot(r,{nowrap:""}),{default:ee(()=>[oe(i.$slots,"trigger")]),_:3},16),J(s(Es),{to:i.to,disabled:!i.teleported},{default:ee(()=>[i.fullTransition?(_(),ie(Cn,Yn(ot({key:0},i.transitionProps)),{default:ee(()=>[i.alwaysOn||c?(_(),ie(r0,Yn(ot({key:0},l)),{arrow:ee(({style:d,side:f})=>[i.showArrow?(_(),ie(Zy,ot({key:0},o,{style:d,side:f}),null,16,["style","side"])):ae("v-if",!0)]),default:ee(()=>[oe(i.$slots,"default")]),_:3},16)):ae("v-if",!0)]),_:2},1040)):(_(),F(ze,{key:1},[i.alwaysOn||c?(_(),ie(r0,Yn(ot({key:0},l)),{arrow:ee(({style:d,side:f})=>[i.showArrow?(_(),ie(Zy,ot({key:0},o,{style:d,side:f}),null,16,["style","side"])):ae("v-if",!0)]),default:ee(()=>[oe(i.$slots,"default")]),_:3},16)):ae("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var UG=Ee(jG,[["__file","tooltip.vue"]]);const qG=Qe(UG),dE="left-check-change",fE="right-check-change",Ir=Ce({data:{type:Z(Array),default:()=>[]},titles:{type:Z(Array),default:()=>[]},buttonTexts:{type:Z(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Z(Function)},leftDefaultChecked:{type:Z(Array),default:()=>[]},rightDefaultChecked:{type:Z(Array),default:()=>[]},renderContent:{type:Z(Function)},modelValue:{type:Z(Array),default:()=>[]},format:{type:Z(Object),default:()=>({})},filterable:Boolean,props:{type:Z(Object),default:()=>Gt({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),Yp=(e,t)=>[e,t].every(be)||be(e)&&rn(t),YG={[vt]:(e,t,n)=>[e,n].every(be)&&["left","right"].includes(t),[Ge]:e=>be(e),[dE]:Yp,[fE]:Yp},Gp="checked-change",GG=Ce({data:Ir.data,optionRender:{type:Z(Function)},placeholder:String,title:String,filterable:Boolean,format:Ir.format,filterMethod:Ir.filterMethod,defaultChecked:Ir.leftDefaultChecked,props:Ir.props}),XG={[Gp]:Yp},pu=e=>{const t={label:"label",key:"key",disabled:"disabled"};return S(()=>({...t,...e.props}))},JG=(e,t,n)=>{const o=pu(e),l=S(()=>e.data.filter(d=>Ke(e.filterMethod)?e.filterMethod(t.query,d):String(d[o.value.label]||d[o.value.key]).toLowerCase().includes(t.query.toLowerCase()))),a=S(()=>l.value.filter(d=>!d[o.value.disabled])),r=S(()=>{const d=t.checked.length,f=e.data.length,{noChecked:h,hasChecked:p}=e.format;return h&&p?d>0?p.replace(/\${checked}/g,d.toString()).replace(/\${total}/g,f.toString()):h.replace(/\${total}/g,f.toString()):`${d}/${f}`}),i=S(()=>{const d=t.checked.length;return d>0&&d<a.value.length}),u=()=>{const d=a.value.map(f=>f[o.value.key]);t.allChecked=d.length>0&&d.every(f=>t.checked.includes(f))},c=d=>{t.checked=d?a.value.map(f=>f[o.value.key]):[]};return pe(()=>t.checked,(d,f)=>{if(u(),t.checkChangeByUser){const h=d.concat(f).filter(p=>!d.includes(p)||!f.includes(p));n(Gp,d,h)}else n(Gp,d),t.checkChangeByUser=!0}),pe(a,()=>{u()}),pe(()=>e.data,()=>{const d=[],f=l.value.map(h=>h[o.value.key]);t.checked.forEach(h=>{f.includes(h)&&d.push(h)}),t.checkChangeByUser=!1,t.checked=d}),pe(()=>e.defaultChecked,(d,f)=>{if(f&&d.length===f.length&&d.every(m=>f.includes(m)))return;const h=[],p=a.value.map(m=>m[o.value.key]);d.forEach(m=>{p.includes(m)&&h.push(m)}),t.checkChangeByUser=!1,t.checked=h},{immediate:!0}),{filteredData:l,checkableData:a,checkedSummary:r,isIndeterminate:i,updateAllChecked:u,handleAllCheckedChange:c}},ZG=Y({name:"ElTransferPanel"}),QG=Y({...ZG,props:GG,emits:XG,setup(e,{expose:t,emit:n}){const o=e,l=cn(),a=({option:y})=>y,{t:r}=wt(),i=ge("transfer"),u=Tt({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=pu(o),{filteredData:d,checkedSummary:f,isIndeterminate:h,handleAllCheckedChange:p}=JG(o,u,n),m=S(()=>!co(u.query)&&co(d.value)),v=S(()=>!co(l.default()[0].children)),{checked:g,allChecked:b,query:C}=hn(u);return t({query:C}),(y,w)=>(_(),F("div",{class:$(s(i).b("panel"))},[B("p",{class:$(s(i).be("panel","header"))},[J(s(xo),{modelValue:s(b),"onUpdate:modelValue":E=>Kt(b)?b.value=E:null,indeterminate:s(h),"validate-event":!1,onChange:s(p)},{default:ee(()=>[gt(we(y.title)+" ",1),B("span",null,we(s(f)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),B("div",{class:$([s(i).be("panel","body"),s(i).is("with-footer",s(v))])},[y.filterable?(_(),ie(s(Fn),{key:0,modelValue:s(C),"onUpdate:modelValue":E=>Kt(C)?C.value=E:null,class:$(s(i).be("panel","filter")),size:"default",placeholder:y.placeholder,"prefix-icon":s(a3),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):ae("v-if",!0),Xe(J(s(IS),{modelValue:s(g),"onUpdate:modelValue":E=>Kt(g)?g.value=E:null,"validate-event":!1,class:$([s(i).is("filterable",y.filterable),s(i).be("panel","list")])},{default:ee(()=>[(_(!0),F(ze,null,dt(s(d),E=>(_(),ie(s(xo),{key:E[s(c).key],class:$(s(i).be("panel","item")),value:E[s(c).key],disabled:E[s(c).disabled],"validate-event":!1},{default:ee(()=>{var k;return[J(a,{option:(k=y.optionRender)==null?void 0:k.call(y,E)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[Et,!s(m)&&!s(co)(y.data)]]),Xe(B("div",{class:$(s(i).be("panel","empty"))},[oe(y.$slots,"empty",{},()=>[gt(we(s(m)?s(r)("el.transfer.noMatch"):s(r)("el.transfer.noData")),1)])],2),[[Et,s(m)||s(co)(y.data)]])],2),s(v)?(_(),F("p",{key:0,class:$(s(i).be("panel","footer"))},[oe(y.$slots,"default")],2)):ae("v-if",!0)],2))}});var s0=Ee(QG,[["__file","transfer-panel.vue"]]);const eX=e=>{const t=pu(e),n=S(()=>e.data.reduce((a,r)=>(a[r[t.value.key]]=r)&&a,{})),o=S(()=>e.data.filter(a=>!e.modelValue.includes(a[t.value.key]))),l=S(()=>e.targetOrder==="original"?e.data.filter(a=>e.modelValue.includes(a[t.value.key])):e.modelValue.reduce((a,r)=>{const i=n.value[r];return i&&a.push(i),a},[]));return{sourceData:o,targetData:l}},tX=(e,t,n)=>{const o=pu(e),l=(i,u,c)=>{n(Ge,i),n(vt,i,u,c)};return{addToLeft:()=>{const i=e.modelValue.slice();t.rightChecked.forEach(u=>{const c=i.indexOf(u);c>-1&&i.splice(c,1)}),l(i,"left",t.rightChecked)},addToRight:()=>{let i=e.modelValue.slice();const u=e.data.filter(c=>{const d=c[o.value.key];return t.leftChecked.includes(d)&&!e.modelValue.includes(d)}).map(c=>c[o.value.key]);i=e.targetOrder==="unshift"?u.concat(i):i.concat(u),e.targetOrder==="original"&&(i=e.data.filter(c=>i.includes(c[o.value.key])).map(c=>c[o.value.key])),l(i,"right",t.leftChecked)}}},nX=(e,t)=>({onSourceCheckedChange:(l,a)=>{e.leftChecked=l,a&&t(dE,l,a)},onTargetCheckedChange:(l,a)=>{e.rightChecked=l,a&&t(fE,l,a)}}),oX=Y({name:"ElTransfer"}),lX=Y({...oX,props:Ir,emits:YG,setup(e,{expose:t,emit:n}){const o=e,l=cn(),{t:a}=wt(),r=ge("transfer"),{formItem:i}=_n(),u=Tt({leftChecked:[],rightChecked:[]}),c=pu(o),{sourceData:d,targetData:f}=eX(o),{onSourceCheckedChange:h,onTargetCheckedChange:p}=nX(u,n),{addToLeft:m,addToRight:v}=tX(o,u,n),g=A(),b=A(),C=R=>{switch(R){case"left":g.value.query="";break;case"right":b.value.query="";break}},y=S(()=>o.buttonTexts.length===2),w=S(()=>o.titles[0]||a("el.transfer.titles.0")),E=S(()=>o.titles[1]||a("el.transfer.titles.1")),k=S(()=>o.filterPlaceholder||a("el.transfer.filterPlaceholder"));pe(()=>o.modelValue,()=>{var R;o.validateEvent&&((R=i==null?void 0:i.validate)==null||R.call(i,"change").catch(I=>void 0))});const T=S(()=>R=>{var I;if(o.renderContent)return o.renderContent(qe,R);const O=(((I=l.default)==null?void 0:I.call(l,{option:R}))||[]).filter(M=>M.type!==ln);return O.length?O:qe("span",R[c.value.label]||R[c.value.key])});return t({clearQuery:C,leftPanel:g,rightPanel:b}),(R,I)=>(_(),F("div",{class:$(s(r).b())},[J(s0,{ref_key:"leftPanel",ref:g,data:s(d),"option-render":s(T),placeholder:s(k),title:s(w),filterable:R.filterable,format:R.format,"filter-method":R.filterMethod,"default-checked":R.leftDefaultChecked,props:o.props,onCheckedChange:s(h)},{empty:ee(()=>[oe(R.$slots,"left-empty")]),default:ee(()=>[oe(R.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),B("div",{class:$(s(r).e("buttons"))},[J(s(yn),{type:"primary",class:$([s(r).e("button"),s(r).is("with-texts",s(y))]),disabled:s(co)(u.rightChecked),onClick:s(m)},{default:ee(()=>[J(s(Be),null,{default:ee(()=>[J(s(Vl))]),_:1}),s(bt)(R.buttonTexts[0])?ae("v-if",!0):(_(),F("span",{key:0},we(R.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),J(s(yn),{type:"primary",class:$([s(r).e("button"),s(r).is("with-texts",s(y))]),disabled:s(co)(u.leftChecked),onClick:s(v)},{default:ee(()=>[s(bt)(R.buttonTexts[1])?ae("v-if",!0):(_(),F("span",{key:0},we(R.buttonTexts[1]),1)),J(s(Be),null,{default:ee(()=>[J(s(Hn))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),J(s0,{ref_key:"rightPanel",ref:b,data:s(f),"option-render":s(T),placeholder:s(k),filterable:R.filterable,format:R.format,"filter-method":R.filterMethod,title:s(E),"default-checked":R.rightDefaultChecked,props:o.props,onCheckedChange:s(p)},{empty:ee(()=>[oe(R.$slots,"right-empty")]),default:ee(()=>[oe(R.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var aX=Ee(lX,[["__file","transfer.vue"]]);const rX=Qe(aX),jr="$treeNodeId",i0=function(e,t){!t||t[jr]||Object.defineProperty(t,jr,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},gm=(e,t)=>t==null?void 0:t[e||jr],Xp=(e,t,n)=>{const o=e.value.currentNode;n();const l=e.value.currentNode;o!==l&&t("current-change",l?l.data:null,l)},Jp=e=>{let t=!0,n=!0,o=!0;for(let l=0,a=e.length;l<a;l++){const r=e[l];(r.checked!==!0||r.indeterminate)&&(t=!1,r.disabled||(o=!1)),(r.checked!==!1||r.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:o,half:!t&&!n}},Hs=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:n,half:o}=Jp(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):o?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const l=e.parent;!l||l.level===0||e.store.checkStrictly||Hs(l)},Fu=function(e,t){const n=e.store.props,o=e.data||{},l=n[t];if(Ke(l))return l(o,e);if(Fe(l))return o[l];if(bt(l)){const a=o[t];return bt(a)?"":a}},Zp=function(e,t){e.forEach(n=>{n.canFocus=t,Zp(n.childNodes,t)})};let sX=0,Qp=class ic{constructor(t){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=sX++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)$t(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var t;const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const o=n.props;if(o&&typeof o.isLeaf<"u"){const r=Fu(this,"isLeaf");xt(r)&&(this.isLeafByUser=r)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),be(this.data)||i0(this,this.data),!this.data)return;const l=n.defaultExpandedKeys,a=n.key;a&&!rn(this.key)&&l&&l.includes(this.key)&&this.expand(null,n.autoExpandParent),a&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((t=this.parent)==null?void 0:t.expanded)===!0)&&(this.canFocus=!0)}setData(t){be(t)||i0(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&be(this.data)?n=this.data:n=Fu(this,"children")||[];for(let o=0,l=n.length;o<l;o++)this.insertChild({data:n[o]})}get label(){return Fu(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return Fu(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(o=>o===t||n&&o.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,o){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof ic)){if(!o){const l=this.getChildren(!0);l!=null&&l.includes(t.data)||(bt(n)||n<0?l==null||l.push(t.data):l==null||l.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=Tt(new ic(t)),t instanceof ic&&t.initialize()}t.level=this.level+1,bt(n)||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let o;n&&(o=this.childNodes.indexOf(n)),this.insertChild(t,o)}insertAfter(t,n){let o;n&&(o=this.childNodes.indexOf(n),o!==-1&&(o+=1)),this.insertChild(t,o)}removeChild(t){const n=this.getChildren()||[],o=n.indexOf(t.data);o>-1&&n.splice(o,1);const l=this.childNodes.indexOf(t);l>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(l,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let o=0;o<this.childNodes.length;o++)if(this.childNodes[o].data===t){n=this.childNodes[o];break}n&&this.removeChild(n)}expand(t,n){const o=()=>{if(n){let l=this.parent;for(;l&&l.level>0;)l.expanded=!0,l=l.parent}this.expanded=!0,t&&t(),Zp(this.childNodes,!0)};this.shouldLoadData()?this.loadData(l=>{be(l)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Hs(this),o())}):o()}doCreateChildren(t,n={}){t.forEach(o=>{this.insertChild(Object.assign({data:o},n),void 0,!0)})}collapse(){this.expanded=!1,Zp(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,o,l){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:r,allWithoutDisable:i}=Jp(this.childNodes);!this.isLeaf&&!r&&i&&(this.checked=!1,t=!1);const u=()=>{if(n){const c=this.childNodes;for(let h=0,p=c.length;h<p;h++){const m=c[h];l=l||t!==!1;const v=m.disabled?m.checked:l;m.setChecked(v,n,!0,l)}const{half:d,all:f}=Jp(c);f||(this.checked=f,this.indeterminate=d)}};if(this.shouldLoadData()){this.loadData(()=>{u(),Hs(this)},{checked:t!==!1});return}else u()}const a=this.parent;!a||a.level===0||o||Hs(a)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const o=this.store.props;let l="children";return o&&(l=o.children||"children"),bt(n[l])&&(n[l]=null),t&&!n[l]&&(n[l]=[]),n[l]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(a=>a.data),o={},l=[];t.forEach((a,r)=>{const i=a[jr];!!i&&n.findIndex(c=>(c==null?void 0:c[jr])===i)>=0?o[i]={index:r,data:a}:l.push({index:r,data:a})}),this.store.lazy||n.forEach(a=>{o[a==null?void 0:a[jr]]||this.removeChildByData(a)}),l.forEach(({index:a,data:r})=>{this.insertChild({data:r},a)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const o=a=>{this.childNodes=[],this.doCreateChildren(a,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,a)},l=()=>{this.loading=!1};this.store.load(this,o,l)}else t&&t.call(this)}eachNode(t){const n=[this];for(;n.length;){const o=n.shift();n.unshift(...o.childNodes),t(o)}}reInitChecked(){this.store.checkStrictly||Hs(this)}};class iX{constructor(t){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const n in t)$t(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){if(this.root=new Qp({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()},It)}else this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,o=this.lazy,l=async function(a){const r=a.root?a.root.childNodes:a.childNodes;for(const[i,u]of r.entries())u.visible=!!(n!=null&&n.call(u,t,u.data,u)),i%80===0&&i>0&&await Ae(),await l(u);if(!a.visible&&r.length){let i=!0;i=!r.some(u=>u.visible),a.root?a.root.visible=i===!1:a.visible=i===!1}t&&a.visible&&!a.isLeaf&&(!o||a.loaded)&&a.expand()};l(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(t){if(t instanceof Qp)return t;const n=nt(t)?gm(this.key,t):t;return this.nodesMap[n]||null}insertBefore(t,n){var o;const l=this.getNode(n);(o=l.parent)==null||o.insertBefore({data:t},l)}insertAfter(t,n){var o;const l=this.getNode(n);(o=l.parent)==null||o.insertAfter({data:t},l)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const o=lo(n)?this.root:this.getNode(n);o&&o.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(o=>{const l=n[o];l&&l.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){const n=this.defaultCheckedKeys||[];!rn(t.key)&&n.includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;if(!(!t||!t.data))if(!n)this.nodesMap[t.id]=t;else{const o=t.key;rn(o)||(this.nodesMap[o]=t)}}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(o=>{this.deregisterNode(o)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const o=[],l=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(i=>{(i.checked||n&&i.indeterminate)&&(!t||t&&i.isLeaf)&&o.push(i.data),l(i)})};return l(this),o}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(a=>{a.indeterminate&&t.push(a.data),n(a)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const o in n)$t(n,o)&&t.push(n[o]);return t}updateChildren(t,n){const o=this.nodesMap[t];if(!o)return;const l=o.childNodes;for(let a=l.length-1;a>=0;a--){const r=l[a];this.remove(r.data)}for(let a=0,r=n.length;a<r;a++){const i=n[a];this.append(i,o.data)}}_setCheckedKeys(t,n=!1,o){const l=this._getAllNodes().sort((u,c)=>u.level-c.level),a=Object.create(null),r=Object.keys(o);l.forEach(u=>u.setChecked(!1,!1));const i=u=>{u.childNodes.forEach(c=>{var d;a[c.data[t]]=!0,(d=c.childNodes)!=null&&d.length&&i(c)})};for(let u=0,c=l.length;u<c;u++){const d=l[u],f=d.data[t].toString();if(!r.includes(f)){d.checked&&!a[f]&&d.setChecked(!1,!1);continue}if(d.childNodes.length&&i(d),d.isLeaf||this.checkStrictly){d.setChecked(!0,!1);continue}if(d.setChecked(!0,!0),n){d.setChecked(!1,!1);const p=function(m){m.childNodes.forEach(g=>{g.isLeaf||g.setChecked(!1,!1),p(g)})};p(d)}}}setCheckedNodes(t,n=!1){const o=this.key,l={};t.forEach(a=>{l[(a||{})[o]]=!0}),this._setCheckedKeys(o,n,l)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const o=this.key,l={};t.forEach(a=>{l[a]=!0}),this._setCheckedKeys(o,n,l)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const o=this.getNode(n);o&&o.expand(null,this.autoExpandParent)})}setChecked(t,n,o){const l=this.getNode(t);l&&l.setChecked(!!n,o)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){var o;const l=t[this.key],a=this.nodesMap[l];this.setCurrentNode(a),n&&this.currentNode&&this.currentNode.level>1&&((o=this.currentNode.parent)==null||o.expand(null,!0))}setCurrentNodeKey(t,n=!0){var o;if(this.currentNodeKey=t,lo(t)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const l=this.getNode(t);l&&(this.setCurrentNode(l),n&&this.currentNode&&this.currentNode.level>1&&((o=this.currentNode.parent)==null||o.expand(null,!0)))}}const bm="RootTree",pE="NodeInstance",u0="TreeNodeMap",uX=Y({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=ge("tree"),n=Re(pE),o=Re(bm);return()=>{const l=e.node,{data:a,store:r}=l;return e.renderContent?e.renderContent(qe,{_self:n,node:l,data:a,store:r}):oe(o.ctx.slots,"default",{node:l,data:a},()=>[qe(rm,{tag:"span",truncated:!0,class:t.be("node","label")},()=>[l.label])])}}});var cX=Ee(uX,[["__file","tree-node-content.vue"]]);function vE(e){const t=Re(u0,null),n={treeNodeExpand:o=>{var l;e.node!==o&&((l=e.node)==null||l.collapse())},children:[]};return t&&t.children.push(n),ht(u0,n),{broadcastExpanded:o=>{if(e.accordion)for(const l of n.children)l.treeNodeExpand(o)}}}const hE=Symbol("dragEvents");function dX({props:e,ctx:t,el$:n,dropIndicator$:o,store:l}){const a=ge("tree"),r=A({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return ht(hE,{treeNodeDragStart:({event:d,treeNode:f})=>{if(d.dataTransfer){if(Ke(e.allowDrag)&&!e.allowDrag(f.node))return d.preventDefault(),!1;d.dataTransfer.effectAllowed="move";try{d.dataTransfer.setData("text/plain","")}catch{}r.value.draggingNode=f,t.emit("node-drag-start",f.node,d)}},treeNodeDragOver:({event:d,treeNode:f})=>{if(!d.dataTransfer)return;const h=f,p=r.value.dropNode;p&&p.node.id!==h.node.id&&zn(p.$el,a.is("drop-inner"));const m=r.value.draggingNode;if(!m||!h)return;let v=!0,g=!0,b=!0,C=!0;Ke(e.allowDrop)&&(v=e.allowDrop(m.node,h.node,"prev"),C=g=e.allowDrop(m.node,h.node,"inner"),b=e.allowDrop(m.node,h.node,"next")),d.dataTransfer.dropEffect=g||v||b?"move":"none",(v||g||b)&&(p==null?void 0:p.node.id)!==h.node.id&&(p&&t.emit("node-drag-leave",m.node,p.node,d),t.emit("node-drag-enter",m.node,h.node,d)),v||g||b?r.value.dropNode=h:r.value.dropNode=null,h.node.nextSibling===m.node&&(b=!1),h.node.previousSibling===m.node&&(v=!1),h.node.contains(m.node,!1)&&(g=!1),(m.node===h.node||m.node.contains(h.node))&&(v=!1,g=!1,b=!1);const y=h.$el,w=y.querySelector(`.${a.be("node","content")}`).getBoundingClientRect(),E=n.value.getBoundingClientRect();let k;const T=v?g?.25:b?.45:1:Number.NEGATIVE_INFINITY,R=b?g?.75:v?.55:0:Number.POSITIVE_INFINITY;let I=-9999;const O=d.clientY-w.top;O<w.height*T?k="before":O>w.height*R?k="after":g?k="inner":k="none";const M=y.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),P=o.value;k==="before"?I=M.top-E.top:k==="after"&&(I=M.bottom-E.top),P.style.top=`${I}px`,P.style.left=`${M.right-E.left}px`,k==="inner"?_o(y,a.is("drop-inner")):zn(y,a.is("drop-inner")),r.value.showDropIndicator=k==="before"||k==="after",r.value.allowDrop=r.value.showDropIndicator||C,r.value.dropType=k,t.emit("node-drag-over",m.node,h.node,d)},treeNodeDragEnd:d=>{var f,h;const{draggingNode:p,dropType:m,dropNode:v}=r.value;if(d.preventDefault(),d.dataTransfer&&(d.dataTransfer.dropEffect="move"),p!=null&&p.node.data&&v){const g={data:p.node.data};m!=="none"&&p.node.remove(),m==="before"?(f=v.node.parent)==null||f.insertBefore(g,v.node):m==="after"?(h=v.node.parent)==null||h.insertAfter(g,v.node):m==="inner"&&v.node.insertChild(g),m!=="none"&&(l.value.registerNode(g),l.value.key&&p.node.eachNode(b=>{var C;(C=l.value.nodesMap[b.data[l.value.key]])==null||C.setChecked(b.checked,!l.value.checkStrictly)})),zn(v.$el,a.is("drop-inner")),t.emit("node-drag-end",p.node,v.node,m,d),m!=="none"&&t.emit("node-drop",p.node,v.node,m,d)}p&&!v&&t.emit("node-drag-end",p.node,null,m,d),r.value.showDropIndicator=!1,r.value.draggingNode=null,r.value.dropNode=null,r.value.allowDrop=!0}}),{dragState:r}}const fX=Y({name:"ElTreeNode",components:{ElCollapseTransition:Pd,ElCheckbox:xo,NodeContent:cX,ElIcon:Be,Loading:hl},props:{node:{type:Qp,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(e,t){const n=ge("tree"),{broadcastExpanded:o}=vE(e),l=Re(bm),a=A(!1),r=A(!1),i=A(),u=A(),c=A(),d=Re(hE),f=it();ht(pE,f),e.node.expanded&&(a.value=!0,r.value=!0);const h=l.props.props.children||"children";pe(()=>{var I;const O=(I=e.node.data)==null?void 0:I[h];return O&&[...O]},()=>{e.node.updateChildren()}),pe(()=>e.node.indeterminate,I=>{v(e.node.checked,I)}),pe(()=>e.node.checked,I=>{v(I,e.node.indeterminate)}),pe(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),pe(()=>e.node.expanded,I=>{Ae(()=>a.value=I),I&&(r.value=!0)});const p=I=>gm(l.props.nodeKey,I.data),m=I=>{const O=e.props.class;if(!O)return{};let M;if(Ke(O)){const{data:P}=I;M=O(P,I)}else M=O;return Fe(M)?{[M]:!0}:M},v=(I,O)=>{(i.value!==I||u.value!==O)&&l.ctx.emit("check-change",e.node.data,I,O),i.value=I,u.value=O},g=I=>{Xp(l.store,l.ctx.emit,()=>{var O;if((O=l==null?void 0:l.props)==null?void 0:O.nodeKey){const P=p(e.node);l.store.value.setCurrentNodeKey(P)}else l.store.value.setCurrentNode(e.node)}),l.currentNode.value=e.node,l.props.expandOnClickNode&&C(),(l.props.checkOnClickNode||e.node.isLeaf&&l.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&y(!e.node.checked),l.ctx.emit("node-click",e.node.data,e.node,f,I)},b=I=>{var O;(O=l.instance.vnode.props)!=null&&O.onNodeContextmenu&&(I.stopPropagation(),I.preventDefault()),l.ctx.emit("node-contextmenu",I,e.node.data,e.node,f)},C=()=>{e.node.isLeaf||(a.value?(l.ctx.emit("node-collapse",e.node.data,e.node,f),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,f)}))},y=I=>{e.node.setChecked(I,!(l!=null&&l.props.checkStrictly)),Ae(()=>{const O=l.store.value;l.ctx.emit("check",e.node.data,{checkedNodes:O.getCheckedNodes(),checkedKeys:O.getCheckedKeys(),halfCheckedNodes:O.getHalfCheckedNodes(),halfCheckedKeys:O.getHalfCheckedKeys()})})};return{ns:n,node$:c,tree:l,expanded:a,childNodeRendered:r,oldChecked:i,oldIndeterminate:u,getNodeKey:p,getNodeClass:m,handleSelectChange:v,handleClick:g,handleContextMenu:b,handleExpandIconClick:C,handleCheckChange:y,handleChildNodeExpand:(I,O,M)=>{o(O),l.ctx.emit("node-expand",I,O,M)},handleDragStart:I=>{l.props.draggable&&d.treeNodeDragStart({event:I,treeNode:e})},handleDragOver:I=>{I.preventDefault(),l.props.draggable&&d.treeNodeDragOver({event:I,treeNode:{$el:c.value,node:e.node}})},handleDrop:I=>{I.preventDefault()},handleDragEnd:I=>{l.props.draggable&&d.treeNodeDragEnd(I)},CaretRight:TC}}});function pX(e,t,n,o,l,a){const r=St("el-icon"),i=St("el-checkbox"),u=St("loading"),c=St("node-content"),d=St("el-tree-node"),f=St("el-collapse-transition");return Xe((_(),F("div",{ref:"node$",class:$([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:Ue(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:Ue(e.handleDragStart,["stop"]),onDragover:Ue(e.handleDragOver,["stop"]),onDragend:Ue(e.handleDragEnd,["stop"]),onDrop:Ue(e.handleDrop,["stop"])},[B("div",{class:$(e.ns.be("node","content")),style:We({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(_(),ie(r,{key:0,class:$([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:Ue(e.handleExpandIconClick,["stop"])},{default:ee(()=>[(_(),ie(st(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):ae("v-if",!0),e.showCheckbox?(_(),ie(i,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:Ue(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):ae("v-if",!0),e.node.loading?(_(),ie(r,{key:2,class:$([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:ee(()=>[J(u)]),_:1},8,["class"])):ae("v-if",!0),J(c,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),J(f,null,{default:ee(()=>[!e.renderAfterExpand||e.childNodeRendered?Xe((_(),F("div",{key:0,class:$(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:Ue(()=>{},["stop"])},[(_(!0),F(ze,null,dt(e.node.childNodes,h=>(_(),ie(d,{key:e.getNodeKey(h),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:h,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Et,e.expanded]]):ae("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Et,e.node.visible]])}var vX=Ee(fX,[["render",pX],["__file","tree-node.vue"]]);function hX({el$:e},t){const n=ge("tree");at(()=>{a()}),Jo(()=>{Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(i=>{i.setAttribute("tabindex","-1")})});function o(r,i){var u,c;const d=t.value.getNode(r[i].dataset.key);return d.canFocus&&d.visible&&(((u=d.parent)==null?void 0:u.expanded)||((c=d.parent)==null?void 0:c.level)===0)}At(e,"keydown",r=>{const i=r.target;if(!i.className.includes(n.b("node")))return;const u=r.code,c=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),d=c.indexOf(i);let f;if([Pe.up,Pe.down].includes(u)){if(r.preventDefault(),u===Pe.up){f=d===-1?0:d!==0?d-1:c.length-1;const p=f;for(;!o(c,f);){if(f--,f===p){f=-1;break}f<0&&(f=c.length-1)}}else{f=d===-1?0:d<c.length-1?d+1:0;const p=f;for(;!o(c,f);){if(f++,f===p){f=-1;break}f>=c.length&&(f=0)}}f!==-1&&c[f].focus()}[Pe.left,Pe.right].includes(u)&&(r.preventDefault(),i.click());const h=i.querySelector('[type="checkbox"]');[Pe.enter,Pe.numpadEnter,Pe.space].includes(u)&&h&&(r.preventDefault(),h.click())});const a=()=>{var r;if(!e.value)return;const i=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(d=>{d.setAttribute("tabindex","-1")});const c=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(r=i[0])==null||r.setAttribute("tabindex","0")}}const mX=Y({name:"ElTree",components:{ElTreeNode:vX},props:{data:{type:Z(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:Z(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:Z(Function)},allowDrop:{type:Z(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Mt}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=wt(),o=ge("tree"),l=Re(Ts,null),a=A(new iX({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));a.value.initialize();const r=A(a.value.root),i=A(null),u=A(null),c=A(null),{broadcastExpanded:d}=vE(e),{dragState:f}=dX({props:e,ctx:t,el$:u,dropIndicator$:c,store:a});hX({el$:u},a);const h=S(()=>{const{childNodes:N}=r.value,D=l?l.hasFilteredOptions!==0:!1;return(!N||N.length===0||N.every(({visible:z})=>!z))&&!D});pe(()=>e.currentNodeKey,N=>{a.value.setCurrentNodeKey(N??null)}),pe(()=>e.defaultCheckedKeys,(N,D)=>{Zt(N,D)||a.value.setDefaultCheckedKey(N??[])}),pe(()=>e.defaultExpandedKeys,N=>{a.value.setDefaultExpandedKeys(N??[])}),pe(()=>e.data,N=>{a.value.setData(N)},{deep:!0}),pe(()=>e.checkStrictly,N=>{a.value.checkStrictly=N});const p=N=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");a.value.filter(N)},m=N=>gm(e.nodeKey,N.data),v=N=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const D=a.value.getNode(N);if(!D)return[];const z=[D.data];let H=D.parent;for(;H&&H!==r.value;)z.push(H.data),H=H.parent;return z.reverse()},g=(N,D)=>a.value.getCheckedNodes(N,D),b=N=>a.value.getCheckedKeys(N),C=()=>{const N=a.value.getCurrentNode();return N?N.data:null},y=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const N=C();return N?N[e.nodeKey]:null},w=(N,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");a.value.setCheckedNodes(N,D)},E=(N,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");a.value.setCheckedKeys(N,D)},k=(N,D,z)=>{a.value.setChecked(N,D,z)},T=()=>a.value.getHalfCheckedNodes(),R=()=>a.value.getHalfCheckedKeys(),I=(N,D=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Xp(a,t.emit,()=>{d(N),a.value.setUserCurrentNode(N,D)})},O=(N,D=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Xp(a,t.emit,()=>{d(),a.value.setCurrentNodeKey(N??null,D)})},M=N=>a.value.getNode(N),P=N=>{a.value.remove(N)},W=(N,D)=>{a.value.append(N,D)},V=(N,D)=>{a.value.insertBefore(N,D)},q=(N,D)=>{a.value.insertAfter(N,D)},x=(N,D,z)=>{d(D),t.emit("node-expand",N,D,z)},L=(N,D)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");a.value.updateChildren(N,D)};return ht(bm,{ctx:t,props:e,store:a,root:r,currentNode:i,instance:it()}),ht(ml,void 0),{ns:o,store:a,root:r,currentNode:i,dragState:f,el$:u,dropIndicator$:c,isEmpty:h,filter:p,getNodeKey:m,getNodePath:v,getCheckedNodes:g,getCheckedKeys:b,getCurrentNode:C,getCurrentKey:y,setCheckedNodes:w,setCheckedKeys:E,setChecked:k,getHalfCheckedNodes:T,getHalfCheckedKeys:R,setCurrentNode:I,setCurrentKey:O,t:n,getNode:M,remove:P,append:W,insertBefore:V,insertAfter:q,handleNodeExpand:x,updateKeyChildren:L}}});function gX(e,t,n,o,l,a){const r=St("el-tree-node");return _(),F("div",{ref:"el$",class:$([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(_(!0),F(ze,null,dt(e.root.childNodes,i=>(_(),ie(r,{key:e.getNodeKey(i),node:i,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(_(),F("div",{key:0,class:$(e.ns.e("empty-block"))},[oe(e.$slots,"empty",{},()=>{var i;return[B("span",{class:$(e.ns.e("empty-text"))},we((i=e.emptyText)!=null?i:e.t("el.tree.emptyText")),3)]})],2)):ae("v-if",!0),Xe(B("div",{ref:"dropIndicator$",class:$(e.ns.e("drop-indicator"))},null,2),[[Et,e.dragState.showDropIndicator]])],2)}var bX=Ee(mX,[["render",gX],["__file","tree.vue"]]);const Gc=Qe(bX),yX=(e,{attrs:t,emit:n},{select:o,tree:l,key:a})=>{const r=ge("tree-select");return pe(()=>e.data,()=>{e.filterable&&Ae(()=>{var u,c;(c=l.value)==null||c.filter((u=o.value)==null?void 0:u.states.inputValue)})},{flush:"post"}),{...po(hn(e),Object.keys(lr.props)),...t,class:S(()=>t.class),style:S(()=>t.style),"onUpdate:modelValue":u=>n(Ge,u),valueKey:a,popperClass:S(()=>{const u=[r.e("popper")];return e.popperClass&&u.push(e.popperClass),u.join(" ")}),filterMethod:(u="")=>{var c;e.filterMethod?e.filterMethod(u):e.remoteMethod?e.remoteMethod(u):(c=l.value)==null||c.filter(u)}}},wX=Y({extends:Dc,setup(e,t){const n=Dc.setup(e,t);delete n.selectOptionClick;const o=it().proxy;return Ae(()=>{n.select.states.cachedOptions.get(o.value)||n.select.onOptionCreate(o)}),pe(()=>t.attrs.visible,l=>{Ae(()=>{n.states.visible=l})},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function ev(e){return e||e===0}function ym(e){return be(e)&&e.length}function Tr(e){return be(e)?e:ev(e)?[e]:[]}function uc(e,t,n,o,l){for(let a=0;a<e.length;a++){const r=e[a];if(t(r,a,e,l))return o?o(r,a,e,l):r;{const i=n(r);if(ym(i)){const u=uc(i,t,n,o,r);if(u)return u}}}}function cc(e,t,n,o){for(let l=0;l<e.length;l++){const a=e[l];t(a,l,e,o);const r=n(a);ym(r)&&cc(r,t,n,a)}}const CX=(e,{attrs:t,slots:n,emit:o},{select:l,tree:a,key:r})=>{pe([()=>e.modelValue,a],()=>{e.showCheckbox&&Ae(()=>{const h=a.value;h&&!Zt(h.getCheckedKeys(),Tr(e.modelValue))&&h.setCheckedKeys(Tr(e.modelValue))})},{immediate:!0,deep:!0});const i=S(()=>({value:r.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),u=(h,p)=>{var m;const v=i.value[h];return Ke(v)?v(p,(m=a.value)==null?void 0:m.getNode(u("value",p))):p[v]},c=Tr(e.modelValue).map(h=>uc(e.data||[],p=>u("value",p)===h,p=>u("children",p),(p,m,v,g)=>g&&u("value",g))).filter(h=>ev(h)),d=S(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const h=[];return cc(e.data.concat(e.cacheData),p=>{const m=u("value",p);h.push({value:m,currentLabel:u("label",p),isDisabled:u("disabled",p)})},p=>u("children",p)),h}),f=()=>{var h;return(h=a.value)==null?void 0:h.getCheckedKeys().filter(p=>{var m;const v=(m=a.value)==null?void 0:m.getNode(p);return!rn(v)&&co(v.childNodes)})};return{...po(hn(e),Object.keys(Gc.props)),...t,nodeKey:r,expandOnClickNode:S(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:S(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(c):c),renderContent:(h,{node:p,data:m,store:v})=>h(wX,{value:u("value",m),label:u("label",m),disabled:u("disabled",m),visible:p.visible},e.renderContent?()=>e.renderContent(h,{node:p,data:m,store:v}):n.default?()=>n.default({node:p,data:m,store:v}):void 0),filterNodeMethod:(h,p,m)=>e.filterNodeMethod?e.filterNodeMethod(h,p,m):h?new RegExp(zh(h),"i").test(u("label",p)||""):!0,onNodeClick:(h,p,m)=>{var v,g,b,C;if((v=t.onNodeClick)==null||v.call(t,h,p,m),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||p.isLeaf)){if(!u("disabled",h)){const y=(g=l.value)==null?void 0:g.states.options.get(u("value",h));(b=l.value)==null||b.handleOptionSelect(y)}}else e.expandOnClickNode&&m.proxy.handleExpandIconClick();(C=l.value)==null||C.focus()}},onCheck:(h,p)=>{var m;if(!e.showCheckbox)return;const v=u("value",h),g={};cc([a.value.store.root],w=>g[w.key]=w,w=>w.childNodes);const b=p.checkedKeys,C=e.multiple?Tr(e.modelValue).filter(w=>!(w in g)&&!b.includes(w)):[],y=C.concat(b);if(e.checkStrictly)o(Ge,e.multiple?y:y.includes(v)?v:void 0);else if(e.multiple){const w=f();o(Ge,C.concat(w))}else{const w=uc([h],T=>!ym(u("children",T))&&!u("disabled",T),T=>u("children",T)),E=w?u("value",w):void 0,k=ev(e.modelValue)&&!!uc([h],T=>u("value",T)===e.modelValue,T=>u("children",T));o(Ge,E===e.modelValue||k?void 0:E)}Ae(()=>{var w;const E=Tr(e.modelValue);a.value.setCheckedKeys(E),(w=t.onCheck)==null||w.call(t,h,{checkedKeys:a.value.getCheckedKeys(),checkedNodes:a.value.getCheckedNodes(),halfCheckedKeys:a.value.getHalfCheckedKeys(),halfCheckedNodes:a.value.getHalfCheckedNodes()})}),(m=l.value)==null||m.focus()},onNodeExpand:(h,p,m)=>{var v;(v=t.onNodeExpand)==null||v.call(t,h,p,m),Ae(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&p.checked){const g={},b=a.value.getCheckedKeys();cc([a.value.store.root],w=>g[w.key]=w,w=>w.childNodes);const C=Tr(e.modelValue).filter(w=>!(w in g)&&!b.includes(w)),y=f();o(Ge,C.concat(y))}})},cacheOptions:d}};var SX=Y({props:{data:{type:Array,default:()=>[]}},setup(e){const t=Re(Ts);return pe(()=>e.data,()=>{var n;e.data.forEach(l=>{t.states.cachedOptions.has(l.value)||t.states.cachedOptions.set(l.value,l)});const o=((n=t.selectRef)==null?void 0:n.querySelectorAll("input"))||[];kt&&!Array.from(o).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const kX=Y({name:"ElTreeSelect",inheritAttrs:!1,props:{...lr.props,...Gc.props,cacheData:{type:Array,default:()=>[]}},setup(e,t){const{slots:n,expose:o}=t,l=A(),a=A(),r=S(()=>e.nodeKey||e.valueKey||"value"),i=yX(e,t,{select:l,tree:a,key:r}),{cacheOptions:u,...c}=CX(e,t,{select:l,tree:a,key:r}),d=Tt({});return o(d),at(()=>{Object.assign(d,{...po(a.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...po(l.value,["focus","blur","selectedLabel"]),treeRef:a.value,selectRef:l.value})}),()=>qe(lr,Tt({...i,ref:f=>l.value=f}),{...n,default:()=>[qe(SX,{data:u.value}),qe(Gc,Tt({...c,ref:f=>a.value=f}))]})}});var EX=Ee(kX,[["__file","tree-select.vue"]]);const _X=Qe(EX),wm=Symbol(),TX={key:-1,level:-1,data:{}};var Ks=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e.CLASS="",e))(Ks||{}),tv=(e=>(e.ADD="add",e.DELETE="delete",e))(tv||{});const mE={type:Number,default:26},$X=Ce({data:{type:Z(Array),default:()=>Gt([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Z(Object),default:()=>Gt({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:Boolean,showCheckbox:Boolean,defaultCheckedKeys:{type:Z(Array),default:()=>Gt([])},checkStrictly:Boolean,defaultExpandedKeys:{type:Z(Array),default:()=>Gt([])},indent:{type:Number,default:16},itemSize:mE,icon:{type:Mt},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},currentNodeKey:{type:Z([String,Number])},accordion:Boolean,filterMethod:{type:Z(Function)},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:Boolean}),OX=Ce({node:{type:Z(Object),default:()=>Gt(TX)},expanded:Boolean,checked:Boolean,indeterminate:Boolean,showCheckbox:Boolean,disabled:Boolean,current:Boolean,hiddenExpandIcon:Boolean,itemSize:mE}),NX=Ce({node:{type:Z(Object),required:!0}}),gE="node-click",bE="node-drop",yE="node-expand",wE="node-collapse",CE="current-change",SE="check",kE="check-change",EE="node-contextmenu",IX={[gE]:(e,t,n)=>e&&t&&n,[bE]:(e,t,n)=>e&&t&&n,[yE]:(e,t)=>e&&t,[wE]:(e,t)=>e&&t,[CE]:(e,t)=>e&&t,[SE]:(e,t)=>e&&t,[kE]:(e,t)=>e&&xt(t),[EE]:(e,t,n)=>e&&t&&n},MX={click:(e,t)=>!!(e&&t),drop:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&xt(t)};function PX(e,t){const n=A(new Set),o=A(new Set),{emit:l}=it();pe([()=>t.value,()=>e.defaultCheckedKeys],()=>Ae(()=>{C(e.defaultCheckedKeys)}),{immediate:!0});const a=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:y,maxLevel:w}=t.value,E=n.value,k=new Set;for(let T=w-1;T>=1;--T){const R=y.get(T);R&&R.forEach(I=>{const O=I.children;if(O){let M=!0,P=!1;for(const W of O){const V=W.key;if(E.has(V))P=!0;else if(k.has(V)){M=!1,P=!0;break}else M=!1}M?E.add(I.key):P?(k.add(I.key),E.delete(I.key)):(E.delete(I.key),k.delete(I.key))}})}o.value=k},r=y=>n.value.has(y.key),i=y=>o.value.has(y.key),u=(y,w,E=!0,k=!0)=>{const T=n.value,R=(I,O)=>{T[O?tv.ADD:tv.DELETE](I.key);const M=I.children;!e.checkStrictly&&M&&M.forEach(P=>{P.disabled||R(P,O)})};R(y,w),k&&a(),E&&c(y,w)},c=(y,w)=>{const{checkedNodes:E,checkedKeys:k}=m(),{halfCheckedNodes:T,halfCheckedKeys:R}=v();l(SE,y.data,{checkedKeys:k,checkedNodes:E,halfCheckedKeys:R,halfCheckedNodes:T}),l(kE,y.data,w)};function d(y=!1){return m(y).checkedKeys}function f(y=!1){return m(y).checkedNodes}function h(){return v().halfCheckedKeys}function p(){return v().halfCheckedNodes}function m(y=!1){const w=[],E=[];if(t!=null&&t.value&&e.showCheckbox){const{treeNodeMap:k}=t.value;n.value.forEach(T=>{const R=k.get(T);R&&(!y||y&&R.isLeaf)&&(E.push(T),w.push(R.data))})}return{checkedKeys:E,checkedNodes:w}}function v(){const y=[],w=[];if(t!=null&&t.value&&e.showCheckbox){const{treeNodeMap:E}=t.value;o.value.forEach(k=>{const T=E.get(k);T&&(w.push(k),y.push(T.data))})}return{halfCheckedNodes:y,halfCheckedKeys:w}}function g(y){n.value.clear(),o.value.clear(),Ae(()=>{C(y)})}function b(y,w){if(t!=null&&t.value&&e.showCheckbox){const E=t.value.treeNodeMap.get(y);E&&u(E,w,!1)}}function C(y){if(t!=null&&t.value){const{treeNodeMap:w}=t.value;if(e.showCheckbox&&w&&(y==null?void 0:y.length)>0){for(const E of y){const k=w.get(E);k&&!r(k)&&u(k,!0,!1,!1)}a()}}}return{updateCheckedKeys:a,toggleCheckbox:u,isChecked:r,isIndeterminate:i,getCheckedKeys:d,getCheckedNodes:f,getHalfCheckedKeys:h,getHalfCheckedNodes:p,setChecked:b,setCheckedKeys:g}}function RX(e,t){const n=A(new Set([])),o=A(new Set([])),l=S(()=>Ke(e.filterMethod));function a(i){var u;if(!l.value)return;const c=new Set,d=o.value,f=n.value,h=[],p=((u=t.value)==null?void 0:u.treeNodes)||[],m=e.filterMethod;f.clear();function v(g){g.forEach(b=>{h.push(b),m!=null&&m(i,b.data,b)?h.forEach(y=>{c.add(y.key),y.expanded=!0}):(b.expanded=!1,b.isLeaf&&f.add(b.key));const C=b.children;if(C&&v(C),!b.isLeaf){if(!c.has(b.key))f.add(b.key);else if(C){let y=!0;for(const w of C)if(!f.has(w.key)){y=!1;break}y?d.add(b.key):d.delete(b.key)}}h.pop()})}return v(p),c}function r(i){return o.value.has(i.key)}return{hiddenExpandIconKeySet:o,hiddenNodeKeySet:n,doFilter:a,isForceHiddenExpandIcon:r}}function xX(e,t){const n=A(new Set),o=A(),l=jt(),a=A(),{isIndeterminate:r,isChecked:i,toggleCheckbox:u,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:p,setCheckedKeys:m}=PX(e,l),{doFilter:v,hiddenNodeKeySet:g,isForceHiddenExpandIcon:b}=RX(e,l),C=S(()=>{var te;return((te=e.props)==null?void 0:te.value)||Ks.KEY}),y=S(()=>{var te;return((te=e.props)==null?void 0:te.children)||Ks.CHILDREN}),w=S(()=>{var te;return((te=e.props)==null?void 0:te.disabled)||Ks.DISABLED}),E=S(()=>{var te;return((te=e.props)==null?void 0:te.label)||Ks.LABEL}),k=S(()=>{var te;const j=n.value,le=g.value,de=[],ce=((te=l.value)==null?void 0:te.treeNodes)||[],Se=[];for(let fe=ce.length-1;fe>=0;--fe)Se.push(ce[fe]);for(;Se.length;){const fe=Se.pop();if(!le.has(fe.key)&&(de.push(fe),fe.children&&j.has(fe.key)))for(let ve=fe.children.length-1;ve>=0;--ve)Se.push(fe.children[ve])}return de}),T=S(()=>k.value.length>0);function R(te){const j=new Map,le=new Map;let de=1;function ce(fe,ve=1,ke=void 0){var $e;const _e=[];for(const Ve of fe){const xe=M(Ve),he={level:ve,key:xe,data:Ve};he.label=W(Ve),he.parent=ke;const Le=O(Ve);he.disabled=P(Ve),he.isLeaf=!Le||Le.length===0,he.expanded=n.value.has(xe),Le&&Le.length&&(he.children=ce(Le,ve+1,he)),_e.push(he),j.set(xe,he),le.has(ve)||le.set(ve,[]),($e=le.get(ve))==null||$e.push(he)}return ve>de&&(de=ve),_e}const Se=ce(te);return{treeNodeMap:j,levelTreeNodeMap:le,maxLevel:de,treeNodes:Se}}function I(te){const j=v(te);j&&(n.value=j)}function O(te){return te[y.value]}function M(te){return te?te[C.value]:""}function P(te){return te[w.value]}function W(te){return te[E.value]}function V(te){n.value.has(te.key)?H(te):z(te)}function q(te){const j=new Set,le=l.value.treeNodeMap;n.value.forEach(de=>{const ce=le.get(de);n.value.delete(ce.key),ce.expanded=!1}),te.forEach(de=>{let ce=le.get(de);for(;ce&&!j.has(ce.key);)j.add(ce.key),ce.expanded=!0,ce=ce.parent}),n.value=j}function x(te,j){t(gE,te.data,te,j),N(te),e.expandOnClickNode&&V(te),e.showCheckbox&&(e.checkOnClickNode||te.isLeaf&&e.checkOnClickLeaf)&&!te.disabled&&u(te,!i(te),!0)}function L(te,j){t(bE,te.data,te,j)}function N(te){G(te)||(o.value=te.key,t(CE,te.data,te))}function D(te,j){u(te,j)}function z(te){const j=n.value;if(l.value&&e.accordion){const{treeNodeMap:le}=l.value;j.forEach(de=>{const ce=le.get(de);te&&te.level===(ce==null?void 0:ce.level)&&(j.delete(de),ce.expanded=!1)})}j.add(te.key),te.expanded=!0,t(yE,te.data,te)}function H(te){n.value.delete(te.key),te.expanded=!1,t(wE,te.data,te)}function K(te){return!!te.disabled}function G(te){const j=o.value;return j!==void 0&&j===te.key}function Q(){var te,j;if(o.value)return(j=(te=l.value)==null?void 0:te.treeNodeMap.get(o.value))==null?void 0:j.data}function re(){return o.value}function ue(te){o.value=te}function se(te){l.value=R(te)}function U(te){var j;const le=nt(te)?M(te):te;return(j=l.value)==null?void 0:j.treeNodeMap.get(le)}function ne(te,j="auto"){const le=U(te);le&&a.value&&a.value.scrollToItem(k.value.indexOf(le),j)}function Te(te){var j;(j=a.value)==null||j.scrollTo(te)}return pe(()=>e.currentNodeKey,te=>{o.value=te},{immediate:!0}),pe(()=>e.defaultExpandedKeys,te=>{n.value=new Set(te)},{immediate:!0}),pe(()=>e.data,te=>{se(te)},{immediate:!0}),{tree:l,flattenTree:k,isNotEmpty:T,listRef:a,getKey:M,getChildren:O,toggleExpand:V,toggleCheckbox:u,isChecked:i,isIndeterminate:r,isDisabled:K,isCurrent:G,isForceHiddenExpandIcon:b,handleNodeClick:x,handleNodeDrop:L,handleNodeCheck:D,getCurrentNode:Q,getCurrentKey:re,setCurrentKey:ue,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:p,setCheckedKeys:m,filter:I,setData:se,getNode:U,expandNode:z,collapseNode:H,setExpandedKeys:q,scrollToNode:ne,scrollTo:Te}}var AX=Y({name:"ElTreeNodeContent",props:NX,setup(e){const t=Re(wm),n=ge("tree");return()=>{const o=e.node,{data:l}=o;return t!=null&&t.ctx.slots.default?t.ctx.slots.default({node:o,data:l}):qe(rm,{tag:"span",truncated:!0,class:n.be("node","label")},()=>[o==null?void 0:o.label])}}});const LX=Y({name:"ElTreeNode"}),DX=Y({...LX,props:OX,emits:MX,setup(e,{emit:t}){const n=e,o=Re(wm),l=ge("tree"),a=S(()=>{var p;return(p=o==null?void 0:o.props.indent)!=null?p:16}),r=S(()=>{var p;return(p=o==null?void 0:o.props.icon)!=null?p:TC}),i=p=>{const m=o==null?void 0:o.props.props.class;if(!m)return{};let v;if(Ke(m)){const{data:g}=p;v=m(g,p)}else v=m;return Fe(v)?{[v]:!0}:v},u=p=>{t("click",n.node,p)},c=p=>{t("drop",n.node,p)},d=()=>{t("toggle",n.node)},f=p=>{t("check",n.node,p)},h=p=>{var m,v,g,b;(g=(v=(m=o==null?void 0:o.instance)==null?void 0:m.vnode)==null?void 0:v.props)!=null&&g.onNodeContextmenu&&(p.stopPropagation(),p.preventDefault()),o==null||o.ctx.emit(EE,p,(b=n.node)==null?void 0:b.data,n.node)};return(p,m)=>{var v,g,b;return _(),F("div",{ref:"node$",class:$([s(l).b("node"),s(l).is("expanded",p.expanded),s(l).is("current",p.current),s(l).is("focusable",!p.disabled),s(l).is("checked",!p.disabled&&p.checked),i(p.node)]),role:"treeitem",tabindex:"-1","aria-expanded":p.expanded,"aria-disabled":p.disabled,"aria-checked":p.checked,"data-key":(v=p.node)==null?void 0:v.key,onClick:Ue(u,["stop"]),onContextmenu:h,onDragover:Ue(()=>{},["prevent"]),onDragenter:Ue(()=>{},["prevent"]),onDrop:Ue(c,["stop"])},[B("div",{class:$(s(l).be("node","content")),style:We({paddingLeft:`${(p.node.level-1)*s(a)}px`,height:p.itemSize+"px"})},[s(r)?(_(),ie(s(Be),{key:0,class:$([s(l).is("leaf",!!((g=p.node)!=null&&g.isLeaf)),s(l).is("hidden",p.hiddenExpandIcon),{expanded:!((b=p.node)!=null&&b.isLeaf)&&p.expanded},s(l).be("node","expand-icon")]),onClick:Ue(d,["stop"])},{default:ee(()=>[(_(),ie(st(s(r))))]),_:1},8,["class","onClick"])):ae("v-if",!0),p.showCheckbox?(_(),ie(s(xo),{key:1,"model-value":p.checked,indeterminate:p.indeterminate,disabled:p.disabled,onChange:f,onClick:Ue(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):ae("v-if",!0),J(s(AX),{node:{...p.node,expanded:p.expanded}},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var BX=Ee(DX,[["__file","tree-node.vue"]]);const FX=Y({name:"ElTreeV2"}),VX=Y({...FX,props:$X,emits:IX,setup(e,{expose:t,emit:n}){const o=e,l=cn(),a=S(()=>o.itemSize);ht(wm,{ctx:{emit:n,slots:l},props:o,instance:it()}),ht(ml,void 0);const{t:r}=wt(),i=ge("tree"),{flattenTree:u,isNotEmpty:c,listRef:d,toggleExpand:f,isIndeterminate:h,isChecked:p,isDisabled:m,isCurrent:v,isForceHiddenExpandIcon:g,handleNodeClick:b,handleNodeDrop:C,handleNodeCheck:y,toggleCheckbox:w,getCurrentNode:E,getCurrentKey:k,setCurrentKey:T,getCheckedKeys:R,getCheckedNodes:I,getHalfCheckedKeys:O,getHalfCheckedNodes:M,setChecked:P,setCheckedKeys:W,filter:V,setData:q,getNode:x,expandNode:L,collapseNode:N,setExpandedKeys:D,scrollToNode:z,scrollTo:H}=xX(o,n);return t({toggleCheckbox:w,getCurrentNode:E,getCurrentKey:k,setCurrentKey:T,getCheckedKeys:R,getCheckedNodes:I,getHalfCheckedKeys:O,getHalfCheckedNodes:M,setChecked:P,setCheckedKeys:W,filter:V,setData:q,getNode:x,expandNode:L,collapseNode:N,setExpandedKeys:D,scrollToNode:z,scrollTo:H}),(K,G)=>(_(),F("div",{class:$([s(i).b(),{[s(i).m("highlight-current")]:K.highlightCurrent}]),role:"tree"},[s(c)?(_(),ie(s(l2),{key:0,ref_key:"listRef",ref:d,"class-name":s(i).b("virtual-list"),data:s(u),total:s(u).length,height:K.height,"item-size":s(a),"perf-mode":K.perfMode,"scrollbar-always-on":K.scrollbarAlwaysOn},{default:ee(({data:Q,index:re,style:ue})=>[(_(),ie(BX,{key:Q[re].key,style:We(ue),node:Q[re],expanded:Q[re].expanded,"show-checkbox":K.showCheckbox,checked:s(p)(Q[re]),indeterminate:s(h)(Q[re]),"item-size":s(a),disabled:s(m)(Q[re]),current:s(v)(Q[re]),"hidden-expand-icon":s(g)(Q[re]),onClick:s(b),onToggle:s(f),onCheck:s(y),onDrop:s(C)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode","scrollbar-always-on"])):(_(),F("div",{key:1,class:$(s(i).e("empty-block"))},[oe(K.$slots,"empty",{},()=>{var Q;return[B("span",{class:$(s(i).e("empty-text"))},we((Q=K.emptyText)!=null?Q:s(r)("el.tree.emptyText")),3)]})],2))],2))}});var zX=Ee(VX,[["__file","tree.vue"]]);const HX=Qe(zX),_E=Symbol("uploadContextKey"),KX="ElUpload";class WX extends Error{constructor(t,n,o,l){super(t),this.name="UploadAjaxError",this.status=n,this.method=o,this.url=l}}function c0(e,t,n){let o;return n.response?o=`${n.response.error||n.response}`:n.responseText?o=`${n.responseText}`:o=`fail to ${t.method} ${e} ${n.status}`,new WX(o,n.status,t.method,e)}function jX(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const UX=e=>{typeof XMLHttpRequest>"u"&&sn(KX,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,n=e.action;t.upload&&t.upload.addEventListener("progress",a=>{const r=a;r.percent=a.total>0?a.loaded/a.total*100:0,e.onProgress(r)});const o=new FormData;if(e.data)for(const[a,r]of Object.entries(e.data))be(r)&&r.length?o.append(a,...r):o.append(a,r);o.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(c0(n,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(c0(n,e,t));e.onSuccess(jX(t))}),t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const l=e.headers||{};if(l instanceof Headers)l.forEach((a,r)=>t.setRequestHeader(r,a));else for(const[a,r]of Object.entries(l))rn(r)||t.setRequestHeader(a,String(r));return t.send(o),t},TE=["text","picture","picture-card"];let qX=1;const nv=()=>Date.now()+qX++,$E=Ce({action:{type:String,default:"#"},headers:{type:Z(Object)},method:{type:String,default:"post"},data:{type:Z([Object,Function,Promise]),default:()=>Gt({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Z(Array),default:()=>Gt([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:TE,default:"text"},httpRequest:{type:Z(Function),default:UX},disabled:Boolean,limit:Number}),YX=Ce({...$E,beforeUpload:{type:Z(Function),default:It},beforeRemove:{type:Z(Function)},onRemove:{type:Z(Function),default:It},onChange:{type:Z(Function),default:It},onPreview:{type:Z(Function),default:It},onSuccess:{type:Z(Function),default:It},onProgress:{type:Z(Function),default:It},onError:{type:Z(Function),default:It},onExceed:{type:Z(Function),default:It},crossorigin:{type:Z(String)}}),GX=Ce({files:{type:Z(Array),default:()=>Gt([])},disabled:Boolean,handlePreview:{type:Z(Function),default:It},listType:{type:String,values:TE,default:"text"},crossorigin:{type:Z(String)}}),XX={remove:e=>!!e},JX=Y({name:"ElUploadList"}),ZX=Y({...JX,props:GX,emits:XX,setup(e,{emit:t}){const n=e,{t:o}=wt(),l=ge("upload"),a=ge("icon"),r=ge("list"),i=mn(),u=A(!1),c=S(()=>[l.b("list"),l.bm("list",n.listType),l.is("disabled",n.disabled)]),d=f=>{t("remove",f)};return(f,h)=>(_(),ie(Fw,{tag:"ul",class:$(s(c)),name:s(r).b()},{default:ee(()=>[(_(!0),F(ze,null,dt(f.files,(p,m)=>(_(),F("li",{key:p.uid||p.name,class:$([s(l).be("list","item"),s(l).is(p.status),{focusing:u.value}]),tabindex:"0",onKeydown:Dt(v=>!s(i)&&d(p),["delete"]),onFocus:v=>u.value=!0,onBlur:v=>u.value=!1,onClick:v=>u.value=!1},[oe(f.$slots,"default",{file:p,index:m},()=>[f.listType==="picture"||p.status!=="uploading"&&f.listType==="picture-card"?(_(),F("img",{key:0,class:$(s(l).be("list","item-thumbnail")),src:p.url,crossorigin:f.crossorigin,alt:""},null,10,["src","crossorigin"])):ae("v-if",!0),p.status==="uploading"||f.listType!=="picture-card"?(_(),F("div",{key:1,class:$(s(l).be("list","item-info"))},[B("a",{class:$(s(l).be("list","item-name")),onClick:Ue(v=>f.handlePreview(p),["prevent"])},[J(s(Be),{class:$(s(a).m("document"))},{default:ee(()=>[J(s(A4))]),_:1},8,["class"]),B("span",{class:$(s(l).be("list","item-file-name")),title:p.name},we(p.name),11,["title"])],10,["onClick"]),p.status==="uploading"?(_(),ie(s(Yk),{key:0,type:f.listType==="picture-card"?"circle":"line","stroke-width":f.listType==="picture-card"?6:2,percentage:Number(p.percentage),style:We(f.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):ae("v-if",!0)],2)):ae("v-if",!0),B("label",{class:$(s(l).be("list","item-status-label"))},[f.listType==="text"?(_(),ie(s(Be),{key:0,class:$([s(a).m("upload-success"),s(a).m("circle-check")])},{default:ee(()=>[J(s(Qv))]),_:1},8,["class"])):["picture-card","picture"].includes(f.listType)?(_(),ie(s(Be),{key:1,class:$([s(a).m("upload-success"),s(a).m("check")])},{default:ee(()=>[J(s(eu))]),_:1},8,["class"])):ae("v-if",!0)],2),s(i)?ae("v-if",!0):(_(),ie(s(Be),{key:2,class:$(s(a).m("close")),onClick:v=>d(p)},{default:ee(()=>[J(s(Mo))]),_:2},1032,["class","onClick"])),ae(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),ae(" This is a bug which needs to be fixed "),ae(" TODO: Fix the incorrect navigation interaction "),s(i)?ae("v-if",!0):(_(),F("i",{key:3,class:$(s(a).m("close-tip"))},we(s(o)("el.upload.deleteTip")),3)),f.listType==="picture-card"?(_(),F("span",{key:4,class:$(s(l).be("list","item-actions"))},[B("span",{class:$(s(l).be("list","item-preview")),onClick:v=>f.handlePreview(p)},[J(s(Be),{class:$(s(a).m("zoom-in"))},{default:ee(()=>[J(s(IC))]),_:1},8,["class"])],10,["onClick"]),s(i)?ae("v-if",!0):(_(),F("span",{key:0,class:$(s(l).be("list","item-delete")),onClick:v=>d(p)},[J(s(Be),{class:$(s(a).m("delete"))},{default:ee(()=>[J(s(R4))]),_:1},8,["class"])],10,["onClick"]))],2)):ae("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),oe(f.$slots,"append")]),_:3},8,["class","name"]))}});var d0=Ee(ZX,[["__file","upload-list.vue"]]);const QX=Ce({disabled:Boolean}),eJ={file:e=>be(e)},OE="ElUploadDrag",tJ=Y({name:OE}),nJ=Y({...tJ,props:QX,emits:eJ,setup(e,{emit:t}){Re(_E)||sn(OE,"usage: <el-upload><el-upload-dragger /></el-upload>");const o=ge("upload"),l=A(!1),a=mn(),r=c=>{if(a.value)return;l.value=!1,c.stopPropagation();const d=Array.from(c.dataTransfer.files),f=c.dataTransfer.items||[];d.forEach((h,p)=>{var m;const v=f[p],g=(m=v==null?void 0:v.webkitGetAsEntry)==null?void 0:m.call(v);g&&(h.isDirectory=g.isDirectory)}),t("file",d)},i=()=>{a.value||(l.value=!0)},u=c=>{c.currentTarget.contains(c.relatedTarget)||(l.value=!1)};return(c,d)=>(_(),F("div",{class:$([s(o).b("dragger"),s(o).is("dragover",l.value)]),onDrop:Ue(r,["prevent"]),onDragover:Ue(i,["prevent"]),onDragleave:Ue(u,["prevent"])},[oe(c.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var oJ=Ee(nJ,[["__file","upload-dragger.vue"]]);const lJ=Ce({...$E,beforeUpload:{type:Z(Function),default:It},onRemove:{type:Z(Function),default:It},onStart:{type:Z(Function),default:It},onSuccess:{type:Z(Function),default:It},onProgress:{type:Z(Function),default:It},onError:{type:Z(Function),default:It},onExceed:{type:Z(Function),default:It}}),aJ=Y({name:"ElUploadContent",inheritAttrs:!1}),rJ=Y({...aJ,props:lJ,setup(e,{expose:t}){const n=e,o=ge("upload"),l=mn(),a=jt({}),r=jt(),i=v=>{if(v.length===0)return;const{autoUpload:g,limit:b,fileList:C,multiple:y,onStart:w,onExceed:E}=n;if(b&&C.length+v.length>b){E(v,C);return}y||(v=v.slice(0,1));for(const k of v){const T=k;T.uid=nv(),w(T),g&&u(T)}},u=async v=>{if(r.value.value="",!n.beforeUpload)return d(v);let g,b={};try{const y=n.data,w=n.beforeUpload(v);b=si(n.data)?Tc(n.data):n.data,g=await w,si(n.data)&&Zt(y,b)&&(b=Tc(n.data))}catch{g=!1}if(g===!1){n.onRemove(v);return}let C=v;g instanceof Blob&&(g instanceof File?C=g:C=new File([g],v.name,{type:v.type})),d(Object.assign(C,{uid:v.uid}),b)},c=async(v,g)=>Ke(v)?v(g):v,d=async(v,g)=>{const{headers:b,data:C,method:y,withCredentials:w,name:E,action:k,onProgress:T,onSuccess:R,onError:I,httpRequest:O}=n;try{g=await c(g??C,v)}catch{n.onRemove(v);return}const{uid:M}=v,P={headers:b||{},withCredentials:w,file:v,data:g,method:y,filename:E,action:k,onProgress:V=>{T(V,v)},onSuccess:V=>{R(V,v),delete a.value[M]},onError:V=>{I(V,v),delete a.value[M]}},W=O(P);a.value[M]=W,W instanceof Promise&&W.then(P.onSuccess,P.onError)},f=v=>{const g=v.target.files;g&&i(Array.from(g))},h=()=>{l.value||(r.value.value="",r.value.click())},p=()=>{h()};return t({abort:v=>{bC(a.value).filter(v?([b])=>String(v.uid)===b:()=>!0).forEach(([b,C])=>{C instanceof XMLHttpRequest&&C.abort(),delete a.value[b]})},upload:u}),(v,g)=>(_(),F("div",{class:$([s(o).b(),s(o).m(v.listType),s(o).is("drag",v.drag),s(o).is("disabled",s(l))]),tabindex:s(l)?"-1":"0",onClick:h,onKeydown:Dt(Ue(p,["self"]),["enter","space"])},[v.drag?(_(),ie(oJ,{key:0,disabled:s(l),onFile:i},{default:ee(()=>[oe(v.$slots,"default")]),_:3},8,["disabled"])):oe(v.$slots,"default",{key:1}),B("input",{ref_key:"inputRef",ref:r,class:$(s(o).e("input")),name:v.name,disabled:s(l),multiple:v.multiple,accept:v.accept,type:"file",onChange:f,onClick:Ue(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var f0=Ee(rJ,[["__file","upload-content.vue"]]);const p0="ElUpload",v0=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},sJ=(e,t)=>{const n=cC(e,"fileList",void 0,{passive:!0}),o=p=>n.value.find(m=>m.uid===p.uid);function l(p){var m;(m=t.value)==null||m.abort(p)}function a(p=["ready","uploading","success","fail"]){n.value=n.value.filter(m=>!p.includes(m.status))}function r(p){n.value=n.value.filter(m=>m.uid!==p.uid)}const i=(p,m)=>{const v=o(m);v&&(console.error(p),v.status="fail",r(v),e.onError(p,v,n.value),e.onChange(v,n.value))},u=(p,m)=>{const v=o(m);v&&(e.onProgress(p,v,n.value),v.status="uploading",v.percentage=Math.round(p.percent))},c=(p,m)=>{const v=o(m);v&&(v.status="success",v.response=p,e.onSuccess(p,v,n.value),e.onChange(v,n.value))},d=p=>{rn(p.uid)&&(p.uid=nv());const m={name:p.name,percentage:0,status:"ready",size:p.size,raw:p,uid:p.uid};if(e.listType==="picture-card"||e.listType==="picture")try{m.url=URL.createObjectURL(p)}catch(v){v.message,e.onError(v,m,n.value)}n.value=[...n.value,m],e.onChange(m,n.value)},f=async p=>{const m=p instanceof File?o(p):p;m||sn(p0,"file to be removed not found");const v=g=>{l(g),r(g),e.onRemove(g,n.value),v0(g)};e.beforeRemove?await e.beforeRemove(m,n.value)!==!1&&v(m):v(m)};function h(){n.value.filter(({status:p})=>p==="ready").forEach(({raw:p})=>{var m;return p&&((m=t.value)==null?void 0:m.upload(p))})}return pe(()=>e.listType,p=>{p!=="picture-card"&&p!=="picture"||(n.value=n.value.map(m=>{const{raw:v,url:g}=m;if(!g&&v)try{m.url=URL.createObjectURL(v)}catch(b){e.onError(b,m,n.value)}return m}))}),pe(n,p=>{for(const m of p)m.uid||(m.uid=nv()),m.status||(m.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:l,clearFiles:a,handleError:i,handleProgress:u,handleStart:d,handleSuccess:c,handleRemove:f,submit:h,revokeFileObjectURL:v0}},iJ=Y({name:"ElUpload"}),uJ=Y({...iJ,props:YX,setup(e,{expose:t}){const n=e,o=mn(),l=jt(),{abort:a,submit:r,clearFiles:i,uploadFiles:u,handleStart:c,handleError:d,handleRemove:f,handleSuccess:h,handleProgress:p,revokeFileObjectURL:m}=sJ(n,l),v=S(()=>n.listType==="picture-card"),g=S(()=>({...n,fileList:u.value,onStart:c,onProgress:p,onSuccess:h,onError:d,onRemove:f}));return Nt(()=>{u.value.forEach(m)}),ht(_E,{accept:Ot(n,"accept")}),t({abort:a,submit:r,clearFiles:i,handleStart:c,handleRemove:f}),(b,C)=>(_(),F("div",null,[s(v)&&b.showFileList?(_(),ie(d0,{key:0,disabled:s(o),"list-type":b.listType,files:s(u),crossorigin:b.crossorigin,"handle-preview":b.onPreview,onRemove:s(f)},so({append:ee(()=>[J(f0,ot({ref_key:"uploadRef",ref:l},s(g)),{default:ee(()=>[b.$slots.trigger?oe(b.$slots,"trigger",{key:0}):ae("v-if",!0),!b.$slots.trigger&&b.$slots.default?oe(b.$slots,"default",{key:1}):ae("v-if",!0)]),_:3},16)]),_:2},[b.$slots.file?{name:"default",fn:ee(({file:y,index:w})=>[oe(b.$slots,"file",{file:y,index:w})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ae("v-if",!0),!s(v)||s(v)&&!b.showFileList?(_(),ie(f0,ot({key:1,ref_key:"uploadRef",ref:l},s(g)),{default:ee(()=>[b.$slots.trigger?oe(b.$slots,"trigger",{key:0}):ae("v-if",!0),!b.$slots.trigger&&b.$slots.default?oe(b.$slots,"default",{key:1}):ae("v-if",!0)]),_:3},16)):ae("v-if",!0),b.$slots.trigger?oe(b.$slots,"default",{key:2}):ae("v-if",!0),oe(b.$slots,"tip"),!s(v)&&b.showFileList?(_(),ie(d0,{key:3,disabled:s(o),"list-type":b.listType,files:s(u),crossorigin:b.crossorigin,"handle-preview":b.onPreview,onRemove:s(f)},so({_:2},[b.$slots.file?{name:"default",fn:ee(({file:y,index:w})=>[oe(b.$slots,"file",{file:y,index:w})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ae("v-if",!0)]))}});var cJ=Ee(uJ,[["__file","upload.vue"]]);const dJ=Qe(cJ),fJ=Ce({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:Z([String,Array]),default:"Element Plus"},font:{type:Z(Object)},gap:{type:Z(Array),default:()=>[100,100]},offset:{type:Z(Array)}});function pJ(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function vJ(e){return Object.keys(e).map(t=>`${pJ(t)}: ${e[t]};`).join(" ")}function hJ(){return window.devicePixelRatio||1}const mJ=(e,t)=>{let n=!1;return e.removedNodes.length&&t&&(n=Array.from(e.removedNodes).includes(t)),e.type==="attributes"&&e.target===t&&(n=!0),n},NE=3,gJ={left:[0,.5],start:[0,.5],center:[.5,0],right:[1,-.5],end:[1,-.5]};function xf(e,t,n=1){const o=document.createElement("canvas"),l=o.getContext("2d"),a=e*n,r=t*n;return o.setAttribute("width",`${a}px`),o.setAttribute("height",`${r}px`),l.save(),[l,o,a,r]}function bJ(){function e(t,n,o,l,a,r,i,u,c){const[d,f,h,p]=xf(l,a,o);if(t instanceof HTMLImageElement)d.drawImage(t,0,0,h,p);else{const{color:K,fontSize:G,fontStyle:Q,fontWeight:re,fontFamily:ue,textAlign:se,textBaseline:U}=r,ne=Number(G)*o;d.font=`${Q} normal ${re} ${ne}px/${a}px ${ue}`,d.fillStyle=K,d.textAlign=se,d.textBaseline=U;const Te=be(t)?t:[t];Te==null||Te.forEach((te,j)=>{const[le,de]=gJ[se];d.fillText(te??"",h*le+c*de,j*(ne+NE*o))})}const m=Math.PI/180*Number(n),v=Math.max(l,a),[g,b,C]=xf(v,v,o);g.translate(C/2,C/2),g.rotate(m),h>0&&p>0&&g.drawImage(f,-h/2,-p/2);function y(K,G){const Q=K*Math.cos(m)-G*Math.sin(m),re=K*Math.sin(m)+G*Math.cos(m);return[Q,re]}let w=0,E=0,k=0,T=0;const R=h/2,I=p/2;[[0-R,0-I],[0+R,0-I],[0+R,0+I],[0-R,0+I]].forEach(([K,G])=>{const[Q,re]=y(K,G);w=Math.min(w,Q),E=Math.max(E,Q),k=Math.min(k,re),T=Math.max(T,re)});const M=w+C/2,P=k+C/2,W=E-w,V=T-k,q=i*o,x=u*o,L=(W+q)*2,N=V+x,[D,z]=xf(L,N);function H(K=0,G=0){D.drawImage(b,M,P,W,V,K,G,W,V)}return H(),H(W+q,-V/2-x/2),H(W+q,+V/2+x/2),[z.toDataURL(),L/o,N/o]}return e}const yJ=Y({name:"ElWatermark"}),wJ=Y({...yJ,props:fJ,setup(e){const t=e,n={position:"relative"},o=S(()=>{var O,M;return(M=(O=t.font)==null?void 0:O.color)!=null?M:"rgba(0,0,0,.15)"}),l=S(()=>{var O,M;return(M=(O=t.font)==null?void 0:O.fontSize)!=null?M:16}),a=S(()=>{var O,M;return(M=(O=t.font)==null?void 0:O.fontWeight)!=null?M:"normal"}),r=S(()=>{var O,M;return(M=(O=t.font)==null?void 0:O.fontStyle)!=null?M:"normal"}),i=S(()=>{var O,M;return(M=(O=t.font)==null?void 0:O.fontFamily)!=null?M:"sans-serif"}),u=S(()=>{var O,M;return(M=(O=t.font)==null?void 0:O.textAlign)!=null?M:"center"}),c=S(()=>{var O,M;return(M=(O=t.font)==null?void 0:O.textBaseline)!=null?M:"hanging"}),d=S(()=>t.gap[0]),f=S(()=>t.gap[1]),h=S(()=>d.value/2),p=S(()=>f.value/2),m=S(()=>{var O,M;return(M=(O=t.offset)==null?void 0:O[0])!=null?M:h.value}),v=S(()=>{var O,M;return(M=(O=t.offset)==null?void 0:O[1])!=null?M:p.value}),g=()=>{const O={zIndex:t.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let M=m.value-h.value,P=v.value-p.value;return M>0&&(O.left=`${M}px`,O.width=`calc(100% - ${M}px)`,M=0),P>0&&(O.top=`${P}px`,O.height=`calc(100% - ${P}px)`,P=0),O.backgroundPosition=`${M}px ${P}px`,O},b=jt(null),C=jt(),y=A(!1),w=()=>{C.value&&(C.value.remove(),C.value=void 0)},E=(O,M)=>{var P;b.value&&C.value&&(y.value=!0,C.value.setAttribute("style",vJ({...g(),backgroundImage:`url('${O}')`,backgroundSize:`${Math.floor(M)}px`})),(P=b.value)==null||P.append(C.value),setTimeout(()=>{y.value=!1}))},k=O=>{let M=120,P=64,W=0;const{image:V,content:q,width:x,height:L,rotate:N}=t;if(!V&&O.measureText){O.font=`${Number(l.value)}px ${i.value}`;const D=be(q)?q:[q];let z=0,H=0;D.forEach(G=>{const{width:Q,fontBoundingBoxAscent:re,fontBoundingBoxDescent:ue,actualBoundingBoxAscent:se,actualBoundingBoxDescent:U}=O.measureText(G),ne=bt(re)?se+U:re+ue;Q>z&&(z=Math.ceil(Q)),ne>H&&(H=Math.ceil(ne))}),M=z,P=H*D.length+(D.length-1)*NE;const K=Math.PI/180*Number(N);W=Math.ceil(Math.abs(Math.sin(K)*P)/2),M+=W}return[x??M,L??P,W]},T=bJ(),R=()=>{const M=document.createElement("canvas").getContext("2d"),P=t.image,W=t.content,V=t.rotate;if(M){C.value||(C.value=document.createElement("div"));const q=hJ(),[x,L,N]=k(M),D=z=>{const[H,K]=T(z||"",V,q,x,L,{color:o.value,fontSize:l.value,fontStyle:r.value,fontWeight:a.value,fontFamily:i.value,textAlign:u.value,textBaseline:c.value},d.value,f.value,N);E(H,K)};if(P){const z=new Image;z.onload=()=>{D(z)},z.onerror=()=>{D(W)},z.crossOrigin="anonymous",z.referrerPolicy="no-referrer",z.src=P}else D(W)}};return at(()=>{R()}),pe(()=>t,()=>{R()},{deep:!0,flush:"post"}),Nt(()=>{w()}),uC(b,O=>{y.value||O.forEach(M=>{mJ(M,C.value)&&(w(),R())})},{attributes:!0,subtree:!0,childList:!0}),(O,M)=>(_(),F("div",{ref_key:"containerRef",ref:b,style:We([n])},[oe(O.$slots,"default")],4))}});var CJ=Ee(wJ,[["__file","watermark.vue"]]);const SJ=Qe(CJ),kJ=Ce({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:Z(Object)},targetAreaClickable:{type:Boolean,default:!0}}),EJ=(e,t,n,o,l)=>{const a=A(null),r=()=>{let f;return Fe(e.value)?f=document.querySelector(e.value):Ke(e.value)?f=e.value():f=e.value,f},i=()=>{const f=r();if(!f||!t.value){a.value=null;return}_J(f)||f.scrollIntoView(l.value);const{left:h,top:p,width:m,height:v}=f.getBoundingClientRect();a.value={left:h,top:p,width:m,height:v,radius:0}};at(()=>{pe([t,e],()=>{i()},{immediate:!0}),window.addEventListener("resize",i)}),Nt(()=>{window.removeEventListener("resize",i)});const u=f=>{var h;return(h=be(n.value.offset)?n.value.offset[f]:n.value.offset)!=null?h:6},c=S(()=>{var f;if(!a.value)return a.value;const h=u(0),p=u(1),m=((f=n.value)==null?void 0:f.radius)||2;return{left:a.value.left-h,top:a.value.top-p,width:a.value.width+h*2,height:a.value.height+p*2,radius:m}}),d=S(()=>{const f=r();return!o.value||!f||!window.DOMRect?f||void 0:{getBoundingClientRect(){var h,p,m,v;return window.DOMRect.fromRect({width:((h=c.value)==null?void 0:h.width)||0,height:((p=c.value)==null?void 0:p.height)||0,x:((m=c.value)==null?void 0:m.left)||0,y:((v=c.value)==null?void 0:v.top)||0})}}});return{mergedPosInfo:c,triggerTarget:d}},Kd=Symbol("ElTour");function _J(e){const t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:o,right:l,bottom:a,left:r}=e.getBoundingClientRect();return o>=0&&r>=0&&l<=t&&a<=n}const TJ=(e,t,n,o,l,a,r,i)=>{const u=A(),c=A(),d=A({}),f={x:u,y:c,placement:o,strategy:l,middlewareData:d},h=S(()=>{const b=[iE(s(a)),NG(),OG(),$J()];return s(i)&&s(n)&&b.push(uE({element:s(n)})),b}),p=async()=>{if(!kt)return;const b=s(e),C=s(t);if(!b||!C)return;const y=await cE(b,C,{placement:s(o),strategy:s(l),middleware:s(h)});Jr(f).forEach(w=>{f[w].value=y[w]})},m=S(()=>{if(!s(e))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:s(r)};const{overflow:b}=s(d);return{position:s(l),zIndex:s(r),top:s(c)!=null?`${s(c)}px`:"",left:s(u)!=null?`${s(u)}px`:"",maxWidth:b!=null&&b.maxWidth?`${b==null?void 0:b.maxWidth}px`:""}}),v=S(()=>{if(!s(i))return{};const{arrow:b}=s(d);return{left:(b==null?void 0:b.x)!=null?`${b==null?void 0:b.x}px`:"",top:(b==null?void 0:b.y)!=null?`${b==null?void 0:b.y}px`:""}});let g;return at(()=>{const b=s(e),C=s(t);b&&C&&(g=TG(b,C,p)),Vn(()=>{p()})}),Nt(()=>{g&&g()}),{update:p,contentStyle:m,arrowStyle:v}},$J=()=>({name:"overflow",async fn(e){const t=await $G(e);let n=0;return t.left>0&&(n=t.left),t.right>0&&(n=t.right),{data:{maxWidth:e.rects.floating.width-n}}}}),OJ=Y({name:"ElTourMask",inheritAttrs:!1}),NJ=Y({...OJ,props:kJ,setup(e){const t=e,{ns:n}=Re(Kd),o=S(()=>{var d,f;return(f=(d=t.pos)==null?void 0:d.radius)!=null?f:2}),l=S(()=>{const d=o.value,f=`a${d},${d} 0 0 1`;return{topRight:`${f} ${d},${d}`,bottomRight:`${f} ${-d},${d}`,bottomLeft:`${f} ${-d},${-d}`,topLeft:`${f} ${d},${-d}`}}),{width:a,height:r}=Gv(),i=S(()=>{const d=a.value,f=r.value,h=l.value,p=`M${d},0 L0,0 L0,${f} L${d},${f} L${d},0 Z`,m=o.value;return t.pos?`${p} M${t.pos.left+m},${t.pos.top} h${t.pos.width-m*2} ${h.topRight} v${t.pos.height-m*2} ${h.bottomRight} h${-t.pos.width+m*2} ${h.bottomLeft} v${-t.pos.height+m*2} ${h.topLeft} z`:p}),u=S(()=>({position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:t.zIndex,pointerEvents:t.pos&&t.targetAreaClickable?"none":"auto"})),c=S(()=>({fill:t.fill,pointerEvents:"auto",cursor:"auto"}));return Ph(Ot(t,"visible"),{ns:n}),(d,f)=>d.visible?(_(),F("div",ot({key:0,class:s(n).e("mask"),style:s(u)},d.$attrs),[(_(),F("svg",{style:{width:"100%",height:"100%"}},[B("path",{class:$(s(n).e("hollow")),style:We(s(c)),d:s(i)},null,14,["d"])]))],16)):ae("v-if",!0)}});var IJ=Ee(NJ,[["__file","mask.vue"]]);const MJ=["absolute","fixed"],PJ=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],Cm=Ce({placement:{type:Z(String),values:PJ,default:"bottom"},reference:{type:Z(Object),default:null},strategy:{type:Z(String),values:MJ,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),RJ={close:()=>!0},xJ=Y({name:"ElTourContent"}),AJ=Y({...xJ,props:Cm,emits:RJ,setup(e,{emit:t}){const n=e,o=A(n.placement),l=A(n.strategy),a=A(null),r=A(null);pe(()=>n.placement,()=>{o.value=n.placement});const{contentStyle:i,arrowStyle:u}=TJ(Ot(n,"reference"),a,r,o,l,Ot(n,"offset"),Ot(n,"zIndex"),Ot(n,"showArrow")),c=S(()=>o.value.split("-")[0]),{ns:d}=Re(Kd),f=()=>{t("close")},h=p=>{p.detail.focusReason==="pointer"&&p.preventDefault()};return(p,m)=>(_(),F("div",{ref_key:"contentRef",ref:a,style:We(s(i)),class:$(s(d).e("content")),"data-side":s(c),tabindex:"-1"},[J(s(hr),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":a.value||void 0,onReleaseRequested:f,onFocusoutPrevented:h},{default:ee(()=>[oe(p.$slots,"default")]),_:3},8,["focus-trap-el"]),p.showArrow?(_(),F("span",{key:0,ref_key:"arrowRef",ref:r,style:We(s(u)),class:$(s(d).e("arrow"))},null,6)):ae("v-if",!0)],14,["data-side"]))}});var LJ=Ee(AJ,[["__file","content.vue"]]),DJ=Y({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(e,{slots:t,emit:n}){let o=0;return()=>{var l,a;const r=(l=t.default)==null?void 0:l.call(t),i=[];let u=0;function c(d){be(d)&&d.forEach(f=>{var h;((h=(f==null?void 0:f.type)||{})==null?void 0:h.name)==="ElTourStep"&&(i.push(f),u+=1)})}return r.length&&c(cl((a=r[0])==null?void 0:a.children)),o!==u&&(o=u,n("update-total",u)),i.length?i[e.current]:null}}});const BJ=Ce({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:Mt},placement:Cm.placement,contentStyle:{type:Z([Object])},mask:{type:Z([Boolean,Object]),default:!0},gap:{type:Z(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:Z([Boolean,Object]),default:()=>({block:"center"})},type:{type:Z(String)},appendTo:{type:Nd.to.type,default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),FJ={[Ge]:e=>xt(e),"update:current":e=>je(e),close:e=>je(e),finish:()=>!0,change:e=>je(e)},VJ=Y({name:"ElTour"}),zJ=Y({...VJ,props:BJ,emits:FJ,setup(e,{emit:t}){const n=e,o=ge("tour"),l=A(0),a=A(),r=cC(n,"current",t,{passive:!0}),i=S(()=>{var I;return(I=a.value)==null?void 0:I.target}),u=S(()=>[o.b(),g.value==="primary"?o.m("primary"):""]),c=S(()=>{var I;return((I=a.value)==null?void 0:I.placement)||n.placement}),d=S(()=>{var I,O;return(O=(I=a.value)==null?void 0:I.contentStyle)!=null?O:n.contentStyle}),f=S(()=>{var I,O;return(O=(I=a.value)==null?void 0:I.mask)!=null?O:n.mask}),h=S(()=>!!f.value&&n.modelValue),p=S(()=>xt(f.value)?void 0:f.value),m=S(()=>{var I,O;return!!i.value&&((O=(I=a.value)==null?void 0:I.showArrow)!=null?O:n.showArrow)}),v=S(()=>{var I,O;return(O=(I=a.value)==null?void 0:I.scrollIntoViewOptions)!=null?O:n.scrollIntoViewOptions}),g=S(()=>{var I,O;return(O=(I=a.value)==null?void 0:I.type)!=null?O:n.type}),{nextZIndex:b}=Ss(),C=b(),y=S(()=>{var I;return(I=n.zIndex)!=null?I:C}),{mergedPosInfo:w,triggerTarget:E}=EJ(i,Ot(n,"modelValue"),Ot(n,"gap"),f,v);pe(()=>n.modelValue,I=>{I||(r.value=0)});const k=()=>{n.closeOnPressEscape&&(t(Ge,!1),t("close",r.value))},T=I=>{l.value=I},R=cn();return ht(Kd,{currentStep:a,current:r,total:l,showClose:Ot(n,"showClose"),closeIcon:Ot(n,"closeIcon"),mergedType:g,ns:o,slots:R,updateModelValue(I){t(Ge,I)},onClose(){t("close",r.value)},onFinish(){t("finish")},onChange(){t(vt,r.value)}}),(I,O)=>(_(),F(ze,null,[J(s(Es),{to:I.appendTo},{default:ee(()=>{var M,P;return[B("div",ot({class:s(u)},I.$attrs),[J(IJ,{visible:s(h),fill:(M=s(p))==null?void 0:M.color,style:We((P=s(p))==null?void 0:P.style),pos:s(w),"z-index":s(y),"target-area-clickable":I.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),I.modelValue?(_(),ie(LJ,{key:s(r),reference:s(E),placement:s(c),"show-arrow":s(m),"z-index":s(y),style:We(s(d)),onClose:k},{default:ee(()=>[J(s(DJ),{current:s(r),onUpdateTotal:T},{default:ee(()=>[oe(I.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):ae("v-if",!0)],16)]}),_:3},8,["to"]),ae(" just for IDE "),ae("v-if",!0)],64))}});var HJ=Ee(zJ,[["__file","tour.vue"]]);const KJ=Ce({target:{type:Z([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:Mt},showArrow:{type:Boolean,default:void 0},placement:Cm.placement,mask:{type:Z([Boolean,Object]),default:void 0},contentStyle:{type:Z([Object])},prevButtonProps:{type:Z(Object)},nextButtonProps:{type:Z(Object)},scrollIntoViewOptions:{type:Z([Boolean,Object]),default:void 0},type:{type:Z(String)}}),WJ={close:()=>!0},jJ=Y({name:"ElTourStep"}),UJ=Y({...jJ,props:KJ,emits:WJ,setup(e,{emit:t}){const n=e,{Close:o}=MC,{t:l}=wt(),{currentStep:a,current:r,total:i,showClose:u,closeIcon:c,mergedType:d,ns:f,slots:h,updateModelValue:p,onClose:m,onFinish:v,onChange:g}=Re(Kd);pe(n,I=>{a.value=I},{immediate:!0});const b=S(()=>{var I;return(I=n.showClose)!=null?I:u.value}),C=S(()=>{var I,O;return(O=(I=n.closeIcon)!=null?I:c.value)!=null?O:o}),y=I=>{if(I)return lC(I,["children","onClick"])},w=()=>{var I,O;r.value-=1,(I=n.prevButtonProps)!=null&&I.onClick&&((O=n.prevButtonProps)==null||O.onClick()),g()},E=()=>{var I;r.value>=i.value-1?k():r.value+=1,(I=n.nextButtonProps)!=null&&I.onClick&&n.nextButtonProps.onClick(),g()},k=()=>{T(),v()},T=()=>{p(!1),m(),t("close")},R=I=>{const O=I.target;if(O!=null&&O.isContentEditable)return;const P={[Pe.left]:()=>r.value>0&&w(),[Pe.right]:E}[I.code];P&&(I.preventDefault(),P())};return at(()=>{window.addEventListener("keydown",R)}),Nt(()=>{window.removeEventListener("keydown",R)}),(I,O)=>(_(),F(ze,null,[s(b)?(_(),F("button",{key:0,"aria-label":s(l)("el.tour.close"),class:$(s(f).e("closebtn")),type:"button",onClick:T},[J(s(Be),{class:$(s(f).e("close"))},{default:ee(()=>[(_(),ie(st(s(C))))]),_:1},8,["class"])],10,["aria-label"])):ae("v-if",!0),B("header",{class:$([s(f).e("header"),{"show-close":s(u)}])},[oe(I.$slots,"header",{},()=>[B("span",{role:"heading",class:$(s(f).e("title"))},we(I.title),3)])],2),B("div",{class:$(s(f).e("body"))},[oe(I.$slots,"default",{},()=>[B("span",null,we(I.description),1)])],2),B("footer",{class:$(s(f).e("footer"))},[B("div",{class:$(s(f).b("indicators"))},[s(h).indicators?(_(),ie(st(s(h).indicators),{key:0,current:s(r),total:s(i)},null,8,["current","total"])):(_(!0),F(ze,{key:1},dt(s(i),(M,P)=>(_(),F("span",{key:M,class:$([s(f).b("indicator"),P===s(r)?"is-active":""])},null,2))),128))],2),B("div",{class:$(s(f).b("buttons"))},[s(r)>0?(_(),ie(s(yn),ot({key:0,size:"small",type:s(d)},y(I.prevButtonProps),{onClick:w}),{default:ee(()=>{var M,P;return[gt(we((P=(M=I.prevButtonProps)==null?void 0:M.children)!=null?P:s(l)("el.tour.previous")),1)]}),_:1},16,["type"])):ae("v-if",!0),s(r)<=s(i)-1?(_(),ie(s(yn),ot({key:1,size:"small",type:s(d)==="primary"?"default":"primary"},y(I.nextButtonProps),{onClick:E}),{default:ee(()=>{var M,P;return[gt(we((P=(M=I.nextButtonProps)==null?void 0:M.children)!=null?P:s(r)===s(i)-1?s(l)("el.tour.finish"):s(l)("el.tour.next")),1)]}),_:1},16,["type"])):ae("v-if",!0)],2)],2)],64))}});var IE=Ee(UJ,[["__file","step.vue"]]);const qJ=Qe(HJ,{TourStep:IE}),YJ=Xt(IE),GJ=Ce({container:{type:Z([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:Z(String),default:"default"},direction:{type:Z(String),default:"vertical"},selectScrollTop:Boolean}),XJ={change:e=>Fe(e),click:(e,t)=>e instanceof MouseEvent&&(Fe(t)||bt(t))},ME=Symbol("anchor"),Vu=e=>{if(!kt||e==="")return null;if(Fe(e))try{return document.querySelector(e)}catch{return null}return e};function JJ(e){let t=0;const n=(...o)=>{t&&or(t),t=Sa(()=>{e(...o),t=0})};return n.cancel=()=>{or(t),t=0},n}const ZJ=Y({name:"ElAnchor"}),QJ=Y({...ZJ,props:GJ,emits:XJ,setup(e,{expose:t,emit:n}){const o=e,l=cn(),a=A(""),r=A({}),i=A(null),u=A(null),c=A(),d={};let f=!1,h=0;const p=ge("anchor"),m=S(()=>[p.b(),o.type==="underline"?p.m("underline"):"",p.m(o.direction)]),v=O=>{d[O.href]=O.el},g=O=>{delete d[O]},b=O=>{a.value!==O&&(a.value=O,n(vt,O))};let C=null;const y=O=>{if(!c.value)return;const M=Vu(O);if(!M)return;C&&C(),f=!0;const P=Sb(M,c.value),W=hp(M,P),V=P.scrollHeight-P.clientHeight,q=Math.min(W-o.offset,V);C=e4(c.value,h,q,o.duration,()=>{setTimeout(()=>{f=!1},20)})},w=O=>{O&&(b(O),y(O))},E=(O,M)=>{n("click",O,M),w(M)},k=JJ(()=>{c.value&&(h=kb(c.value));const O=T();f||bt(O)||b(O)}),T=()=>{if(!c.value)return;const O=kb(c.value),M=[];for(const P of Object.keys(d)){const W=Vu(P);if(!W)continue;const V=Sb(W,c.value),q=hp(W,V);M.push({top:q-o.offset-o.bound,href:P})}M.sort((P,W)=>P.top-W.top);for(let P=0;P<M.length;P++){const W=M[P],V=M[P+1];if(P===0&&O===0)return o.selectScrollTop?W.href:"";if(W.top<=O&&(!V||V.top>O))return W.href}},R=()=>{const O=Vu(o.container);!O||Zi(O)?c.value=window:c.value=O};At(c,"scroll",k);const I=()=>{Ae(()=>{if(!i.value||!u.value||!a.value){r.value={};return}const O=d[a.value];if(!O){r.value={};return}const M=i.value.getBoundingClientRect(),P=u.value.getBoundingClientRect(),W=O.getBoundingClientRect();if(o.direction==="horizontal"){const V=W.left-M.left;r.value={left:`${V}px`,width:`${W.width}px`,opacity:1}}else{const V=W.top-M.top+(W.height-P.height)/2;r.value={top:`${V}px`,opacity:1}}})};return pe(a,I),pe(()=>{var O;return(O=l.default)==null?void 0:O.call(l)},I),at(()=>{R();const O=decodeURIComponent(window.location.hash);Vu(O)?w(O):k()}),pe(()=>o.container,()=>{R()}),ht(ME,{ns:p,direction:o.direction,currentAnchor:a,addLink:v,removeLink:g,handleClick:E}),t({scrollTo:w}),(O,M)=>(_(),F("div",{ref_key:"anchorRef",ref:i,class:$(s(m))},[O.marker?(_(),F("div",{key:0,ref_key:"markerRef",ref:u,class:$(s(p).e("marker")),style:We(r.value)},null,6)):ae("v-if",!0),B("div",{class:$(s(p).e("list"))},[oe(O.$slots,"default")],2)],2))}});var eZ=Ee(QJ,[["__file","anchor.vue"]]);const tZ=Ce({title:String,href:String}),nZ=Y({name:"ElAnchorLink"}),oZ=Y({...nZ,props:tZ,setup(e){const t=e,n=A(null),{ns:o,direction:l,currentAnchor:a,addLink:r,removeLink:i,handleClick:u}=Re(ME),c=S(()=>[o.e("link"),o.is("active",a.value===t.href)]),d=f=>{u(f,t.href)};return pe(()=>t.href,(f,h)=>{Ae(()=>{h&&i(h),f&&r({href:f,el:n.value})})}),at(()=>{const{href:f}=t;f&&r({href:f,el:n.value})}),Nt(()=>{const{href:f}=t;f&&i(f)}),(f,h)=>(_(),F("div",{class:$(s(o).e("item"))},[B("a",{ref_key:"linkRef",ref:n,class:$(s(c)),href:f.href,onClick:d},[oe(f.$slots,"default",{},()=>[gt(we(f.title),1)])],10,["href"]),f.$slots["sub-link"]&&s(l)==="vertical"?(_(),F("div",{key:0,class:$(s(o).e("list"))},[oe(f.$slots,"sub-link")],2)):ae("v-if",!0)],2))}});var PE=Ee(oZ,[["__file","anchor-link.vue"]]);const lZ=Qe(eZ,{AnchorLink:PE}),aZ=Xt(PE),RE={label:"label",value:"value",disabled:"disabled"},rZ=Ce({direction:{type:Z(String),default:"horizontal"},options:{type:Z(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},props:{type:Z(Object),default:()=>RE},block:Boolean,size:fn,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...In(["ariaLabel"])}),sZ={[Ge]:e=>Fe(e)||je(e)||xt(e),[vt]:e=>Fe(e)||je(e)||xt(e)},iZ=Y({name:"ElSegmented"}),uZ=Y({...iZ,props:rZ,emits:sZ,setup(e,{emit:t}){const n=e,o=ge("segmented"),l=kn(),a=un(),r=mn(),{formItem:i}=_n(),{inputId:u,isLabeledByFormItem:c}=yo(n,{formItemContext:i}),d=A(null),f=EA(),h=Tt({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),p=M=>{const P=g(M);t(Ge,P),t(vt,P)},m=S(()=>({...RE,...n.props})),v=M=>M,g=M=>nt(M)?M[m.value.value]:M,b=M=>nt(M)?M[m.value.label]:M,C=M=>!!(r.value||nt(M)&&M[m.value.disabled]),y=M=>n.modelValue===g(M),w=M=>n.options.find(P=>g(P)===M),E=M=>[o.e("item"),o.is("selected",y(M)),o.is("disabled",C(M))],k=()=>{if(!d.value)return;const M=d.value.querySelector(".is-selected"),P=d.value.querySelector(".is-selected input");if(!M||!P){h.width=0,h.height=0,h.translateX=0,h.translateY=0,h.focusVisible=!1;return}h.isInit=!0,n.direction==="vertical"?(h.height=M.offsetHeight,h.translateY=M.offsetTop):(h.width=M.offsetWidth,h.translateX=M.offsetLeft);try{h.focusVisible=P.matches(":focus-visible")}catch{}},T=S(()=>[o.b(),o.m(a.value),o.is("block",n.block)]),R=S(()=>({width:n.direction==="vertical"?"100%":`${h.width}px`,height:n.direction==="vertical"?`${h.height}px`:"100%",transform:n.direction==="vertical"?`translateY(${h.translateY}px)`:`translateX(${h.translateX}px)`,display:h.isInit?"block":"none"})),I=S(()=>[o.e("item-selected"),o.is("disabled",C(w(n.modelValue))),o.is("focus-visible",h.focusVisible)]),O=S(()=>n.name||l.value);return qt(d,k),pe(f,k),pe(()=>n.modelValue,()=>{var M;k(),n.validateEvent&&((M=i==null?void 0:i.validate)==null||M.call(i,"change").catch(P=>void 0))},{flush:"post"}),(M,P)=>M.options.length?(_(),F("div",{key:0,id:s(u),ref_key:"segmentedRef",ref:d,class:$(s(T)),role:"radiogroup","aria-label":s(c)?void 0:M.ariaLabel||"segmented","aria-labelledby":s(c)?s(i).labelId:void 0},[B("div",{class:$([s(o).e("group"),s(o).m(n.direction)])},[B("div",{style:We(s(R)),class:$(s(I))},null,6),(_(!0),F(ze,null,dt(M.options,(W,V)=>(_(),F("label",{key:V,class:$(E(W))},[B("input",{class:$(s(o).e("item-input")),type:"radio",name:s(O),disabled:C(W),checked:y(W),onChange:q=>p(W)},null,42,["name","disabled","checked","onChange"]),B("div",{class:$(s(o).e("item-label"))},[oe(M.$slots,"default",{item:v(W)},()=>[gt(we(b(W)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):ae("v-if",!0)}});var cZ=Ee(uZ,[["__file","segmented.vue"]]);const dZ=Qe(cZ),fZ=(e,t)=>{const n=e.toLowerCase();return(t.label||t.value||"").toLowerCase().includes(n)},pZ=(e,t,n)=>{const{selectionEnd:o}=e;if(o===null)return;const l=e.value,a=bn(t);let r=-1,i;for(let u=o-1;u>=0;--u){const c=l[u];if(c===n||c===`

Verificare console.log în frontend (ar trebui eliminate pentru producție):
webui/src/App.vue:console.log('API_BASE computed →', API_BASE)

Verificare hardcoded passwords/secrets:
./cmd/webapi/main.go:			token := authHeader[7:] // Remove "Bearer " prefix
./cmd/webapi/main.go:			// Validate token through the store
./cmd/webapi/main.go:			user, err := store.GetUserByToken(token)
./service/chat_service.go:	GetUserByToken(token string) (*models.User, error)
./service/chat_service.go:	CreateToken(userID string) (string, error)
./service/chat_service.go:	// Create token for user
./service/chat_service.go:	token, err := s.store.CreateToken(user.ID)
./service/chat_service.go:		return nil, fmt.Errorf("failed to create token: %w", err)
./service/chat_service.go:		Identifier: token,
./service/store/chat_store.go:	// Token operations
./service/store/chat_store.go:	CreateToken(userID string) (string, error)
./service/store/chat_store.go:	GetUserByToken(token string) (*models.User, error)
./service/store/chat_store.go:	DeleteToken(token string) error
./service/store/chat_store.go:		`CREATE TABLE IF NOT EXISTS tokens (
./service/store/chat_store.go:			token TEXT PRIMARY KEY,

================================================================================
19. VERIFICARE DOCKER COMPOSE - CONFIGURARE DETALIATĂ
================================================================================

Conținut docker-compose.yml:
services:
  backend:
    image: new-wasa-backend:latest
    build:
      context: .
      dockerfile: Dockerfile.backend
    ports:
      - "8080:8080"
    environment:
      - GIN_MODE=release
    volumes:
      - backend_data:/app/data
    networks:
      - wasa_network
  frontend:
    image: new-wasa-frontend:latest
    build:
      context: .
      dockerfile: Dockerfile.frontend
    ports:
      - "8081:80"
    depends_on:
      - backend
    volumes:
      - ./webui/nginx.compose.conf:/etc/nginx/conf.d/default.conf:ro
    networks:
      - wasa_network

volumes:
  backend_data:
    driver: local

networks:
  wasa_network:
    driver: bridge

Verificare volume și networks:
    volumes:
      - backend_data:/app/data
    networks:
      - wasa_network
  frontend:
    image: new-wasa-frontend:latest
    build:
      context: .
--
    volumes:
      - ./webui/nginx.compose.conf:/etc/nginx/conf.d/default.conf:ro
    networks:
      - wasa_network

volumes:
  backend_data:
    driver: local

networks:
  wasa_network:
    driver: bridge

================================================================================
20. SUMAR FINAL - STATUS PROIECT
================================================================================

📊 STATISTICI PROIECT:
  - Linii cod Go: 1685
  - Fișiere Go:       12
  - Linii cod Vue/JS: 7
  - Mărime totală vendor:  20M
  - Mărime totală node_modules: 128M

✅ VERIFICĂRI COMPLETE
📄 Rezultate salvate în: verification.log

================================================================================
VERIFICARE FINALIZATĂ LA: Wed Oct 15 01:43:26 EEST 2025
================================================================================
